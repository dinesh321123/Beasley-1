!function(a,b,c){"use strict";function d(){var a;switch(ib){case"html5_flash":a=["Html5","Flash"];break;case"flash":a=["Flash"];break;case"html5":a=["Html5"];break;case"flash_html5":default:a=["Flash","Html5"]}var b={coreModules:[{id:"MediaPlayer",playerId:"td_container",isDebug:!0,techPriority:a,timeShift:{active:0,max_listening_time:35},geoTargeting:{desktop:{isActive:!1},iOS:{isActive:!1},android:{isActive:!1}},plugins:[{id:"vastAd"}]},{id:"NowPlayingApi"},{id:"Npe"},{id:"PlayerWebAdmin"},{id:"SyncBanners",elements:[{id:"td_synced_bigbox",width:300,height:250},{id:"td_synced_leaderboard",width:728,height:90}]},{id:"TargetSpot"}]};require(["tdapi/base/util/Companions"],function(a){hb=new a}),cb=new TdPlayerApi(b),cb.addEventListener("player-ready",q),cb.addEventListener("configuration-error",K),cb.addEventListener("module-error",L),cb.loadModules()}function e(a){var b=document.createElement("script");b.setAttribute("type","text/javascript"),b.setAttribute("src","//playerservices.live.streamtheworld.com/api/idsync.js?station="+a),document.getElementsByTagName("head")[0].appendChild(b)}function f(){var b,c,d,e;b=a("#playButton"),c=a("#pauseButton"),d=a("#resumeButton"),e=a(".mejs-play"),b.click(function(){b.hide(),c.show()}),a("#clearDebug").click(function(){bb()}),a("#playStreamByUserStationButton").click(function(){h()}),a("#playUrlButton").click(function(){return""==a("#streamUrlUser").val()?void alert("Please enter an url"):(db&&cb.skipAd(),fb&&cb.stop(),void cb.MediaPlayer.tech.playStream({url:a("#streamUrlUser").val(),aSyncCuePoint:{active:!1}}))}),a(".stop-live").click(function(){i()}),c.click(function(){c.hide(),d.show(),j()}),e.click(function(){c.hide(),d.show(),j()}),d.click(function(){d.hide(),c.show(),k()}),a("#seekLiveButton").click(function(){k()}),a("#muteButton").click(function(){n()}),a("#unMuteButton").click(function(){o()}),a("#setVolume50Button").click(function(){m()}),a("#getArtistButton").click(function(){p()})}function g(){gmr.logged_in?(console.log("--- You are logged in, so now enjoy some music ---"),S(),cb.addEventListener("ad-playback-complete",function(){console.log("--- add complete ---");var b="WLNKFM";return""==b?void alert("Please enter a Station"):(ab("playLiveAudioStream - station="+b),a("#stationUser").val(""),fb&&cb.stop(),void cb.play({station:b,timeShift:!0}))})):console.log("--- Log In with Gigya ---")}function h(){return""==a("#stationUser").val()?void alert("Please enter a Station"):(db&&cb.skipAd(),fb&&cb.stop(),cb.play({station:a("#stationUser").val(),timeShift:!0}),void(jb!=a("#stationUser").val()&&(jb=a("#stationUser").val(),e(jb))))}function i(){cb.stop()}function j(){cb.pause()}function k(){cb.seekLive()}function l(){if(""==a("#songHistoryCallsignUser").val())return void alert("Please enter a Callsign");var b="hdConnection"==a("#songHistoryConnectionTypeSelect").val();cb.NowPlayingApi.load({mount:a("#songHistoryCallsignUser").val(),hd:b,numberToFetch:15})}function m(){cb.setVolume(.5)}function n(){cb.mute()}function o(){cb.unMute()}function p(){gb&&null!=gb.artist()&&gb.artist().fetchData()}function q(){cb.MediaPlayer!=c&&(g(),f(),cb.addEventListener("track-cue-point",A),cb.addEventListener("ad-break-cue-point",D),cb.addEventListener("stream-track-change",B),cb.addEventListener("hls-cue-point",C),cb.addEventListener("stream-status",M),cb.addEventListener("stream-geo-blocked",N),cb.addEventListener("timeout-alert",I),cb.addEventListener("timeout-reach",J),cb.addEventListener("npe-song",V),cb.addEventListener("stream-select",y),cb.addEventListener("stream-start",x),cb.addEventListener("stream-stop",z),cb.setVolume(1),O("Api Ready"),P(cb.MediaPlayer.tech.type),cb.addEventListener("list-loaded",F),cb.addEventListener("list-empty",G),cb.addEventListener("nowplaying-api-error",H),a("#fetchSongHistoryByUserCallsignButton").click(function(){l()}),cb.addEventListener("pwa-data-loaded",R),a("#pwaButton").click(function(){Q()}))}function r(a){db=!0,O("Advertising... Type="+a.data.type)}function s(){db=!1,a("#td_adserver_bigbox").empty(),a("#td_adserver_leaderboard").empty(),O("Ready")}function t(a){ab("Ad countdown : "+a.data.countDown+" second(s)")}function u(a){ab("Vast Process complete");var b=a.data.companions;w(b)}function v(a){ab("Vpaid Ad Companions"),w(a.companions)}function w(b){if(b&&b.length>0){var c=-1,d=-1;a.each(b,function(a,b){300==parseInt(b.width)&&250==parseInt(b.height)?c=a:728==parseInt(b.width)&&90==parseInt(b.height)&&(d=a)}),c>-1&&hb.loadVASTCompanionAd("td_adserver_bigbox",b[c]),d>-1&&hb.loadVASTCompanionAd("td_adserver_leaderboard",b[d])}}function x(){fb=!0}function y(){a("#hasHQ").html(cb.MediaPlayer.hasHQ().toString()),a("#isHQ").html(cb.MediaPlayer.isHQ().toString()),a("#hasLow").html(cb.MediaPlayer.hasLow().toString()),a("#isLow").html(cb.MediaPlayer.isLow().toString())}function z(){fb=!1,E(),a("#trackInfo").html(""),a("#asyncData").html(""),a("#hasHQ").html("N/A"),a("#isHQ").html("N/A"),a("#hasLow").html("N/A"),a("#isLow").html("N/A")}function A(b){ab("New Track cuepoint received"),ab("Title:"+b.data.cuePoint.cueTitle+" - Artist:"+b.data.cuePoint.artistName),console.log(b),eb&&eb!=b.data.cuePoint&&E(),b.data.cuePoint.nowplayingURL&&cb.Npe.loadNpeMetadata(b.data.cuePoint.nowplayingURL,b.data.cuePoint.artistName,b.data.cuePoint.cueTitle),eb=b.data.cuePoint,a("#trackInfo").html('<div class="now-playing__title">'+eb.cueTitle+'</div><div class="now-playing__artist">'+eb.artistName+"</div>")}function B(a){ab("Stream Track has changed"),ab("Codec:"+a.data.cuePoint.audioTrack.codec()+" - Bitrate:"+a.data.cuePoint.audioTrack.bitRate())}function C(a){ab("New HLS cuepoint received"),ab("Track Id:"+a.data.cuePoint.hlsTrackId+" SegmentId:"+a.data.cuePoint.hlsSegmentId),console.log(a)}function D(a){O("Commercial break..."),console.log(a)}function E(){a("#npeInfo").html(""),a("#asyncData").html("")}function F(b){ab("Song History loaded"),console.log(b.data),a("#asyncData").html('<br><p><span class="label label-warning">Song History:</span>');var c,d='<table class="table table-striped"><thead><tr><th>Song title</th><th>Artist name</th><th>Time</th></tr></thead>';a.each(b.data.list,function(a,b){c=new Date(Number(b.cueTimeStart)),d+="<tr><td>"+b.cueTitle+"</td><td>"+b.artistName+"</td><td>"+c.toLocaleTimeString()+"</td></tr>"}),d+="</table></p>",a("#asyncData").html("<div>"+d+"</div>")}function G(){a("#asyncData").html('<br><p><span class="label label-important">Song History is empty</span>')}function H(b){ab("Song History loading error",!0),console.error(b),a("#asyncData").html('<br><p><span class="label label-important">Song History error</span>')}function I(){ab("Time Out Alert")}function J(){ab("Time Out Reached")}function K(a){ab("Configuration error",!0),console.log(a)}function L(b){var c="";a.each(b.data.errors,function(a,b){c+="ERROR : "+b.data.error.message+"<br/>"}),a("#status").html('<p><span class="label label-important">'+c+"</span><p></p>")}function M(a){console.log("tdplayer::onStatus"),O(a.data.status)}function N(a){console.log("tdplayer::onGeoBlocked"),O(a.data.text)}function O(b){ab(b),a("#status").html('<p><span class="label label-success">Status: '+b+"</span></p>")}function P(b){var c=cb.version.major+"."+cb.version.minor+"."+cb.version.patch+"."+cb.version.flag,d='<p><span class="label label-info">Api version: '+c+" - Technology: "+b;cb.flash.available&&(d+=" - Your current version of flash plugin is: "+cb.flash.version.major+"."+cb.flash.version.minor+"."+cb.flash.version.rev),d+="</span></p>",a("#techInfo").html(d)}function Q(){return""==a("#pwaCallsign").val()||""==a("#pwaStreamId").val()?void alert("Please enter a Callsign and a streamid"):void cb.PlayerWebAdmin.load(a("#pwaCallsign").val(),a("#pwaStreamId").val())}function R(b){ab("PlayerWebAdmin data loaded successfully"),console.log(b),a("#asyncData").html('<br><p><span class="label label-warning">PlayerWebAdmin:</span>');var c='<table class="table table-striped"><thead><tr><th>Key</th><th>Value</th></tr></thead>';for(var d in b.data.config)console.log(d),c+="<tr><td>"+d+"</td><td>"+b.data.config[d]+"</td></tr>";c+="</table></p>",a("#asyncData").html("<div>"+c+"</div>")}function S(){""!=a("#vastAdUrl").val()&&(U(),T(),cb.stop(),cb.skipAd(),cb.playAd("vastAd",{url:a("#vastAdUrl").val()}))}function T(){cb.addEventListener("ad-playback-start",r),cb.addEventListener("ad-playback-error",s),cb.addEventListener("ad-playback-complete",s),cb.addEventListener("ad-countdown",t),cb.addEventListener("vast-process-complete",u),cb.addEventListener("vpaid-ad-companions",v)}function U(){cb.removeEventListener("ad-playback-start",r),cb.removeEventListener("ad-playback-error",s),cb.removeEventListener("ad-playback-complete",s),cb.removeEventListener("ad-countdown",t),cb.removeEventListener("vast-process-complete",u),cb.removeEventListener("vpaid-ad-companions",v)}function V(a){console.log("tdplayer::onNPESong"),console.log(a),gb=a.data.song,kb=gb.artist(),kb.addEventListener("artist-complete",X);var b=$();W(b,!1)}function W(b,c){a("#asyncData").empty();var d=c?"asyncData":"npeInfo",e=a("#"+d);0==c&&e.html('<span class="label label-inverse">Npe Info:</span>'),e.append(b)}function X(){kb.addEventListener("picture-complete",Y);for(var a=kb.getPictures(),b=[],c=0;c<a.length;c++)b.push(a[c].id);b.length>0&&kb.fetchPictureByIds(b);var d=Z();W(d,!0)}function Y(b){console.log("tdplayer::onArtistPictureComplete"),console.log(b);for(var c='<span class="label label-inverse">Photos:</span><br>',d=0;d<b.length;d++)b[d].getFiles()&&(c+='<a href="'+b[d].getFiles()[0].url+'" rel="lightbox[npe]" title="Click on the right side of the image to move forward."><img src="'+b[d].getFiles()[0].url+'" width="125" /></a>&nbsp;');a("#asyncData").append(c)}function Z(){if(gb!=c){var a='<span class="label label-inverse">Artist:</span>';a+="<ul><li>Artist id: "+gb.artist().id+"</li>",a+="<li>Artist birth date: "+gb.artist().getBirthDate()+"</li>",a+="<li>Artist end date: "+gb.artist().getEndDate()+"</li>",a+="<li>Artist begin place: "+gb.artist().getBeginPlace()+"</li>",a+="<li>Artist end place: "+gb.artist().getEndPlace()+"</li>",a+="<li>Artist is group ?: "+gb.artist().getIsGroup()+"</li>",a+="<li>Artist country: "+gb.artist().getCountry()+"</li>";for(var b=gb.artist().getAlbums(),d=0;d<b.length;d++)a+="<li>Album "+(d+1)+": "+b[d].getTitle()+"</li>";for(var e=gb.artist().getSimilar(),d=0;d<e.length;d++)a+="<li>Similar artist "+(d+1)+": "+e[d].name+"</li>";for(var f=gb.artist().getMembers(),d=0;d<f.length;d++)a+="<li>Member "+(d+1)+": "+f[d].name+"</li>";a+="<li>Artist website: "+gb.artist().getWebsite()+"</li>",a+="<li>Artist twitter: "+gb.artist().getTwitterUsername()+"</li>",a+="<li>Artist facebook: "+gb.artist().getFacebookUrl()+"</li>",a+="<li>Artist biography: "+gb.artist().getBiography().substring(0,2e3)+"...</small>";for(var g=gb.artist().getGenres(),d=0;d<g.length;d++)a+="<li>Genre "+(d+1)+": "+g[d]+"</li>";return a+="</ul>"}return'<span class="label label-important">The artist information is undefined</span>'}function $(){var a="NPE Data undefined";if(gb!=c&&gb.album()){var b="";null!=gb.album().getBuyUrl()&&(b='<a target="_blank" title="'+gb.album().getBuyUrl()+'" href="'+gb.album().getBuyUrl()+'">Buy on iTunes</a><br/>'),a="<p><b>Album:</b> "+gb.album().getTitle()+"<br/>"+b+'<img src="'+gb.album().getCoverArtOriginal().url+'" style="height:100px" /></p>'}return a}function _(){for(var a,c=[],d=b.location.href.slice(b.location.href.indexOf("?")+1).split("&"),e=0;e<d.length;e++)a=d[e].split("="),c.push(a[0]),c[a[0]]=a[1];return c}function ab(b,c){c?console.error(b):console.log(b),a("#debugInformation").append(b),a("#debugInformation").append("\n")}function bb(){a("#debugInformation").html("")}var cb,db,eb,fb,gb,hb,ib=_().tech,jb=("false"==_().aSyncCuePointFallback?!1:!0,"");b.tdPlayerApiReady=function(){console.log("--- TD Player API Loaded ---"),d()};var kb}(jQuery,window);