<<<<<<< HEAD
<<<<<<< HEAD
!function(a,b,c){"use strict";function d(a,b,c){null!=a&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c))}function e(){return bowser.firefox?["Flash"]:bowser.safari?["Html5"]:bowser.chrome?["Flash"]:["Html5","Flash"]}function f(){var a=e();console.log("+++ initPlayer - techPriority = ",a);var b={coreModules:[{id:"MediaPlayer",playerId:"td_container",isDebug:!0,techPriority:a,timeShift:{active:0,max_listening_time:35},geoTargeting:{desktop:{isActive:!1},iOS:{isActive:!1},android:{isActive:!1}},plugins:[{id:"vastAd"}]},{id:"NowPlayingApi"},{id:"Npe"},{id:"PlayerWebAdmin"},{id:"SyncBanners",elements:[{id:"td_synced_bigbox",width:300,height:250}]},{id:"TargetSpot"}]};require(["tdapi/base/util/Companions"],function(a){Db=new a}),vb=new TdPlayerApi(b),vb.addEventListener?(vb.addEventListener("player-ready",C),vb.addEventListener("configuration-error",X),vb.addEventListener("module-error",Y)):vb.attachEvent&&(vb.attachEvent("player-ready",C),vb.attachEvent("configuration-error",X),vb.attachEvent("module-error",Y)),vb.loadModules()}function g(){null!=Lb&&d(Lb,ac,A),null!=Mb&&d(Mb,ac,y),null!=Vb&&d(Vb,ac,ob),null!=Rb&&d(Rb,ac,z)}function h(){null!==Hb&&(Hb.classList.add("stream__active"),Kb.classList.add(!0===Eb&&b.innerWidth<=767?"live-player__login":"live-player__muted"),Mb.classList.contains("live-player__muted")||Mb.classList.add("live-player__muted"),Mb.classList.contains("resume__live")&&Mb.classList.remove("resume__live"),!0===Eb?(Rb.style.display="none",Qb.style.display="inline-block"):(Rb.style.display="inline-block",Qb.style.display="none"),Lb.classList.contains("live-player__muted")&&Lb.classList.remove("live-player__muted"))}function i(){null!==Hb&&(Mb.classList.contains("live-player__muted")&&(Mb.classList.remove("live-player__muted"),Mb.classList.add("resume__live")),Qb.style.display="inline-block",Rb.style.display="none",Lb.classList.add("live-player__muted"))}function j(){null!==Hb&&(Kb.classList.add(!0===Eb&&b.innerWidth<=767?"live-player__login":"live-player__muted"),Qb.style.display="inline-block",Rb.style.display="none",Lb.classList.add("live-player__muted"),Mb.classList.contains("live-player__muted")&&(Mb.classList.remove("live-player__muted"),Mb.classList.add("resume__live")),Mb.classList.add("resume__audio"))}function k(){var a,b=document.querySelectorAll(".audio__time");for(a=0;a<b.length;++a)b[a].classList.add("playing");null!=Jb&&Jb.classList.add("audio__playing"),null!=Yb&&Yb.classList.add("audio__playing"),null!=Ib&&Ib.classList.add("playing"),null!=Zb&&Zb.classList.add("playing"),null!=Qb&&setTimeout(function(){Qb.innerHTML="Switch to Live Stream"},1e3)}function l(b){var c,d=b.target,e=d.parentNode,f=e.nextElementSibling,g=f.nextElementSibling,h=document.querySelectorAll(".audio__time"),i=document.querySelector(".podcast__runtime");if(a(".playing__current").removeClass("playing__current"),null!=Pb&&(Gb.classList.contains("single-show")||Gb.classList.contains("post-type-archive-podcast")||Gb.classList.contains("single-podcast")))f.classList.add("playing__current"),g.classList.add("playing");else{for(c=0;c<h.length;++c)null!=h[c]&&(h[c].classList.add("playing"),h[c].classList.add("playing__current"));i.classList.add("playing")}}function m(){var a,b=document.querySelectorAll(".audio__time"),c=document.querySelectorAll(".podcast__runtime");for(a=0;a<b.length;++a)null!=b[a]&&b[a].classList.contains("playing")&&b[a].classList.remove("playing"),null!=b[a]&&b[a].classList.contains("playing__current")&&b[a].classList.remove("playing__current");for(null!=Jb&&Jb.classList.remove("audio__playing"),null!=Yb&&Yb.classList.remove("audio__playing"),null!=Ib&&Ib.classList.remove("playing"),a=0;a<c.length;++a)null!=c[a]&&c[a].classList.contains("playing")&&c[a].classList.remove("playing");null!=Zb&&Zb.classList.remove("playing")}function n(){b.innerWidth<=767&&(""===$b.innerHTML?(Xb.classList.add("on-air__npe"),_b.classList.add("full__width")):Xb.classList.contains("on-air__npe")&&(Xb.classList.remove("on-air__npe"),_b.classList.remove("full__width")))}function o(){null!=Kb&&Kb.classList.add("play-btn--heartbeat"),null!=Ib&&Ib.classList.add("live-player--heartbeat")}function p(){null!=Kb&&Kb.classList.contains("play-btn--heartbeat")&&Kb.classList.remove("play-btn--heartbeat"),null!=Ib&&Ib.classList.contains("live-player--heartbeat")&&Ib.classList.remove("live-player--heartbeat")}function q(){is_gigya_user_logged_in()?(b.innerWidth>=768?null!=Kb&&d(Kb,ac,x):null!=Kb&&d(Kb,ac,w),null!=Qb&&d(Qb,ac,bc)):(null!=Kb&&d(Kb,"click",function(){b.location.href=Ub}),null!=Qb&&d(Qb,"click",function(){b.location.href=Ub}),null!=Sb&&b.innerWidth<=767&&d(Sb,"click",function(){b.location.href=Ub}))}function r(){is_gigya_user_logged_in()&&(i(),1==Cookies.get("gmlp_play_button_pushed")?(b.innerWidth>=768?x():w(),Cookies.set("gmlp_play_button_pushed",0)):console.log("--- Log In with Gigya ---"))}function s(){var a=document.getElementById("live-stream__container");null!=a&&a.classList.add("vast__pre-roll")}function t(){var a=document.getElementById("live-stream__container");null!=a&&a.classList.remove("vast__pre-roll"),Cookies.set("gmr_play_live_audio",c),Cookies.set("gmr_play_live_audio",1,{expires:86400})}function u(){var a=gmr.streamUrl;fb(),eb(),vb.stop(),vb.skipAd(),vb.playAd("vastAd",{url:a})}function v(){var a=document.querySelector(".vast__pre-roll");null!=a&&(a.innerHTML='<div class="adblock--detected"><div class="adblock--detected__notice">We\'ve detected that you\'re using <strong>AdBlock Plus</strong> or some other adblocking software. In order to have the best viewing experience, please diasable AdBlock.</div></div>')}function w(){var a=gmr.callsign;if(1==Cookies.get("gmr_play_live_audio")){if(""===a)return void alert("Please enter a Station");nb("playLiveStream - station="+a),Bb&&vb.stop(),!0===Eb&&bc(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)}else if(0===Cookies.get("gmr_play_live_audio")){if(""===a)return void alert("Please enter a Station");!0===Eb&&bc(),nb("playLiveStream - station="+a),s(),Wb===c?(v(),setTimeout(t,15e3)):u(),vb.addEventListener?vb.addEventListener("ad-playback-complete",function(){t(),console.log("--- ad complete ---"),Bb&&vb.stop(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)}):vb.attachEvent&&vb.attachEvent("ad-playback-complete",function(){t(),console.log("--- ad complete ---"),Bb&&vb.stop(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)})}}function x(){var a=gmr.callsign;if(qb(),!0===Eb)ic(),h();else if(Wb===c)s(),v(),setTimeout(t,15e3);else if(1!=Cookies.get("gmr_play_live_audio")){if(""===a)return void alert("Please enter a Station");nb("playLiveStream - station="+a),s(),u(),vb.addEventListener?vb.addEventListener("ad-playback-complete",function(){t(),console.log("--- ad complete ---"),Bb&&vb.stop(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)}):vb.attachEvent&&vb.attachEvent("ad-playback-complete",function(){t(),console.log("--- ad complete ---"),Bb&&vb.stop(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)})}else{if(""===a)return void alert("Please enter a Station");nb("playLiveStream - station="+a),Bb&&vb.stop(),!0===Eb&&bc(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)}}function y(){if(qb(),!0===Eb)ic(),h();else if(Wb===c)s(),v(),setTimeout(t,15e3);else{var a=gmr.callsign;if(""===a)return void alert("Please enter a Station");nb("playLiveStream - station="+a),Bb&&vb.stop(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)}}function z(){!0===Eb?lc():vb.stop(),Ib.classList.contains("live-player--active")&&Ib.classList.remove("live-player--active"),i()}function A(){!0===Eb?kc():vb.pause(),Ib.classList.contains("live-player--active")&&Ib.classList.remove("live-player--active"),j()}function B(){if(""===a("#songHistoryCallsignUser").val())return void alert("Please enter a Callsign");var b="hdConnection"==a("#songHistoryConnectionTypeSelect").val();vb.NowPlayingApi.load({mount:a("#songHistoryCallsignUser").val(),hd:b,numberToFetch:15})}function C(){vb.MediaPlayer!==c&&(r(),g(),vb.addEventListener?(vb.addEventListener("track-cue-point",N),vb.addEventListener("ad-break-cue-point",Q),vb.addEventListener("stream-track-change",O),vb.addEventListener("hls-cue-point",P),vb.addEventListener("stream-status",Z),vb.addEventListener("stream-geo-blocked",$),vb.addEventListener("timeout-alert",V),vb.addEventListener("timeout-reach",W),vb.addEventListener("npe-song",gb),vb.addEventListener("stream-select",L),vb.addEventListener("stream-start",K),vb.addEventListener("stream-stop",M)):vb.attachEvent&&(vb.attachEvent("track-cue-point",N),vb.attachEvent("ad-break-cue-point",Q),vb.attachEvent("stream-track-change",O),vb.attachEvent("hls-cue-point",P),vb.attachEvent("stream-status",Z),vb.attachEvent("stream-geo-blocked",$),vb.attachEvent("timeout-alert",V),vb.attachEvent("timeout-reach",W),vb.attachEvent("npe-song",gb),vb.attachEvent("stream-select",L),vb.attachEvent("stream-start",K),vb.attachEvent("stream-stop",M)),vb.setVolume(1),ab("Api Ready"),b.innerWidth>=768&&(o(),setTimeout(p,2e3)),bb(vb.MediaPlayer.tech.type),vb.addEventListener?(vb.addEventListener("list-loaded",S),vb.addEventListener("list-empty",T),vb.addEventListener("nowplaying-api-error",U)):vb.attachEvent&&(vb.attachEvent("list-loaded",S),vb.attachEvent("list-empty",T),vb.attachEvent("nowplaying-api-error",U)),a("#fetchSongHistoryByUserCallsignButton").click(function(){B()}),vb.addEventListener?vb.addEventListener("pwa-data-loaded",db):vb.attachEvent&&vb.attachEvent("pwa-data-loaded",db),a("#pwaButton").click(function(){cb()}))}function D(a){zb=!0,ab("Advertising... Type="+a.data.type)}function E(){zb=!1,a("#td_adserver_bigbox").empty(),a("#td_adserver_leaderboard").empty(),ab("Ready")}function F(){ab("Ready"),t();var a=gmr.callsign;Bb&&vb.stop(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)}function G(a){nb("Ad countdown : "+a.data.countDown+" second(s)")}function H(a){nb("Vast Process complete");var b=a.data.companions;J(b)}function I(a){nb("Vpaid Ad Companions"),J(a.companions)}function J(b){if(b&&b.length>0){var c=-1,d=-1;a.each(b,function(a,b){300==parseInt(b.width)&&250==parseInt(b.height)?c=a:728==parseInt(b.width)&&90==parseInt(b.height)&&(d=a)}),c>-1&&Db.loadVASTCompanionAd("td_adserver_bigbox",b[c]),d>-1&&Db.loadVASTCompanionAd("td_adserver_leaderboard",b[d])}}function K(){Bb=!0}function L(){a("#hasHQ").html(vb.MediaPlayer.hasHQ().toString()),a("#isHQ").html(vb.MediaPlayer.isHQ().toString()),a("#hasLow").html(vb.MediaPlayer.hasLow().toString()),a("#isLow").html(vb.MediaPlayer.isLow().toString())}function M(){Bb=!1,R(),a("#trackInfo").html(""),a("#asyncData").html(""),a("#hasHQ").html("N/A"),a("#isHQ").html("N/A"),a("#hasLow").html("N/A"),a("#isLow").html("N/A")}function N(b){nb("New Track cuepoint received"),nb("Title:"+b.data.cuePoint.cueTitle+" - Artist:"+b.data.cuePoint.artistName),console.log(b),Ab&&Ab!=b.data.cuePoint&&R(),b.data.cuePoint.nowplayingURL&&vb.Npe.loadNpeMetadata(b.data.cuePoint.nowplayingURL,b.data.cuePoint.artistName,b.data.cuePoint.cueTitle),Ab=b.data.cuePoint,a("#trackInfo").html('<div class="now-playing__title">'+Ab.cueTitle+'</div><div class="now-playing__artist">'+Ab.artistName+"</div>")}function O(a){nb("Stream Track has changed"),nb("Codec:"+a.data.cuePoint.audioTrack.codec()+" - Bitrate:"+a.data.cuePoint.audioTrack.bitRate())}function P(a){nb("New HLS cuepoint received"),nb("Track Id:"+a.data.cuePoint.hlsTrackId+" SegmentId:"+a.data.cuePoint.hlsSegmentId),console.log(a)}function Q(a){ab("Commercial break..."),console.log(a)}function R(){a("#npeInfo").html(""),a("#asyncData").html("")}function S(b){nb("Song History loaded"),console.log(b.data),a("#asyncData").html('<br><p><span class="label label-warning">Song History:</span>');var c,d='<table class="table table-striped"><thead><tr><th>Song title</th><th>Artist name</th><th>Time</th></tr></thead>';a.each(b.data.list,function(a,b){c=new Date(Number(b.cueTimeStart)),d+="<tr><td>"+b.cueTitle+"</td><td>"+b.artistName+"</td><td>"+c.toLocaleTimeString()+"</td></tr>"}),d+="</table></p>",a("#asyncData").html("<div>"+d+"</div>")}function T(){a("#asyncData").html('<br><p><span class="label label-important">Song History is empty</span>')}function U(b){nb("Song History loading error",!0),console.error(b),a("#asyncData").html('<br><p><span class="label label-important">Song History error</span>')}function V(){nb("Time Out Alert")}function W(){nb("Time Out Reached")}function X(a){nb("Configuration error",!0),console.log(a)}function Y(b){var c="";a.each(b.data.errors,function(a,b){c+="ERROR : "+b.data.error.message+"<br/>"}),a("#status").html('<p><span class="label label-important">'+c+"</span><p></p>")}function Z(a){console.log("tdplayer::onStatus"),ab(a.data.status)}function $(a){console.log("tdplayer::onGeoBlocked"),ab(a.data.text)}function ab(b){nb(b),a("#status").html('<p><span class="label label-success">Status: '+b+"</span></p>")}function bb(b){var c=vb.version.major+"."+vb.version.minor+"."+vb.version.patch+"."+vb.version.flag,d='<p><span class="label label-info">Api version: '+c+" - Technology: "+b;vb.flash.available&&(d+=" - Your current version of flash plugin is: "+vb.flash.version.major+"."+vb.flash.version.minor+"."+vb.flash.version.rev),d+="</span></p>",a("#techInfo").html(d)}function cb(){return""===a("#pwaCallsign").val()||""===a("#pwaStreamId").val()?void alert("Please enter a Callsign and a streamid"):void vb.PlayerWebAdmin.load(a("#pwaCallsign").val(),a("#pwaStreamId").val())}function db(b){nb("PlayerWebAdmin data loaded successfully"),console.log(b),a("#asyncData").html('<br><p><span class="label label-warning">PlayerWebAdmin:</span>');var c='<table class="table table-striped"><thead><tr><th>Key</th><th>Value</th></tr></thead>';for(var d in b.data.config)console.log(d),c+="<tr><td>"+d+"</td><td>"+b.data.config[d]+"</td></tr>";c+="</table></p>",a("#asyncData").html("<div>"+c+"</div>")}function eb(){vb.addEventListener?(vb.addEventListener("ad-playback-start",D),vb.addEventListener("ad-playback-error",F),vb.addEventListener("ad-playback-complete",E),vb.addEventListener("ad-countdown",G),vb.addEventListener("vast-process-complete",H),vb.addEventListener("vpaid-ad-companions",I)):vb.attachEvent&&(vb.attachEvent("ad-playback-start",D),vb.attachEvent("ad-playback-error",F),vb.attachEvent("ad-playback-complete",E),vb.attachEvent("ad-countdown",G),vb.attachEvent("vast-process-complete",H),vb.attachEvent("vpaid-ad-companions",I))}function fb(){vb.removeEventListener?(vb.removeEventListener("ad-playback-start",D),vb.removeEventListener("ad-playback-error",F),vb.removeEventListener("ad-playback-complete",E),vb.removeEventListener("ad-countdown",G),vb.removeEventListener("vast-process-complete",H),vb.removeEventListener("vpaid-ad-companions",I)):vb.detachEvent&&(vb.detachEvent("ad-playback-start",D),vb.detachEvent("ad-playback-error",F),vb.detachEvent("ad-playback-complete",E),vb.detachEvent("ad-countdown",G),vb.detachEvent("vast-process-complete",H),vb.detachEvent("vpaid-ad-companions",I))}function gb(a){console.log("tdplayer::onNPESong"),console.log(a),Cb=a.data.song,dc=Cb.artist(),dc.addEventListener?dc.addEventListener("artist-complete",ib):dc.attachEvent&&dc.attachEvent("artist-complete",ib);var b=lb();hb(b,!1)}function hb(b,c){a("#asyncData").empty();var d=c?"asyncData":"npeInfo",e=a("#"+d);c===!1&&e.html('<span class="label label-inverse">Npe Info:</span>'),e.append(b)}function ib(){dc.addEventListener?dc.addEventListener("picture-complete",jb):dc.attachEvent&&dc.attachEvent("picture-complete",jb);for(var a=dc.getPictures(),b=[],c=0;c<a.length;c++)b.push(a[c].id);b.length>0&&dc.fetchPictureByIds(b);var d=kb();hb(d,!0)}function jb(b){console.log("tdplayer::onArtistPictureComplete"),console.log(b);for(var c='<span class="label label-inverse">Photos:</span><br>',d=0;d<b.length;d++)b[d].getFiles()&&(c+='<a href="'+b[d].getFiles()[0].url+'" rel="lightbox[npe]" title="Click on the right side of the image to move forward."><img src="'+b[d].getFiles()[0].url+'" width="125" /></a>&nbsp;');a("#asyncData").append(c)}function kb(){if(Cb!==c){var a='<span class="label label-inverse">Artist:</span>';a+="<ul><li>Artist id: "+Cb.artist().id+"</li>",a+="<li>Artist birth date: "+Cb.artist().getBirthDate()+"</li>",a+="<li>Artist end date: "+Cb.artist().getEndDate()+"</li>",a+="<li>Artist begin place: "+Cb.artist().getBeginPlace()+"</li>",a+="<li>Artist end place: "+Cb.artist().getEndPlace()+"</li>",a+="<li>Artist is group ?: "+Cb.artist().getIsGroup()+"</li>",a+="<li>Artist country: "+Cb.artist().getCountry()+"</li>";for(var b=Cb.artist().getAlbums(),d=0;d<b.length;d++)a+="<li>Album "+(d+1)+": "+b[d].getTitle()+"</li>";var e=Cb.artist().getSimilar();for(d<e.length;d++;)a+="<li>Similar artist "+(d+1)+": "+e[d].name+"</li>";var f=Cb.artist().getMembers();for(d<f.length;d++;)a+="<li>Member "+(d+1)+": "+f[d].name+"</li>";a+="<li>Artist website: "+Cb.artist().getWebsite()+"</li>",a+="<li>Artist twitter: "+Cb.artist().getTwitterUsername()+"</li>",a+="<li>Artist facebook: "+Cb.artist().getFacebookUrl()+"</li>",a+="<li>Artist biography: "+Cb.artist().getBiography().substring(0,2e3)+"...</small>";var g=Cb.artist().getGenres();for(d<g.length;d++;)a+="<li>Genre "+(d+1)+": "+g[d]+"</li>";return a+="</ul>"}return'<span class="label label-important">The artist information is undefined</span>'}function lb(){var a="NPE Data undefined";if(Cb!==c&&Cb.album()){var b="";null!=Cb.album().getBuyUrl()&&(b='<a target="_blank" title="'+Cb.album().getBuyUrl()+'" href="'+Cb.album().getBuyUrl()+'">Buy on iTunes</a><br/>'),a="<p><b>Album:</b> "+Cb.album().getTitle()+"<br/>"+b+'<img src="'+Cb.album().getCoverArtOriginal().url+'" style="height:100px" /></p>'}return a}function mb(){for(var a,c=[],d=b.location.href.slice(b.location.href.indexOf("?")+1).split("&"),e=0;e<d.length;e++)a=d[e].split("="),c.push(a[0]),c[a[0]]=a[1];return c}function nb(b,c){c?console.error(b):console.log(b),a("#debugInformation").append(b),a("#debugInformation").append("\n")}function ob(){a("#debugInformation").html("")}function pb(){if("undefined"!=typeof Modernizr&&Modernizr.audio){var b=document.querySelectorAll(".content"),c=a(b);c.on("click",".podcast__btn--play",function(b){var c=a(b.currentTarget);l(b),jc(c.attr("data-mp3-src")),fc(),oc(c.attr("data-mp3-title"),c.attr("data-mp3-artist"),c.attr("data-mp3-hash"))}),c.on("click",".podcast__btn--pause",kc)}else{var d=a(".gmr-mediaelement-fallback audio"),e=a(".podcast__play");d.mediaelementplayer(),e.hide()}}function qb(){is_gigya_user_logged_in()?a.support.pjax&&a(document).pjax("a:not(.ab-item)",".main",{fragment:".main",maxCacheLength:500,timeout:5e3}):gmlp.logged_in&&a.support.pjax&&a(document).pjax("a:not(.ab-item)",".page-wrap",{fragment:".page-wrap",maxCacheLength:500,timeout:5e3})}function rb(){a(document).on("pjax:click",function(a){a.preventDefault()})}function sb(){var a,b=document.querySelectorAll(".audio__progress"),c=0;for(a=0;a<b.length;++a)Fb.currentTime>0&&(c=Math.floor(100/Fb.duration*Fb.currentTime)),b[a].style.width=c+"%"}function tb(){var a,b,c,d=document.querySelectorAll(".audio__time--remaining"),e=parseInt(Fb.duration),f=parseInt(Fb.currentTime),g=e-f;for(a=0;a<d.length;++a)b=g%60,b=isNaN(b)?"00":10>b?"0"+b:b,c=Math.floor(g/60)%60,isNaN(c)&&(c="0"),d[a].innerHTML=c+":"+b}function ub(){var a,b=document.querySelectorAll(".audio__time--elapsed"),c=parseInt(Fb.currentTime%60),d=parseInt(Fb.currentTime/60%60);for(a=0;a<b.length;++a)b[a].innerHTML=10>c?d+":0"+c:d+":"+c}var vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb=(mb().tech||"html5_flash","false"==mb().aSyncCuePointFallback?!1:!0,!1),Fb=!1,Gb=document.querySelector("body"),Hb=document.getElementById("td_container"),Ib=document.getElementById("live-player"),Jb=document.querySelector(".live-stream__player"),Kb=document.getElementById("playButton"),Lb=document.getElementById("pauseButton"),Mb=document.getElementById("resumeButton"),Nb=document.querySelector(".podcast__btn--play"),Ob=document.querySelector(".podcast__btn--pause"),Pb=document.querySelector(".podcast-player"),Qb=(document.querySelector(".podcast__btn--play.playing"),document.getElementById("live-stream__listen-now")),Rb=document.getElementById("live-stream__now-playing"),Sb=document.getElementById("live-stream__login"),Tb=a(document.getElementById("trackInfo")),Ub=gigya_profile_path("login"),Vb=document.getElementById("clearDebug"),Wb=document.getElementById("ad-check"),Xb=(document.getElementById("close-adblock"),document.getElementById("on-air")),Yb=(document.querySelector(".on-air__title"),document.querySelector(".on-air__show"),document.getElementById("live-stream__status")),Zb=document.getElementById("nowPlaying"),$b=document.getElementById("trackInfo"),_b=document.querySelector(".live-player__stream"),ac="click";b.tdPlayerApiReady=function(){console.log("--- TD Player API Loaded ---"),f()};var bc=function(){var a=Qb.textContent,c=document.getElementById("trackInfo"),d=document.getElementById("npeInfo");!0===Eb&&(Fb.pause(),c.innerHTML="",d.innerHTML="",fc(),m(),Eb=!1),"Switch to Live Stream"===a&&(Qb.innerHTML="Listen Live"),b.innerWidth>=768&&x()};q();var cc=a(".live-player__stream--current-name");cc.bind("DOMSubtreeModified",function(){console.log("--- new stream select ---");var a=cc.text();Bb&&vb.stop(),!0===Eb&&bc(),vb.play({station:a,timeShift:!0}),Ib.classList.add("live-player--active"),h(),setTimeout(n,2e3)});var dc,ec=function(){"undefined"!=typeof vb&&"undefined"!=typeof vb.stop&&vb.stop()},fc=function(){a(".podcast__btn--play.playing").removeClass("playing"),a(".podcast__btn--pause.playing").removeClass("playing")},gc=function(){var b=".mp3-"+yb;a(b+" .podcast__btn--play").addClass("playing"),a(b+" .podcast__btn--pause").addClass("playing")},hc=function(a){Fb.src=a},ic=function(){Eb=!0,ec(),Fb.play(),mc(),nc(),fc(),h(),gc(),k()},jc=function(a){qb(),a!==Fb.src&&hc(a),ic()},kc=function(){rb(),Fb.pause(),fc(),j()},lc=function(){rb(),Fb.pause(),fc(),Eb=!1,i(),m()},mc=function(){var b=_.template('<div class="now-playing__title"><%- title %></div>'),c=a(".now-playing__title"),d='<div class="audio__title">',e='</div><div class="audio__time"><span class="audio__time--inline">(</span><div class="audio__time--elapsed"></div><span class="audio__time--inline"> / </span><div class="audio__time--remaining"></div><span class="audio__time--inline">)</span></div>';c.length>0?c.html(d+xb+e):Tb.prepend(b({title:xb}))},nc=function(){var b=_.template('<div class="now-playing__artist"><%- artist %></div>'),c=a(".now-playing__artist");c.length>0?c.text(wb):Tb.append(b({artist:wb}))},oc=function(a,b,c){xb=a,wb=b,yb=c,mc(),nc(),gc()},pc=function(){"undefined"!=typeof Modernizr&&Modernizr.audio&&(Fb=new Audio,Fb.addEventListener?Fb.addEventListener("ended",function(){fc(),j()}):Fb.attachEvent&&Fb.attachEvent("ended",function(){fc(),j()}))};pc(),pb(),Fb.addEventListener("timeupdate",function(){sb(),ub(),tb()},!1),d(Nb,ac,k),d(Ob,ac,kc),a(document).on("pjax:end",function(){pb(),gc(),d(Nb,ac,k),d(Ob,ac,kc)})}(jQuery,window);
=======
!function(a,b,c){"use strict";function d(a,b,c){null!=a&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c))}function e(){return bowser.firefox?["Flash"]:bowser.safari?["Html5"]:bowser.chrome?["Flash"]:["Html5","Flash"]}function f(){var a=e();console.log("+++ initPlayer - techPriority = ",a);var b={coreModules:[{id:"MediaPlayer",playerId:"td_container",isDebug:!0,techPriority:a,timeShift:{active:0,max_listening_time:35},geoTargeting:{desktop:{isActive:!1},iOS:{isActive:!1},android:{isActive:!1}},plugins:[{id:"vastAd"}]},{id:"NowPlayingApi"},{id:"Npe"},{id:"PlayerWebAdmin"},{id:"SyncBanners",elements:[{id:"td_synced_bigbox",width:300,height:250}]},{id:"TargetSpot"}]};require(["tdapi/base/util/Companions"],function(a){Db=new a}),vb=new TdPlayerApi(b),vb.addEventListener?(vb.addEventListener("player-ready",C),vb.addEventListener("configuration-error",X),vb.addEventListener("module-error",Y)):vb.attachEvent&&(vb.attachEvent("player-ready",C),vb.attachEvent("configuration-error",X),vb.attachEvent("module-error",Y)),vb.loadModules()}function g(){null!=Lb&&d(Lb,ac,A),null!=Mb&&d(Mb,ac,y),null!=Vb&&d(Vb,ac,ob),null!=Rb&&d(Rb,ac,z)}function h(){null!==Hb&&(Hb.classList.add("stream__active"),Kb.classList.add(!0===Eb&&b.innerWidth<=767?"live-player__login":"live-player__muted"),Mb.classList.contains("live-player__muted")||Mb.classList.add("live-player__muted"),Mb.classList.contains("resume__live")&&Mb.classList.remove("resume__live"),!0===Eb?(Rb.style.display="none",Qb.style.display="inline-block"):(Rb.style.display="inline-block",Qb.style.display="none"),Lb.classList.contains("live-player__muted")&&Lb.classList.remove("live-player__muted"))}function i(){null!==Hb&&(Mb.classList.contains("live-player__muted")&&(Mb.classList.remove("live-player__muted"),Mb.classList.add("resume__live")),Qb.style.display="inline-block",Rb.style.display="none",Lb.classList.add("live-player__muted"))}function j(){null!==Hb&&(Kb.classList.add(!0===Eb&&b.innerWidth<=767?"live-player__login":"live-player__muted"),Qb.style.display="inline-block",Rb.style.display="none",Lb.classList.add("live-player__muted"),Mb.classList.contains("live-player__muted")&&(Mb.classList.remove("live-player__muted"),Mb.classList.add("resume__live")),Mb.classList.add("resume__audio"))}function k(){var a,b=document.querySelectorAll(".audio__time");for(a=0;a<b.length;++a)b[a].classList.add("playing");null!=Jb&&Jb.classList.add("audio__playing"),null!=Yb&&Yb.classList.add("audio__playing"),null!=Ib&&Ib.classList.add("playing"),null!=Zb&&Zb.classList.add("playing"),null!=Qb&&setTimeout(function(){Qb.innerHTML="Switch to Live Stream"},1e3)}function l(b){var c,d=b.target,e=d.parentNode,f=e.nextElementSibling,g=f.nextElementSibling,h=document.querySelectorAll(".audio__time"),i=document.querySelector(".podcast__runtime");if(a(".playing__current").removeClass("playing__current"),null!=Pb&&(Gb.classList.contains("single-show")||Gb.classList.contains("post-type-archive-podcast")||Gb.classList.contains("single-podcast")))f.classList.add("playing__current"),g.classList.add("playing");else{for(c=0;c<h.length;++c)null!=h[c]&&(h[c].classList.add("playing"),h[c].classList.add("playing__current"));i.classList.add("playing")}}function m(){var a,b=document.querySelectorAll(".audio__time"),c=document.querySelectorAll(".podcast__runtime");for(a=0;a<b.length;++a)null!=b[a]&&b[a].classList.contains("playing")&&b[a].classList.remove("playing"),null!=b[a]&&b[a].classList.contains("playing__current")&&b[a].classList.remove("playing__current");for(null!=Jb&&Jb.classList.remove("audio__playing"),null!=Yb&&Yb.classList.remove("audio__playing"),null!=Ib&&Ib.classList.remove("playing"),a=0;a<c.length;++a)null!=c[a]&&c[a].classList.contains("playing")&&c[a].classList.remove("playing");null!=Zb&&Zb.classList.remove("playing")}function n(){b.innerWidth<=767&&(""===$b.innerHTML?(Xb.classList.add("on-air__npe"),_b.classList.add("full__width")):Xb.classList.contains("on-air__npe")&&(Xb.classList.remove("on-air__npe"),_b.classList.remove("full__width")))}function o(){null!=Kb&&Kb.classList.add("play-btn--heartbeat"),null!=Ib&&Ib.classList.add("live-player--heartbeat"),console.log("--- Heartbeat Class Added ---")}function p(){null!=Kb&&Kb.classList.contains("play-btn--heartbeat")&&Kb.classList.remove("play-btn--heartbeat"),null!=Ib&&Ib.classList.contains("live-player--heartbeat")&&Ib.classList.remove("live-player--heartbeat"),console.log("--- Heartbeat Class Removed ---")}function q(){is_gigya_user_logged_in()?(b.innerWidth>=768?null!=Kb&&d(Kb,ac,x):null!=Kb&&d(Kb,ac,w),null!=Qb&&d(Qb,ac,bc)):(null!=Kb&&d(Kb,"click",function(){b.location.href=Ub}),null!=Qb&&d(Qb,"click",function(){b.location.href=Ub}),null!=Sb&&b.innerWidth<=767&&d(Sb,"click",function(){b.location.href=Ub}))}function r(){is_gigya_user_logged_in()&&(i(),1==Cookies.get("gmlp_play_button_pushed")?(b.innerWidth>=768?x():w(),Cookies.set("gmlp_play_button_pushed",0)):console.log("--- Log In with Gigya ---"))}function s(){var a=document.getElementById("live-stream__container");null!=a&&a.classList.add("vast__pre-roll")}function t(){var a=document.getElementById("live-stream__container");null!=a&&a.classList.remove("vast__pre-roll"),Cookies.set("gmr_play_live_audio",c),Cookies.set("gmr_play_live_audio",1,{expires:86400})}function u(){var a=gmr.streamUrl;fb(),eb(),vb.stop(),vb.skipAd(),vb.playAd("vastAd",{url:a})}function v(){var a=document.querySelector(".vast__pre-roll");null!=a&&(a.innerHTML='<div class="adblock--detected"><div class="adblock--detected__notice">We\'ve detected that you\'re using <strong>AdBlock Plus</strong> or some other adblocking software. In order to have the best viewing experience, please diasable AdBlock.</div></div>')}function w(){var a=gmr.callsign;if(1==Cookies.get("gmr_play_live_audio")){if(""===a)return void alert("Please enter a Station");nb("playLiveStream - station="+a),Bb&&vb.stop(),!0===Eb&&bc(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)}else if(0===Cookies.get("gmr_play_live_audio")){if(""===a)return void alert("Please enter a Station");!0===Eb&&bc(),nb("playLiveStream - station="+a),s(),Wb===c?(v(),setTimeout(t,15e3)):u(),vb.addEventListener?vb.addEventListener("ad-playback-complete",function(){t(),console.log("--- ad complete ---"),Bb&&vb.stop(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)}):vb.attachEvent&&vb.attachEvent("ad-playback-complete",function(){t(),console.log("--- ad complete ---"),Bb&&vb.stop(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)})}}function x(){var a=gmr.callsign;if(qb(),!0===Eb)ic(),h();else if(Wb===c)s(),v(),setTimeout(t,15e3);else if(1!=Cookies.get("gmr_play_live_audio")){if(""===a)return void alert("Please enter a Station");nb("playLiveStream - station="+a),s(),u(),vb.addEventListener?vb.addEventListener("ad-playback-complete",function(){t(),console.log("--- ad complete ---"),Bb&&vb.stop(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)}):vb.attachEvent&&vb.attachEvent("ad-playback-complete",function(){t(),console.log("--- ad complete ---"),Bb&&vb.stop(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)})}else{if(""===a)return void alert("Please enter a Station");nb("playLiveStream - station="+a),Bb&&vb.stop(),!0===Eb&&bc(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)}}function y(){if(qb(),!0===Eb)ic(),h();else if(Wb===c)s(),v(),setTimeout(t,15e3);else{var a=gmr.callsign;if(""===a)return void alert("Please enter a Station");nb("playLiveStream - station="+a),Bb&&vb.stop(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)}}function z(){!0===Eb?lc():vb.stop(),Ib.classList.contains("live-player--active")&&Ib.classList.remove("live-player--active"),i()}function A(){!0===Eb?kc():vb.pause(),Ib.classList.contains("live-player--active")&&Ib.classList.remove("live-player--active"),j()}function B(){if(""===a("#songHistoryCallsignUser").val())return void alert("Please enter a Callsign");var b="hdConnection"==a("#songHistoryConnectionTypeSelect").val();vb.NowPlayingApi.load({mount:a("#songHistoryCallsignUser").val(),hd:b,numberToFetch:15})}function C(){vb.MediaPlayer!==c&&(r(),g(),vb.addEventListener?(vb.addEventListener("track-cue-point",N),vb.addEventListener("ad-break-cue-point",Q),vb.addEventListener("stream-track-change",O),vb.addEventListener("hls-cue-point",P),vb.addEventListener("stream-status",Z),vb.addEventListener("stream-geo-blocked",$),vb.addEventListener("timeout-alert",V),vb.addEventListener("timeout-reach",W),vb.addEventListener("npe-song",gb),vb.addEventListener("stream-select",L),vb.addEventListener("stream-start",K),vb.addEventListener("stream-stop",M)):vb.attachEvent&&(vb.attachEvent("track-cue-point",N),vb.attachEvent("ad-break-cue-point",Q),vb.attachEvent("stream-track-change",O),vb.attachEvent("hls-cue-point",P),vb.attachEvent("stream-status",Z),vb.attachEvent("stream-geo-blocked",$),vb.attachEvent("timeout-alert",V),vb.attachEvent("timeout-reach",W),vb.attachEvent("npe-song",gb),vb.attachEvent("stream-select",L),vb.attachEvent("stream-start",K),vb.attachEvent("stream-stop",M)),vb.setVolume(1),ab("Api Ready"),b.innerWidth>=768&&(o(),setTimeout(p,2e3)),bb(vb.MediaPlayer.tech.type),vb.addEventListener?(vb.addEventListener("list-loaded",S),vb.addEventListener("list-empty",T),vb.addEventListener("nowplaying-api-error",U)):vb.attachEvent&&(vb.attachEvent("list-loaded",S),vb.attachEvent("list-empty",T),vb.attachEvent("nowplaying-api-error",U)),a("#fetchSongHistoryByUserCallsignButton").click(function(){B()}),vb.addEventListener?vb.addEventListener("pwa-data-loaded",db):vb.attachEvent&&vb.attachEvent("pwa-data-loaded",db),a("#pwaButton").click(function(){cb()}))}function D(a){zb=!0,ab("Advertising... Type="+a.data.type)}function E(){zb=!1,a("#td_adserver_bigbox").empty(),a("#td_adserver_leaderboard").empty(),ab("Ready")}function F(){ab("Ready"),t();var a=gmr.callsign;Bb&&vb.stop(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)}function G(a){nb("Ad countdown : "+a.data.countDown+" second(s)")}function H(a){nb("Vast Process complete");var b=a.data.companions;J(b)}function I(a){nb("Vpaid Ad Companions"),J(a.companions)}function J(b){if(b&&b.length>0){var c=-1,d=-1;a.each(b,function(a,b){300==parseInt(b.width)&&250==parseInt(b.height)?c=a:728==parseInt(b.width)&&90==parseInt(b.height)&&(d=a)}),c>-1&&Db.loadVASTCompanionAd("td_adserver_bigbox",b[c]),d>-1&&Db.loadVASTCompanionAd("td_adserver_leaderboard",b[d])}}function K(){Bb=!0}function L(){a("#hasHQ").html(vb.MediaPlayer.hasHQ().toString()),a("#isHQ").html(vb.MediaPlayer.isHQ().toString()),a("#hasLow").html(vb.MediaPlayer.hasLow().toString()),a("#isLow").html(vb.MediaPlayer.isLow().toString())}function M(){Bb=!1,R(),a("#trackInfo").html(""),a("#asyncData").html(""),a("#hasHQ").html("N/A"),a("#isHQ").html("N/A"),a("#hasLow").html("N/A"),a("#isLow").html("N/A")}function N(b){nb("New Track cuepoint received"),nb("Title:"+b.data.cuePoint.cueTitle+" - Artist:"+b.data.cuePoint.artistName),console.log(b),Ab&&Ab!=b.data.cuePoint&&R(),b.data.cuePoint.nowplayingURL&&vb.Npe.loadNpeMetadata(b.data.cuePoint.nowplayingURL,b.data.cuePoint.artistName,b.data.cuePoint.cueTitle),Ab=b.data.cuePoint,a("#trackInfo").html('<div class="now-playing__title">'+Ab.cueTitle+'</div><div class="now-playing__artist">'+Ab.artistName+"</div>")}function O(a){nb("Stream Track has changed"),nb("Codec:"+a.data.cuePoint.audioTrack.codec()+" - Bitrate:"+a.data.cuePoint.audioTrack.bitRate())}function P(a){nb("New HLS cuepoint received"),nb("Track Id:"+a.data.cuePoint.hlsTrackId+" SegmentId:"+a.data.cuePoint.hlsSegmentId),console.log(a)}function Q(a){ab("Commercial break..."),console.log(a)}function R(){a("#npeInfo").html(""),a("#asyncData").html("")}function S(b){nb("Song History loaded"),console.log(b.data),a("#asyncData").html('<br><p><span class="label label-warning">Song History:</span>');var c,d='<table class="table table-striped"><thead><tr><th>Song title</th><th>Artist name</th><th>Time</th></tr></thead>';a.each(b.data.list,function(a,b){c=new Date(Number(b.cueTimeStart)),d+="<tr><td>"+b.cueTitle+"</td><td>"+b.artistName+"</td><td>"+c.toLocaleTimeString()+"</td></tr>"}),d+="</table></p>",a("#asyncData").html("<div>"+d+"</div>")}function T(){a("#asyncData").html('<br><p><span class="label label-important">Song History is empty</span>')}function U(b){nb("Song History loading error",!0),console.error(b),a("#asyncData").html('<br><p><span class="label label-important">Song History error</span>')}function V(){nb("Time Out Alert")}function W(){nb("Time Out Reached")}function X(a){nb("Configuration error",!0),console.log(a)}function Y(b){var c="";a.each(b.data.errors,function(a,b){c+="ERROR : "+b.data.error.message+"<br/>"}),a("#status").html('<p><span class="label label-important">'+c+"</span><p></p>")}function Z(a){console.log("tdplayer::onStatus"),ab(a.data.status)}function $(a){console.log("tdplayer::onGeoBlocked"),ab(a.data.text)}function ab(b){nb(b),a("#status").html('<p><span class="label label-success">Status: '+b+"</span></p>")}function bb(b){var c=vb.version.major+"."+vb.version.minor+"."+vb.version.patch+"."+vb.version.flag,d='<p><span class="label label-info">Api version: '+c+" - Technology: "+b;vb.flash.available&&(d+=" - Your current version of flash plugin is: "+vb.flash.version.major+"."+vb.flash.version.minor+"."+vb.flash.version.rev),d+="</span></p>",a("#techInfo").html(d)}function cb(){return""===a("#pwaCallsign").val()||""===a("#pwaStreamId").val()?void alert("Please enter a Callsign and a streamid"):void vb.PlayerWebAdmin.load(a("#pwaCallsign").val(),a("#pwaStreamId").val())}function db(b){nb("PlayerWebAdmin data loaded successfully"),console.log(b),a("#asyncData").html('<br><p><span class="label label-warning">PlayerWebAdmin:</span>');var c='<table class="table table-striped"><thead><tr><th>Key</th><th>Value</th></tr></thead>';for(var d in b.data.config)console.log(d),c+="<tr><td>"+d+"</td><td>"+b.data.config[d]+"</td></tr>";c+="</table></p>",a("#asyncData").html("<div>"+c+"</div>")}function eb(){vb.addEventListener?(vb.addEventListener("ad-playback-start",D),vb.addEventListener("ad-playback-error",F),vb.addEventListener("ad-playback-complete",E),vb.addEventListener("ad-countdown",G),vb.addEventListener("vast-process-complete",H),vb.addEventListener("vpaid-ad-companions",I)):vb.attachEvent&&(vb.attachEvent("ad-playback-start",D),vb.attachEvent("ad-playback-error",F),vb.attachEvent("ad-playback-complete",E),vb.attachEvent("ad-countdown",G),vb.attachEvent("vast-process-complete",H),vb.attachEvent("vpaid-ad-companions",I))}function fb(){vb.removeEventListener?(vb.removeEventListener("ad-playback-start",D),vb.removeEventListener("ad-playback-error",F),vb.removeEventListener("ad-playback-complete",E),vb.removeEventListener("ad-countdown",G),vb.removeEventListener("vast-process-complete",H),vb.removeEventListener("vpaid-ad-companions",I)):vb.detachEvent&&(vb.detachEvent("ad-playback-start",D),vb.detachEvent("ad-playback-error",F),vb.detachEvent("ad-playback-complete",E),vb.detachEvent("ad-countdown",G),vb.detachEvent("vast-process-complete",H),vb.detachEvent("vpaid-ad-companions",I))}function gb(a){console.log("tdplayer::onNPESong"),console.log(a),Cb=a.data.song,dc=Cb.artist(),dc.addEventListener?dc.addEventListener("artist-complete",ib):dc.attachEvent&&dc.attachEvent("artist-complete",ib);var b=lb();hb(b,!1)}function hb(b,c){a("#asyncData").empty();var d=c?"asyncData":"npeInfo",e=a("#"+d);c===!1&&e.html('<span class="label label-inverse">Npe Info:</span>'),e.append(b)}function ib(){dc.addEventListener?dc.addEventListener("picture-complete",jb):dc.attachEvent&&dc.attachEvent("picture-complete",jb);for(var a=dc.getPictures(),b=[],c=0;c<a.length;c++)b.push(a[c].id);b.length>0&&dc.fetchPictureByIds(b);var d=kb();hb(d,!0)}function jb(b){console.log("tdplayer::onArtistPictureComplete"),console.log(b);for(var c='<span class="label label-inverse">Photos:</span><br>',d=0;d<b.length;d++)b[d].getFiles()&&(c+='<a href="'+b[d].getFiles()[0].url+'" rel="lightbox[npe]" title="Click on the right side of the image to move forward."><img src="'+b[d].getFiles()[0].url+'" width="125" /></a>&nbsp;');a("#asyncData").append(c)}function kb(){if(Cb!==c){var a='<span class="label label-inverse">Artist:</span>';a+="<ul><li>Artist id: "+Cb.artist().id+"</li>",a+="<li>Artist birth date: "+Cb.artist().getBirthDate()+"</li>",a+="<li>Artist end date: "+Cb.artist().getEndDate()+"</li>",a+="<li>Artist begin place: "+Cb.artist().getBeginPlace()+"</li>",a+="<li>Artist end place: "+Cb.artist().getEndPlace()+"</li>",a+="<li>Artist is group ?: "+Cb.artist().getIsGroup()+"</li>",a+="<li>Artist country: "+Cb.artist().getCountry()+"</li>";for(var b=Cb.artist().getAlbums(),d=0;d<b.length;d++)a+="<li>Album "+(d+1)+": "+b[d].getTitle()+"</li>";var e=Cb.artist().getSimilar();for(d<e.length;d++;)a+="<li>Similar artist "+(d+1)+": "+e[d].name+"</li>";var f=Cb.artist().getMembers();for(d<f.length;d++;)a+="<li>Member "+(d+1)+": "+f[d].name+"</li>";a+="<li>Artist website: "+Cb.artist().getWebsite()+"</li>",a+="<li>Artist twitter: "+Cb.artist().getTwitterUsername()+"</li>",a+="<li>Artist facebook: "+Cb.artist().getFacebookUrl()+"</li>",a+="<li>Artist biography: "+Cb.artist().getBiography().substring(0,2e3)+"...</small>";var g=Cb.artist().getGenres();for(d<g.length;d++;)a+="<li>Genre "+(d+1)+": "+g[d]+"</li>";return a+="</ul>"}return'<span class="label label-important">The artist information is undefined</span>'}function lb(){var a="NPE Data undefined";if(Cb!==c&&Cb.album()){var b="";null!=Cb.album().getBuyUrl()&&(b='<a target="_blank" title="'+Cb.album().getBuyUrl()+'" href="'+Cb.album().getBuyUrl()+'">Buy on iTunes</a><br/>'),a="<p><b>Album:</b> "+Cb.album().getTitle()+"<br/>"+b+'<img src="'+Cb.album().getCoverArtOriginal().url+'" style="height:100px" /></p>'}return a}function mb(){for(var a,c=[],d=b.location.href.slice(b.location.href.indexOf("?")+1).split("&"),e=0;e<d.length;e++)a=d[e].split("="),c.push(a[0]),c[a[0]]=a[1];return c}function nb(b,c){c?console.error(b):console.log(b),a("#debugInformation").append(b),a("#debugInformation").append("\n")}function ob(){a("#debugInformation").html("")}function pb(){if("undefined"!=typeof Modernizr&&Modernizr.audio){var b=document.querySelectorAll(".content"),c=a(b);c.on("click",".podcast__btn--play",function(b){var c=a(b.currentTarget);l(b),jc(c.attr("data-mp3-src")),fc(),oc(c.attr("data-mp3-title"),c.attr("data-mp3-artist"),c.attr("data-mp3-hash"))}),c.on("click",".podcast__btn--pause",kc)}else{var d=a(".gmr-mediaelement-fallback audio"),e=a(".podcast__play");d.mediaelementplayer(),e.hide()}}function qb(){is_gigya_user_logged_in()?a.support.pjax&&a(document).pjax("a:not(.ab-item)",".main",{fragment:".main",maxCacheLength:500,timeout:5e3}):gmlp.logged_in&&a.support.pjax&&a(document).pjax("a:not(.ab-item)",".page-wrap",{fragment:".page-wrap",maxCacheLength:500,timeout:5e3})}function rb(){a(document).on("pjax:click",function(a){a.preventDefault()})}function sb(){var a,b=document.querySelectorAll(".audio__progress"),c=0;for(a=0;a<b.length;++a)Fb.currentTime>0&&(c=Math.floor(100/Fb.duration*Fb.currentTime)),b[a].style.width=c+"%"}function tb(){var a,b,c,d=document.querySelectorAll(".audio__time--remaining"),e=parseInt(Fb.duration),f=parseInt(Fb.currentTime),g=e-f;for(a=0;a<d.length;++a)b=g%60,b=isNaN(b)?"00":10>b?"0"+b:b,c=Math.floor(g/60)%60,isNaN(c)&&(c="0"),d[a].innerHTML=c+":"+b}function ub(){var a,b=document.querySelectorAll(".audio__time--elapsed"),c=parseInt(Fb.currentTime%60),d=parseInt(Fb.currentTime/60%60);for(a=0;a<b.length;++a)b[a].innerHTML=10>c?d+":0"+c:d+":"+c}var vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb=(mb().tech||"html5_flash","false"==mb().aSyncCuePointFallback?!1:!0,!1),Fb=!1,Gb=document.querySelector("body"),Hb=document.getElementById("td_container"),Ib=document.getElementById("live-player"),Jb=document.querySelector(".live-stream__player"),Kb=document.getElementById("playButton"),Lb=document.getElementById("pauseButton"),Mb=document.getElementById("resumeButton"),Nb=document.querySelector(".podcast__btn--play"),Ob=document.querySelector(".podcast__btn--pause"),Pb=document.querySelector(".podcast-player"),Qb=(document.querySelector(".podcast__btn--play.playing"),document.getElementById("live-stream__listen-now")),Rb=document.getElementById("live-stream__now-playing"),Sb=document.getElementById("live-stream__login"),Tb=a(document.getElementById("trackInfo")),Ub=gmr.homeUrl+"members/login",Vb=document.getElementById("clearDebug"),Wb=document.getElementById("ad-check"),Xb=(document.getElementById("close-adblock"),document.getElementById("on-air")),Yb=(document.querySelector(".on-air__title"),document.querySelector(".on-air__show"),document.getElementById("live-stream__status")),Zb=document.getElementById("nowPlaying"),$b=document.getElementById("trackInfo"),_b=document.querySelector(".live-player__stream"),ac="click";b.tdPlayerApiReady=function(){console.log("--- TD Player API Loaded ---"),f()};var bc=function(){var a=Qb.textContent,c=document.getElementById("trackInfo"),d=document.getElementById("npeInfo");!0===Eb&&(Fb.pause(),c.innerHTML="",d.innerHTML="",fc(),m(),Eb=!1),"Switch to Live Stream"===a&&(Qb.innerHTML="Listen Live"),b.innerWidth>=768&&x()};q();var cc=a(".live-player__stream--current-name");cc.bind("DOMSubtreeModified",function(){console.log("--- new stream select ---");var a=cc.text();Bb&&vb.stop(),!0===Eb&&bc(),vb.play({station:a,timeShift:!0}),Ib.classList.add("live-player--active"),h(),setTimeout(n,2e3)});var dc,ec=function(){"undefined"!=typeof vb&&"undefined"!=typeof vb.stop&&vb.stop()},fc=function(){a(".podcast__btn--play.playing").removeClass("playing"),a(".podcast__btn--pause.playing").removeClass("playing")},gc=function(){var b=".mp3-"+yb;a(b+" .podcast__btn--play").addClass("playing"),a(b+" .podcast__btn--pause").addClass("playing")},hc=function(a){Fb.src=a},ic=function(){Eb=!0,ec(),Fb.play(),mc(),nc(),fc(),h(),gc(),k()},jc=function(a){qb(),a!==Fb.src&&hc(a),ic()},kc=function(){rb(),Fb.pause(),fc(),j()},lc=function(){rb(),Fb.pause(),fc(),Eb=!1,i(),m()},mc=function(){var b=_.template('<div class="now-playing__title"><%- title %></div>'),c=a(".now-playing__title"),d='<div class="audio__title">',e='</div><div class="audio__time"><span class="audio__time--inline">(</span><div class="audio__time--elapsed"></div><span class="audio__time--inline"> / </span><div class="audio__time--remaining"></div><span class="audio__time--inline">)</span></div>';c.length>0?c.html(d+xb+e):Tb.prepend(b({title:xb}))},nc=function(){var b=_.template('<div class="now-playing__artist"><%- artist %></div>'),c=a(".now-playing__artist");c.length>0?c.text(wb):Tb.append(b({artist:wb}))},oc=function(a,b,c){xb=a,wb=b,yb=c,mc(),nc(),gc()},pc=function(){"undefined"!=typeof Modernizr&&Modernizr.audio&&(Fb=new Audio,Fb.addEventListener?Fb.addEventListener("ended",function(){fc(),j()}):Fb.attachEvent&&Fb.attachEvent("ended",function(){fc(),j()}))};pc(),pb(),Fb.addEventListener("timeupdate",function(){sb(),ub(),tb()},!1),d(Nb,ac,k),d(Ob,ac,kc),a(document).on("pjax:end",function(){pb(),gc(),d(Nb,ac,k),d(Ob,ac,kc)})}(jQuery,window);
>>>>>>> fix/heartbeat-issue
=======
!function(a,b,c){"use strict";function d(a,b,c){null!=a&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c))}function e(){return bowser.firefox?["Flash"]:bowser.safari?["Html5"]:bowser.chrome?["Flash"]:["Html5","Flash"]}function f(){var a=e();console.log("+++ initPlayer - techPriority = ",a);var b={coreModules:[{id:"MediaPlayer",playerId:"td_container",isDebug:!0,techPriority:a,timeShift:{active:0,max_listening_time:35},geoTargeting:{desktop:{isActive:!1},iOS:{isActive:!1},android:{isActive:!1}},plugins:[{id:"vastAd"}]},{id:"NowPlayingApi"},{id:"Npe"},{id:"PlayerWebAdmin"},{id:"SyncBanners",elements:[{id:"td_synced_bigbox",width:300,height:250}]},{id:"TargetSpot"}]};require(["tdapi/base/util/Companions"],function(a){Db=new a}),vb=new TdPlayerApi(b),vb.addEventListener?(vb.addEventListener("player-ready",C),vb.addEventListener("configuration-error",X),vb.addEventListener("module-error",Y)):vb.attachEvent&&(vb.attachEvent("player-ready",C),vb.attachEvent("configuration-error",X),vb.attachEvent("module-error",Y)),vb.loadModules()}function g(){null!=Lb&&d(Lb,ac,A),null!=Mb&&d(Mb,ac,y),null!=Vb&&d(Vb,ac,ob),null!=Rb&&d(Rb,ac,z)}function h(){null!==Hb&&(Hb.classList.add("stream__active"),Kb.classList.add(!0===Eb&&b.innerWidth<=767?"live-player__login":"live-player__muted"),Mb.classList.contains("live-player__muted")||Mb.classList.add("live-player__muted"),Mb.classList.contains("resume__live")&&Mb.classList.remove("resume__live"),!0===Eb?(Rb.style.display="none",Qb.style.display="inline-block"):(Rb.style.display="inline-block",Qb.style.display="none"),Lb.classList.contains("live-player__muted")&&Lb.classList.remove("live-player__muted"))}function i(){null!==Hb&&(Mb.classList.contains("live-player__muted")&&(Mb.classList.remove("live-player__muted"),Mb.classList.add("resume__live")),Qb.style.display="inline-block",Rb.style.display="none",Lb.classList.add("live-player__muted"))}function j(){null!==Hb&&(Kb.classList.add(!0===Eb&&b.innerWidth<=767?"live-player__login":"live-player__muted"),Qb.style.display="inline-block",Rb.style.display="none",Lb.classList.add("live-player__muted"),Mb.classList.contains("live-player__muted")&&(Mb.classList.remove("live-player__muted"),Mb.classList.add("resume__live")),Mb.classList.add("resume__audio"))}function k(){var a,b=document.querySelectorAll(".audio__time");for(a=0;a<b.length;++a)b[a].classList.add("playing");null!=Jb&&Jb.classList.add("audio__playing"),null!=Yb&&Yb.classList.add("audio__playing"),null!=Ib&&Ib.classList.add("playing"),null!=Zb&&Zb.classList.add("playing"),null!=Qb&&setTimeout(function(){Qb.innerHTML="Switch to Live Stream"},1e3)}function l(b){var c,d=b.target,e=d.parentNode,f=e.nextElementSibling,g=f.nextElementSibling,h=document.querySelectorAll(".audio__time"),i=document.querySelector(".podcast__runtime");if(a(".playing__current").removeClass("playing__current"),null!=Pb&&(Gb.classList.contains("single-show")||Gb.classList.contains("post-type-archive-podcast")||Gb.classList.contains("single-podcast")))f.classList.add("playing__current"),g.classList.add("playing");else{for(c=0;c<h.length;++c)null!=h[c]&&(h[c].classList.add("playing"),h[c].classList.add("playing__current"));i.classList.add("playing")}}function m(){var a,b=document.querySelectorAll(".audio__time"),c=document.querySelectorAll(".podcast__runtime");for(a=0;a<b.length;++a)null!=b[a]&&b[a].classList.contains("playing")&&b[a].classList.remove("playing"),null!=b[a]&&b[a].classList.contains("playing__current")&&b[a].classList.remove("playing__current");for(null!=Jb&&Jb.classList.remove("audio__playing"),null!=Yb&&Yb.classList.remove("audio__playing"),null!=Ib&&Ib.classList.remove("playing"),a=0;a<c.length;++a)null!=c[a]&&c[a].classList.contains("playing")&&c[a].classList.remove("playing");null!=Zb&&Zb.classList.remove("playing")}function n(){b.innerWidth<=767&&(""===$b.innerHTML?(Xb.classList.add("on-air__npe"),_b.classList.add("full__width")):Xb.classList.contains("on-air__npe")&&(Xb.classList.remove("on-air__npe"),_b.classList.remove("full__width")))}function o(){null!=Kb&&Kb.classList.add("play-btn--heartbeat"),null!=Ib&&Ib.classList.add("live-player--heartbeat"),console.log("--- Heartbeat Class Added ---")}function p(){null!=Kb&&Kb.classList.contains("play-btn--heartbeat")&&Kb.classList.remove("play-btn--heartbeat"),null!=Ib&&Ib.classList.contains("live-player--heartbeat")&&Ib.classList.remove("live-player--heartbeat"),console.log("--- Heartbeat Class Removed ---")}function q(){is_gigya_user_logged_in()?(b.innerWidth>=768?null!=Kb&&d(Kb,ac,x):null!=Kb&&d(Kb,ac,w),null!=Qb&&d(Qb,ac,bc)):(null!=Kb&&d(Kb,"click",function(){b.location.href=Ub}),null!=Qb&&d(Qb,"click",function(){b.location.href=Ub}),null!=Sb&&b.innerWidth<=767&&d(Sb,"click",function(){b.location.href=Ub}))}function r(){is_gigya_user_logged_in()&&(i(),1==Cookies.get("gmlp_play_button_pushed")?(b.innerWidth>=768?x():w(),Cookies.set("gmlp_play_button_pushed",0)):console.log("--- Log In with Gigya ---"))}function s(){var a=document.getElementById("live-stream__container");null!=a&&a.classList.add("vast__pre-roll")}function t(){var a=document.getElementById("live-stream__container");null!=a&&a.classList.remove("vast__pre-roll"),Cookies.set("gmr_play_live_audio",c),Cookies.set("gmr_play_live_audio",1,{expires:86400})}function u(){var a=gmr.streamUrl;fb(),eb(),vb.stop(),vb.skipAd(),vb.playAd("vastAd",{url:a})}function v(){var a=document.querySelector(".vast__pre-roll");null!=a&&(a.innerHTML='<div class="adblock--detected"><div class="adblock--detected__notice">We\'ve detected that you\'re using <strong>AdBlock Plus</strong> or some other adblocking software. In order to have the best viewing experience, please diasable AdBlock.</div></div>')}function w(){var a=gmr.callsign;if(1==Cookies.get("gmr_play_live_audio")){if(""===a)return void alert("Please enter a Station");nb("playLiveStream - station="+a),Bb&&vb.stop(),!0===Eb&&bc(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)}else if(0===Cookies.get("gmr_play_live_audio")){if(""===a)return void alert("Please enter a Station");!0===Eb&&bc(),nb("playLiveStream - station="+a),s(),Wb===c?(v(),setTimeout(t,15e3)):u(),vb.addEventListener?vb.addEventListener("ad-playback-complete",function(){t(),console.log("--- ad complete ---"),Bb&&vb.stop(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)}):vb.attachEvent&&vb.attachEvent("ad-playback-complete",function(){t(),console.log("--- ad complete ---"),Bb&&vb.stop(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)})}}function x(){var a=gmr.callsign;if(qb(),!0===Eb)ic(),h();else if(Wb===c)s(),v(),setTimeout(t,15e3);else if(1!=Cookies.get("gmr_play_live_audio")){if(""===a)return void alert("Please enter a Station");nb("playLiveStream - station="+a),s(),u(),vb.addEventListener?vb.addEventListener("ad-playback-complete",function(){t(),console.log("--- ad complete ---"),Bb&&vb.stop(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)}):vb.attachEvent&&vb.attachEvent("ad-playback-complete",function(){t(),console.log("--- ad complete ---"),Bb&&vb.stop(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)})}else{if(""===a)return void alert("Please enter a Station");nb("playLiveStream - station="+a),Bb&&vb.stop(),!0===Eb&&bc(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)}}function y(){if(qb(),!0===Eb)ic(),h();else if(Wb===c)s(),v(),setTimeout(t,15e3);else{var a=gmr.callsign;if(""===a)return void alert("Please enter a Station");nb("playLiveStream - station="+a),Bb&&vb.stop(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)}}function z(){!0===Eb?lc():vb.stop(),Ib.classList.contains("live-player--active")&&Ib.classList.remove("live-player--active"),i()}function A(){!0===Eb?kc():vb.pause(),Ib.classList.contains("live-player--active")&&Ib.classList.remove("live-player--active"),j()}function B(){if(""===a("#songHistoryCallsignUser").val())return void alert("Please enter a Callsign");var b="hdConnection"==a("#songHistoryConnectionTypeSelect").val();vb.NowPlayingApi.load({mount:a("#songHistoryCallsignUser").val(),hd:b,numberToFetch:15})}function C(){vb.MediaPlayer!==c&&(r(),g(),vb.addEventListener?(vb.addEventListener("track-cue-point",N),vb.addEventListener("ad-break-cue-point",Q),vb.addEventListener("stream-track-change",O),vb.addEventListener("hls-cue-point",P),vb.addEventListener("stream-status",Z),vb.addEventListener("stream-geo-blocked",$),vb.addEventListener("timeout-alert",V),vb.addEventListener("timeout-reach",W),vb.addEventListener("npe-song",gb),vb.addEventListener("stream-select",L),vb.addEventListener("stream-start",K),vb.addEventListener("stream-stop",M)):vb.attachEvent&&(vb.attachEvent("track-cue-point",N),vb.attachEvent("ad-break-cue-point",Q),vb.attachEvent("stream-track-change",O),vb.attachEvent("hls-cue-point",P),vb.attachEvent("stream-status",Z),vb.attachEvent("stream-geo-blocked",$),vb.attachEvent("timeout-alert",V),vb.attachEvent("timeout-reach",W),vb.attachEvent("npe-song",gb),vb.attachEvent("stream-select",L),vb.attachEvent("stream-start",K),vb.attachEvent("stream-stop",M)),vb.setVolume(1),ab("Api Ready"),b.innerWidth>=768&&(o(),setTimeout(p,2e3)),bb(vb.MediaPlayer.tech.type),vb.addEventListener?(vb.addEventListener("list-loaded",S),vb.addEventListener("list-empty",T),vb.addEventListener("nowplaying-api-error",U)):vb.attachEvent&&(vb.attachEvent("list-loaded",S),vb.attachEvent("list-empty",T),vb.attachEvent("nowplaying-api-error",U)),a("#fetchSongHistoryByUserCallsignButton").click(function(){B()}),vb.addEventListener?vb.addEventListener("pwa-data-loaded",db):vb.attachEvent&&vb.attachEvent("pwa-data-loaded",db),a("#pwaButton").click(function(){cb()}))}function D(a){zb=!0,ab("Advertising... Type="+a.data.type)}function E(){zb=!1,a("#td_adserver_bigbox").empty(),a("#td_adserver_leaderboard").empty(),ab("Ready")}function F(){ab("Ready"),t();var a=gmr.callsign;Bb&&vb.stop(),Ib.classList.add("live-player--active"),vb.play({station:a,timeShift:!0}),h(),setTimeout(n,2e3)}function G(a){nb("Ad countdown : "+a.data.countDown+" second(s)")}function H(a){nb("Vast Process complete");var b=a.data.companions;J(b)}function I(a){nb("Vpaid Ad Companions"),J(a.companions)}function J(b){if(b&&b.length>0){var c=-1,d=-1;a.each(b,function(a,b){300==parseInt(b.width)&&250==parseInt(b.height)?c=a:728==parseInt(b.width)&&90==parseInt(b.height)&&(d=a)}),c>-1&&Db.loadVASTCompanionAd("td_adserver_bigbox",b[c]),d>-1&&Db.loadVASTCompanionAd("td_adserver_leaderboard",b[d])}}function K(){Bb=!0}function L(){a("#hasHQ").html(vb.MediaPlayer.hasHQ().toString()),a("#isHQ").html(vb.MediaPlayer.isHQ().toString()),a("#hasLow").html(vb.MediaPlayer.hasLow().toString()),a("#isLow").html(vb.MediaPlayer.isLow().toString())}function M(){Bb=!1,R(),a("#trackInfo").html(""),a("#asyncData").html(""),a("#hasHQ").html("N/A"),a("#isHQ").html("N/A"),a("#hasLow").html("N/A"),a("#isLow").html("N/A")}function N(b){nb("New Track cuepoint received"),nb("Title:"+b.data.cuePoint.cueTitle+" - Artist:"+b.data.cuePoint.artistName),console.log(b),Ab&&Ab!=b.data.cuePoint&&R(),b.data.cuePoint.nowplayingURL&&vb.Npe.loadNpeMetadata(b.data.cuePoint.nowplayingURL,b.data.cuePoint.artistName,b.data.cuePoint.cueTitle),Ab=b.data.cuePoint,a("#trackInfo").html('<div class="now-playing__title">'+Ab.cueTitle+'</div><div class="now-playing__artist">'+Ab.artistName+"</div>")}function O(a){nb("Stream Track has changed"),nb("Codec:"+a.data.cuePoint.audioTrack.codec()+" - Bitrate:"+a.data.cuePoint.audioTrack.bitRate())}function P(a){nb("New HLS cuepoint received"),nb("Track Id:"+a.data.cuePoint.hlsTrackId+" SegmentId:"+a.data.cuePoint.hlsSegmentId),console.log(a)}function Q(a){ab("Commercial break..."),console.log(a)}function R(){a("#npeInfo").html(""),a("#asyncData").html("")}function S(b){nb("Song History loaded"),console.log(b.data),a("#asyncData").html('<br><p><span class="label label-warning">Song History:</span>');var c,d='<table class="table table-striped"><thead><tr><th>Song title</th><th>Artist name</th><th>Time</th></tr></thead>';a.each(b.data.list,function(a,b){c=new Date(Number(b.cueTimeStart)),d+="<tr><td>"+b.cueTitle+"</td><td>"+b.artistName+"</td><td>"+c.toLocaleTimeString()+"</td></tr>"}),d+="</table></p>",a("#asyncData").html("<div>"+d+"</div>")}function T(){a("#asyncData").html('<br><p><span class="label label-important">Song History is empty</span>')}function U(b){nb("Song History loading error",!0),console.error(b),a("#asyncData").html('<br><p><span class="label label-important">Song History error</span>')}function V(){nb("Time Out Alert")}function W(){nb("Time Out Reached")}function X(a){nb("Configuration error",!0),console.log(a)}function Y(b){var c="";a.each(b.data.errors,function(a,b){c+="ERROR : "+b.data.error.message+"<br/>"}),a("#status").html('<p><span class="label label-important">'+c+"</span><p></p>")}function Z(a){console.log("tdplayer::onStatus"),ab(a.data.status)}function $(a){console.log("tdplayer::onGeoBlocked"),ab(a.data.text)}function ab(b){nb(b),a("#status").html('<p><span class="label label-success">Status: '+b+"</span></p>")}function bb(b){var c=vb.version.major+"."+vb.version.minor+"."+vb.version.patch+"."+vb.version.flag,d='<p><span class="label label-info">Api version: '+c+" - Technology: "+b;vb.flash.available&&(d+=" - Your current version of flash plugin is: "+vb.flash.version.major+"."+vb.flash.version.minor+"."+vb.flash.version.rev),d+="</span></p>",a("#techInfo").html(d)}function cb(){return""===a("#pwaCallsign").val()||""===a("#pwaStreamId").val()?void alert("Please enter a Callsign and a streamid"):void vb.PlayerWebAdmin.load(a("#pwaCallsign").val(),a("#pwaStreamId").val())}function db(b){nb("PlayerWebAdmin data loaded successfully"),console.log(b),a("#asyncData").html('<br><p><span class="label label-warning">PlayerWebAdmin:</span>');var c='<table class="table table-striped"><thead><tr><th>Key</th><th>Value</th></tr></thead>';for(var d in b.data.config)console.log(d),c+="<tr><td>"+d+"</td><td>"+b.data.config[d]+"</td></tr>";c+="</table></p>",a("#asyncData").html("<div>"+c+"</div>")}function eb(){vb.addEventListener?(vb.addEventListener("ad-playback-start",D),vb.addEventListener("ad-playback-error",F),vb.addEventListener("ad-playback-complete",E),vb.addEventListener("ad-countdown",G),vb.addEventListener("vast-process-complete",H),vb.addEventListener("vpaid-ad-companions",I)):vb.attachEvent&&(vb.attachEvent("ad-playback-start",D),vb.attachEvent("ad-playback-error",F),vb.attachEvent("ad-playback-complete",E),vb.attachEvent("ad-countdown",G),vb.attachEvent("vast-process-complete",H),vb.attachEvent("vpaid-ad-companions",I))}function fb(){vb.removeEventListener?(vb.removeEventListener("ad-playback-start",D),vb.removeEventListener("ad-playback-error",F),vb.removeEventListener("ad-playback-complete",E),vb.removeEventListener("ad-countdown",G),vb.removeEventListener("vast-process-complete",H),vb.removeEventListener("vpaid-ad-companions",I)):vb.detachEvent&&(vb.detachEvent("ad-playback-start",D),vb.detachEvent("ad-playback-error",F),vb.detachEvent("ad-playback-complete",E),vb.detachEvent("ad-countdown",G),vb.detachEvent("vast-process-complete",H),vb.detachEvent("vpaid-ad-companions",I))}function gb(a){console.log("tdplayer::onNPESong"),console.log(a),Cb=a.data.song,dc=Cb.artist(),dc.addEventListener?dc.addEventListener("artist-complete",ib):dc.attachEvent&&dc.attachEvent("artist-complete",ib);var b=lb();hb(b,!1)}function hb(b,c){a("#asyncData").empty();var d=c?"asyncData":"npeInfo",e=a("#"+d);c===!1&&e.html('<span class="label label-inverse">Npe Info:</span>'),e.append(b)}function ib(){dc.addEventListener?dc.addEventListener("picture-complete",jb):dc.attachEvent&&dc.attachEvent("picture-complete",jb);for(var a=dc.getPictures(),b=[],c=0;c<a.length;c++)b.push(a[c].id);b.length>0&&dc.fetchPictureByIds(b);var d=kb();hb(d,!0)}function jb(b){console.log("tdplayer::onArtistPictureComplete"),console.log(b);for(var c='<span class="label label-inverse">Photos:</span><br>',d=0;d<b.length;d++)b[d].getFiles()&&(c+='<a href="'+b[d].getFiles()[0].url+'" rel="lightbox[npe]" title="Click on the right side of the image to move forward."><img src="'+b[d].getFiles()[0].url+'" width="125" /></a>&nbsp;');a("#asyncData").append(c)}function kb(){if(Cb!==c){var a='<span class="label label-inverse">Artist:</span>';a+="<ul><li>Artist id: "+Cb.artist().id+"</li>",a+="<li>Artist birth date: "+Cb.artist().getBirthDate()+"</li>",a+="<li>Artist end date: "+Cb.artist().getEndDate()+"</li>",a+="<li>Artist begin place: "+Cb.artist().getBeginPlace()+"</li>",a+="<li>Artist end place: "+Cb.artist().getEndPlace()+"</li>",a+="<li>Artist is group ?: "+Cb.artist().getIsGroup()+"</li>",a+="<li>Artist country: "+Cb.artist().getCountry()+"</li>";for(var b=Cb.artist().getAlbums(),d=0;d<b.length;d++)a+="<li>Album "+(d+1)+": "+b[d].getTitle()+"</li>";var e=Cb.artist().getSimilar();for(d<e.length;d++;)a+="<li>Similar artist "+(d+1)+": "+e[d].name+"</li>";var f=Cb.artist().getMembers();for(d<f.length;d++;)a+="<li>Member "+(d+1)+": "+f[d].name+"</li>";a+="<li>Artist website: "+Cb.artist().getWebsite()+"</li>",a+="<li>Artist twitter: "+Cb.artist().getTwitterUsername()+"</li>",a+="<li>Artist facebook: "+Cb.artist().getFacebookUrl()+"</li>",a+="<li>Artist biography: "+Cb.artist().getBiography().substring(0,2e3)+"...</small>";var g=Cb.artist().getGenres();for(d<g.length;d++;)a+="<li>Genre "+(d+1)+": "+g[d]+"</li>";return a+="</ul>"}return'<span class="label label-important">The artist information is undefined</span>'}function lb(){var a="NPE Data undefined";if(Cb!==c&&Cb.album()){var b="";null!=Cb.album().getBuyUrl()&&(b='<a target="_blank" title="'+Cb.album().getBuyUrl()+'" href="'+Cb.album().getBuyUrl()+'">Buy on iTunes</a><br/>'),a="<p><b>Album:</b> "+Cb.album().getTitle()+"<br/>"+b+'<img src="'+Cb.album().getCoverArtOriginal().url+'" style="height:100px" /></p>'}return a}function mb(){for(var a,c=[],d=b.location.href.slice(b.location.href.indexOf("?")+1).split("&"),e=0;e<d.length;e++)a=d[e].split("="),c.push(a[0]),c[a[0]]=a[1];return c}function nb(b,c){c?console.error(b):console.log(b),a("#debugInformation").append(b),a("#debugInformation").append("\n")}function ob(){a("#debugInformation").html("")}function pb(){if("undefined"!=typeof Modernizr&&Modernizr.audio){var b=document.querySelectorAll(".content"),c=a(b);c.on("click",".podcast__btn--play",function(b){var c=a(b.currentTarget);l(b),jc(c.attr("data-mp3-src")),fc(),oc(c.attr("data-mp3-title"),c.attr("data-mp3-artist"),c.attr("data-mp3-hash"))}),c.on("click",".podcast__btn--pause",kc)}else{var d=a(".gmr-mediaelement-fallback audio"),e=a(".podcast__play");d.mediaelementplayer(),e.hide()}}function qb(){is_gigya_user_logged_in()?a.support.pjax&&a(document).pjax("a:not(.ab-item)",".main",{fragment:".main",maxCacheLength:500,timeout:5e3}):gmlp.logged_in&&a.support.pjax&&a(document).pjax("a:not(.ab-item)",".page-wrap",{fragment:".page-wrap",maxCacheLength:500,timeout:5e3})}function rb(){a(document).on("pjax:click",function(a){a.preventDefault()})}function sb(){var a,b=document.querySelectorAll(".audio__progress"),c=0;for(a=0;a<b.length;++a)Fb.currentTime>0&&(c=Math.floor(100/Fb.duration*Fb.currentTime)),b[a].style.width=c+"%"}function tb(){var a,b,c,d=document.querySelectorAll(".audio__time--remaining"),e=parseInt(Fb.duration),f=parseInt(Fb.currentTime),g=e-f;for(a=0;a<d.length;++a)b=g%60,b=isNaN(b)?"00":10>b?"0"+b:b,c=Math.floor(g/60)%60,isNaN(c)&&(c="0"),d[a].innerHTML=c+":"+b}function ub(){var a,b=document.querySelectorAll(".audio__time--elapsed"),c=parseInt(Fb.currentTime%60),d=parseInt(Fb.currentTime/60%60);for(a=0;a<b.length;++a)b[a].innerHTML=10>c?d+":0"+c:d+":"+c}var vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb=(mb().tech||"html5_flash","false"==mb().aSyncCuePointFallback?!1:!0,!1),Fb=!1,Gb=document.querySelector("body"),Hb=document.getElementById("td_container"),Ib=document.getElementById("live-player"),Jb=document.querySelector(".live-stream__player"),Kb=document.getElementById("playButton"),Lb=document.getElementById("pauseButton"),Mb=document.getElementById("resumeButton"),Nb=document.querySelector(".podcast__btn--play"),Ob=document.querySelector(".podcast__btn--pause"),Pb=document.querySelector(".podcast-player"),Qb=(document.querySelector(".podcast__btn--play.playing"),document.getElementById("live-stream__listen-now")),Rb=document.getElementById("live-stream__now-playing"),Sb=document.getElementById("live-stream__login"),Tb=a(document.getElementById("trackInfo")),Ub=gigya_profile_path("login"),Vb=document.getElementById("clearDebug"),Wb=document.getElementById("ad-check"),Xb=(document.getElementById("close-adblock"),document.getElementById("on-air")),Yb=(document.querySelector(".on-air__title"),document.querySelector(".on-air__show"),document.getElementById("live-stream__status")),Zb=document.getElementById("nowPlaying"),$b=document.getElementById("trackInfo"),_b=document.querySelector(".live-player__stream"),ac="click";b.tdPlayerApiReady=function(){console.log("--- TD Player API Loaded ---"),f()};var bc=function(){var a=Qb.textContent,c=document.getElementById("trackInfo"),d=document.getElementById("npeInfo");!0===Eb&&(Fb.pause(),c.innerHTML="",d.innerHTML="",fc(),m(),Eb=!1),"Switch to Live Stream"===a&&(Qb.innerHTML="Listen Live"),b.innerWidth>=768&&x()};q();var cc=a(".live-player__stream--current-name");cc.bind("DOMSubtreeModified",function(){console.log("--- new stream select ---");var a=cc.text();Bb&&vb.stop(),!0===Eb&&bc(),vb.play({station:a,timeShift:!0}),Ib.classList.add("live-player--active"),h(),setTimeout(n,2e3)});var dc,ec=function(){"undefined"!=typeof vb&&"undefined"!=typeof vb.stop&&vb.stop()},fc=function(){a(".podcast__btn--play.playing").removeClass("playing"),a(".podcast__btn--pause.playing").removeClass("playing")},gc=function(){var b=".mp3-"+yb;a(b+" .podcast__btn--play").addClass("playing"),a(b+" .podcast__btn--pause").addClass("playing")},hc=function(a){Fb.src=a},ic=function(){Eb=!0,ec(),Fb.play(),mc(),nc(),fc(),h(),gc(),k()},jc=function(a){qb(),a!==Fb.src&&hc(a),ic()},kc=function(){rb(),Fb.pause(),fc(),j()},lc=function(){rb(),Fb.pause(),fc(),Eb=!1,i(),m()},mc=function(){var b=_.template('<div class="now-playing__title"><%- title %></div>'),c=a(".now-playing__title"),d='<div class="audio__title">',e='</div><div class="audio__time"><span class="audio__time--inline">(</span><div class="audio__time--elapsed"></div><span class="audio__time--inline"> / </span><div class="audio__time--remaining"></div><span class="audio__time--inline">)</span></div>';c.length>0?c.html(d+xb+e):Tb.prepend(b({title:xb}))},nc=function(){var b=_.template('<div class="now-playing__artist"><%- artist %></div>'),c=a(".now-playing__artist");c.length>0?c.text(wb):Tb.append(b({artist:wb}))},oc=function(a,b,c){xb=a,wb=b,yb=c,mc(),nc(),gc()},pc=function(){"undefined"!=typeof Modernizr&&Modernizr.audio&&(Fb=new Audio,Fb.addEventListener?Fb.addEventListener("ended",function(){fc(),j()}):Fb.attachEvent&&Fb.attachEvent("ended",function(){fc(),j()}))};pc(),pb(),Fb.addEventListener("timeupdate",function(){sb(),ub(),tb()},!1),d(Nb,ac,k),d(Ob,ac,kc),a(document).on("pjax:end",function(){pb(),gc(),d(Nb,ac,k),d(Ob,ac,kc)})}(jQuery,window);
>>>>>>> fix/padding-in-header-on-mobile
