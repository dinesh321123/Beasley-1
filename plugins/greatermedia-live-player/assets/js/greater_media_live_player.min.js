!function(a,b){"undefined"!=typeof module&&module.exports?module.exports.browser=b():"function"==typeof define&&define.amd?define(b):this[a]=b()}("bowser",function(){function a(a){function c(b){var c=a.match(b);return c&&c.length>1&&c[1]||""}var d,e=c(/(ipod|iphone|ipad)/i).toLowerCase(),f=/like android/i.test(a),g=!f&&/android/i.test(a),h=c(/version\/(\d+(\.\d+)?)/i),i=/tablet/i.test(a),j=!i&&/[^-]mobi/i.test(a);/opera|opr/i.test(a)?d={name:"Opera",opera:b,version:h||c(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(a)?d={name:"Windows Phone",windowsphone:b,msie:b,version:c(/iemobile\/(\d+(\.\d+)?)/i)}:/msie|trident/i.test(a)?d={name:"Internet Explorer",msie:b,version:c(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome|crios|crmo/i.test(a)?d={name:"Chrome",chrome:b,version:c(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:e?(d={name:"iphone"==e?"iPhone":"ipad"==e?"iPad":"iPod"},h&&(d.version=h)):/sailfish/i.test(a)?d={name:"Sailfish",sailfish:b,version:c(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(a)?d={name:"SeaMonkey",seamonkey:b,version:c(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(a)?(d={name:"Firefox",firefox:b,version:c(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(a)&&(d.firefoxos=b)):/silk/i.test(a)?d={name:"Amazon Silk",silk:b,version:c(/silk\/(\d+(\.\d+)?)/i)}:g?d={name:"Android",version:h}:/phantom/i.test(a)?d={name:"PhantomJS",phantom:b,version:c(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(a)||/rim\stablet/i.test(a)?d={name:"BlackBerry",blackberry:b,version:h||c(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(a)?(d={name:"WebOS",webos:b,version:h||c(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(a)&&(d.touchpad=b)):d=/bada/i.test(a)?{name:"Bada",bada:b,version:c(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(a)?{name:"Tizen",tizen:b,version:c(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||h}:/safari/i.test(a)?{name:"Safari",safari:b,version:h}:{},/(apple)?webkit/i.test(a)?(d.name=d.name||"Webkit",d.webkit=b,!d.version&&h&&(d.version=h)):!d.opera&&/gecko\//i.test(a)&&(d.name=d.name||"Gecko",d.gecko=b,d.version=d.version||c(/gecko\/(\d+(\.\d+)?)/i)),g||d.silk?d.android=b:e&&(d[e]=b,d.ios=b);var k="";e?(k=c(/os (\d+([_\s]\d+)*) like mac os x/i),k=k.replace(/[_\s]/g,".")):g?k=c(/android[ \/-](\d+(\.\d+)*)/i):d.windowsphone?k=c(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):d.webos?k=c(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):d.blackberry?k=c(/rim\stablet\sos\s(\d+(\.\d+)*)/i):d.bada?k=c(/bada\/(\d+(\.\d+)*)/i):d.tizen&&(k=c(/tizen[\/\s](\d+(\.\d+)*)/i)),k&&(d.osversion=k);var l=k.split(".")[0];return i||"ipad"==e||g&&(3==l||4==l&&!j)||d.silk?d.tablet=b:(j||"iphone"==e||"ipod"==e||g||d.blackberry||d.webos||d.bada)&&(d.mobile=b),d.msie&&d.version>=10||d.chrome&&d.version>=20||d.firefox&&d.version>=20||d.safari&&d.version>=6||d.opera&&d.version>=10||d.ios&&d.osversion&&d.osversion.split(".")[0]>=6||d.blackberry&&d.version>=10.1?d.a=b:d.msie&&d.version<10||d.chrome&&d.version<20||d.firefox&&d.version<20||d.safari&&d.version<6||d.opera&&d.version<10||d.ios&&d.osversion&&d.osversion.split(".")[0]<6?d.c=b:d.x=b,d}var b=!0,c=a("undefined"!=typeof navigator?navigator.userAgent:"");return c._detect=a,c}),function(a,b,c){"use strict";function d(){a.support.pjax&&a(e).pjax("a:not(.ab-item)",".main",{fragment:".main",maxCacheLength:500,timeout:1e4})}var e=b.document,f=(e.querySelectorAll("body"),a("#playButton")),g=(a("#pauseButton"),a("#resumeButton"));a("#live-stream__listen-now"),a("#live-stream__login"),a(".header__account--btn");f.on("click",function(){d()}),g.on("click",function(){d()})}(jQuery,window),function(a,b,c){"use strict";function d(a){oa("tdplayer::play: "+a),wa.play({station:a,timeShift:!0}),Ea.trigger("player:starts")}function e(a,b,c){null!=a&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c))}function f(){var b=gmr.intervals.live_streaming;b>0&&(oa("Live stream interval set"),bb=setInterval(function(){a(Ia).trigger("liveStreamPlaying.gmr"),oa("Live stream interval reached")},60*b*1e3))}function g(){var b=gmr.intervals.inline_audio;b>0&&(oa("Inline audio interval set"),ab=setInterval(function(){a(Ia).trigger("inlineAudioPlaying.gmr"),oa("Inline audio interval reached")},60*b*1e3))}function h(){clearInterval(bb),oa("Live stream interval off")}function i(){clearInterval(ab),oa("Inline audio interval off")}function j(){return bowser.firefox?["Flash","Html5"]:bowser.safari?["Html5","Flash"]:bowser.chrome?["Html5","Flash"]:["Html5","Flash"]}function k(){var a=j();oa("+++ initPlayer - techPriority = "+a.join(", "));var c={coreModules:[{id:"MediaPlayer",playerId:"td_container",isDebug:!1,techPriority:a,timeShift:{active:0,max_listening_time:35},geoTargeting:{desktop:{isActive:!1},iOS:{isActive:!1},android:{isActive:!1}},plugins:[{id:"vastAd"}]},{id:"NowPlayingApi"},{id:"Npe"},{id:"PlayerWebAdmin"},{id:"SyncBanners",elements:[{id:"td_synced_bigbox",width:300,height:250}]},{id:"TargetSpot"}]};require(["tdapi/base/util/Companions"],function(a){Da=new a}),b.player=wa=new TdPlayerApi(c),wa.addEventListener?(wa.addEventListener("player-ready",H),wa.addEventListener("configuration-error",da),wa.addEventListener("module-error",ea)):wa.attachEvent&&(wa.attachEvent("player-ready",H),wa.attachEvent("configuration-error",da),wa.attachEvent("module-error",ea)),wa.loadModules()}function l(){null!=Na&&e(Na,"click",F),null!=Oa&&e(Oa,"click",E),null!=Wa&&e(Wa,"click",pa)}function m(){null!==Ja&&(Ja.classList.add("stream__active"),!0===Fa&&b.innerWidth<=767?Ma.classList.add("live-player__login"):Ma.classList.add("live-player__muted"),eb.removeClass("-playing -paused"),eb.addClass("-loading"),Oa.classList.contains("live-player__muted")||Oa.classList.add("live-player__muted"),Oa.classList.contains("resume__live")&&Oa.classList.remove("resume__live"),!0===Fa?(Ua.style.display="none",Ta.style.display="inline-block"):(Ua.style.display="inline-block",Ta.style.display="none"),!1===Fa&&null!=Pa&&Pa.classList.add("loading"),!0===Fa&&null!=Na?Na.classList.contains("live-player__muted")&&Na.classList.remove("live-player__muted"):Na.classList.add("live-player__muted"))}function n(){null!==Ja&&(eb.removeClass("-playing -loading -paused"),Oa.classList.contains("live-player__muted")&&(Oa.classList.remove("live-player__muted"),Oa.classList.add("resume__live")),Ta.style.display="inline-block",Ua.style.display="none",Na.classList.add("live-player__muted"))}function o(){null!==Ja&&(eb.removeClass("-playing -loading"),eb.addClass("-paused"),!0===Fa&&b.innerWidth<=767?Ma.classList.add("live-player__login"):Ma.classList.add("live-player__muted"),Ia.classList.contains("live-player--active")&&Ia.classList.remove("live-player--active"),Ta.style.display="inline-block",Ua.style.display="none",Na.classList.add("live-player__muted"),Oa.classList.contains("live-player__muted")&&(Oa.classList.remove("live-player__muted"),Oa.classList.add("resume__live")),Oa.classList.add("resume__audio"))}function p(){var a,b=document.querySelectorAll(".audio__time");for(a=0;a<b.length;++a)b[a].classList.add("playing");null!=La&&La.classList.add("audio__playing"),null!=Ya&&Ya.classList.add("audio__playing"),null!=Ka&&Ka.classList.add("playing"),null!=Za&&Za.classList.add("playing"),null!=Ta&&setTimeout(function(){Ta.innerHTML="Switch to Live Stream"},1e3)}function q(b){var c,d=b.target,e=a(d).parents(".podcast-player"),f=d.parentNode,g=f.nextElementSibling,h=g.nextElementSibling,i=e.find(".podcast__play .audio__time"),j=document.querySelector(".podcast__runtime"),k=f.parentNode,l=k.nextElementSibling,m=l.querySelector(".audio__time");if(a(".playing__current").removeClass("playing__current"),null!=Sa&&(Ia.classList.contains("single-show")||Ia.classList.contains("post-type-archive-podcast")||Ia.classList.contains("single-podcast")||Ia.classList.contains("home")))g.classList.add("playing__current"),h.classList.add("playing");else if(null==Sa||(Ia.classList.contains("single-show")||Ia.classList.contains("post-type-archive-podcast")||Ia.classList.contains("single-podcast"))){for(c=0;c<i.length;++c)null!=i[c]&&(i[c].classList.add("playing"),i[c].classList.add("playing__current"));j.classList.add("playing")}else g.classList.add("playing__current"),m.classList.add("playing__current")}function r(){var a,b=document.querySelectorAll(".audio__time"),c=document.querySelectorAll(".podcast__runtime");for(a=0;a<b.length;++a)null!=b[a]&&b[a].classList.contains("playing")&&b[a].classList.remove("playing"),null!=b[a]&&b[a].classList.contains("playing__current")&&b[a].classList.remove("playing__current");for(null!=La&&La.classList.remove("audio__playing"),null!=Ya&&Ya.classList.remove("audio__playing"),null!=Ka&&Ka.classList.remove("playing"),a=0;a<c.length;++a)null!=c[a]&&c[a].classList.contains("playing")&&c[a].classList.remove("playing");null!=Za&&Za.classList.remove("playing")}function s(){b.innerWidth<=767&&(""===$a.innerHTML?(Xa.classList.add("on-air__npe"),_a.classList.add("full__width")):Xa.classList.contains("on-air__npe")&&(Xa.classList.remove("on-air__npe"),_a.classList.remove("full__width")))}function t(){null!=Ma&&Ma.classList.add("play-btn--heartbeat"),null!=Ka&&Ka.classList.add("live-player--heartbeat")}function u(){null!=Ma&&Ma.classList.contains("play-btn--heartbeat")&&Ma.classList.remove("play-btn--heartbeat"),null!=Ka&&Ka.classList.contains("live-player--heartbeat")&&Ka.classList.remove("live-player--heartbeat")}function v(){cb=1,oa("-- Player Initialized By Click ---")}function w(){cb=!0,oa("-- Player Ready to Go ---")}function x(){cb===!0&&(n(),b.innerWidth>=768?D():C())}function y(){null!=Ma&&e(Ma,"click",function(){cb===!0?(n(),b.innerWidth>=768?D():C()):v()}),null!=Ta&&e(Ta,"click",hb)}function z(){var a=document.getElementById("live-stream__container");Ia.classList.add("vast-ad--playing"),null!=a&&a.classList.add("vast__pre-roll")}function A(){var a=document.getElementById("live-stream__container");Ia.classList.contains("vast-ad--playing")&&Ia.classList.remove("vast-ad--playing"),null!=a&&a.classList.remove("vast__pre-roll"),Cookies.set("gmr_play_live_audio",c),Cookies.set("gmr_play_live_audio",1,{expires:86400})}function B(){var a=gmr.streamUrl;ma(),la(),wa.stop(),wa.skipAd(),wa.playAd("vastAd",{url:a}),setTimeout(function(){this.stop()},25e3)}function C(){var a=gmr.callsign;return ra(),""===a?void alert("Please enter a Station"):(!0===Fa&&hb(),oa("playLiveStream - station="+a),z(),B(),void(wa.addEventListener?wa.addEventListener("ad-playback-complete",function(){A(),oa("--- ad complete ---"),Ca&&wa.stop(),Ia.classList.add("live-player--active"),Ka.classList.add("live-player--active"),d(a),m()}):wa.attachEvent&&wa.attachEvent("ad-playback-complete",function(){A(),oa("--- ad complete ---"),Ca&&wa.stop(),Ia.classList.add("live-player--active"),Ka.classList.add("live-player--active"),d(a),m()})))}function D(){var a=gmr.callsign;if(ra(),!0===Fa)nb(),m();else{if(""===a)return void alert("Please enter a Station");oa("playLiveStream - station="+a),z(),B(),wa.addEventListener?wa.addEventListener("ad-playback-complete",function(){A(),oa("--- ad complete ---"),Ca&&wa.stop(),Ia.classList.add("live-player--active"),Ka.classList.add("live-player--active"),d(a),m()}):wa.attachEvent&&wa.attachEvent("ad-playback-complete",function(){A(),oa("--- ad complete ---"),Ca&&wa.stop(),Ia.classList.add("live-player--active"),Ka.classList.add("live-player--active"),d(a),m()})}}function E(){if(ra(),!0===Fa)nb(),m();else{var a=gmr.callsign;if(""===a)return void alert("Please enter a Station");oa("playLiveStream - station="+a),Ca&&wa.stop(),Ka.classList.add("live-player--active"),d(a),m()}}function F(){!0===Fa?(pb(),i()):(Ha=!1,wa.pause(),h()),Ka.classList.contains("live-player--active")&&Ka.classList.remove("live-player--active"),o()}function G(){if(""===a("#songHistoryCallsignUser").val())return void alert("Please enter a Callsign");var b="hdConnection"==a("#songHistoryConnectionTypeSelect").val();wa.NowPlayingApi.load({mount:a("#songHistoryCallsignUser").val(),hd:b,numberToFetch:15})}function H(){wa.MediaPlayer!==c&&(l(),wa.addEventListener?(wa.addEventListener("track-cue-point",U),wa.addEventListener("ad-break-cue-point",X),wa.addEventListener("stream-track-change",V),wa.addEventListener("hls-cue-point",W),wa.addEventListener("stream-status",fa),wa.addEventListener("stream-geo-blocked",ga),wa.addEventListener("timeout-alert",ba),wa.addEventListener("timeout-reach",ca),wa.addEventListener("stream-select",S),wa.addEventListener("stream-start",R),wa.addEventListener("stream-stop",T),wa.addEventListener("stream-config-error",I),wa.addEventListener("stream-config-load-error",I),wa.addEventListener("stream-fail",I),wa.addEventListener("stream-error",I)):wa.attachEvent&&(wa.attachEvent("track-cue-point",U),wa.attachEvent("ad-break-cue-point",X),wa.attachEvent("stream-track-change",V),wa.attachEvent("hls-cue-point",W),wa.attachEvent("stream-status",fa),wa.attachEvent("stream-geo-blocked",ga),wa.attachEvent("timeout-alert",ba),wa.attachEvent("timeout-reach",ca),wa.attachEvent("stream-select",S),wa.attachEvent("stream-start",R),wa.attachEvent("stream-stop",T),wa.attachEvent("stream-config-error",I),wa.attachEvent("stream-config-load-error",I),wa.attachEvent("stream-fail",I),wa.attachEvent("stream-error",I)),wa.setVolume(1),ha("Api Ready"),1===cb?(w(),x()):1===Cookies.get("gmlp_play_button_pushed")?(w(),x()):w(),b.innerWidth>=768&&(t(),setTimeout(u,2e3)),ia(wa.MediaPlayer.tech.type),wa.addEventListener?(wa.addEventListener("list-loaded",Z),wa.addEventListener("list-empty",$),wa.addEventListener("nowplaying-api-error",aa)):wa.attachEvent&&(wa.attachEvent("list-loaded",Z),wa.attachEvent("list-empty",$),wa.attachEvent("nowplaying-api-error",aa)),a("#fetchSongHistoryByUserCallsignButton").click(function(){G()}),wa.addEventListener?wa.addEventListener("pwa-data-loaded",ka):wa.attachEvent&&wa.attachEvent("pwa-data-loaded",ka),a("#pwaButton").click(function(){ja()}),bowser.ios?(Ka.classList.add("no-volume-control"),fb.hide()):(fb.find('input[type="range"]').val(Q()).change(function(){db=parseFloat(a(this).val()),isNaN(db)&&(db=1),Ca&&wa.setVolume(db),Ga&&(Ga.volume=db),"undefined"!=typeof localStorage&&localStorage.setItem("gmr-live-player-volume",db)}),gb.click(function(){fb.toggleClass("-open")})))}function I(a){oa("Stream error",1),oa(a)}function J(a){Aa=!0,ha("Advertising... Type="+a.data.type)}function K(b){Aa=!1,a("#td_adserver_bigbox").empty(),a("#td_adserver_leaderboard").empty(),ha("Ready")}function L(a){ha("Ready"),A();var b=gmr.callsign;Ca&&wa.stop(),Ka.classList.add("live-player--active"),d(b),m()}function M(a){oa("Ad countdown : "+a.data.countDown+" second(s)")}function N(a){oa("Vast Process complete");var b=a.data.companions;P(b)}function O(a){oa("Vpaid Ad Companions"),P(a.companions)}function P(b){if(b&&b.length>0){var c=-1,d=-1;a.each(b,function(a,b){300==parseInt(b.width)&&250==parseInt(b.height)?c=a:728==parseInt(b.width)&&90==parseInt(b.height)&&(d=a)}),c>-1&&Da.loadVASTCompanionAd("td_adserver_bigbox",b[c]),d>-1&&Da.loadVASTCompanionAd("td_adserver_leaderboard",b[d])}}function Q(){var a=db;return"undefined"!=typeof localStorage&&(a=localStorage.getItem("gmr-live-player-volume"),null===a?a=1:(a=parseFloat(a),isNaN(a)&&(a=1))),a}function R(){Ca=!0,Ha=!0,eb.removeClass("-loading -paused"),eb.addClass("-playing"),Pa.classList.contains("loading")&&Pa.classList.remove("loading"),Na.classList.contains("live-player__muted")&&Na.classList.remove("live-player__muted"),f(),wa.setVolume(Q())}function S(){a("#hasHQ").html(wa.MediaPlayer.hasHQ().toString()),a("#isHQ").html(wa.MediaPlayer.isHQ().toString()),a("#hasLow").html(wa.MediaPlayer.hasLow().toString()),a("#isLow").html(wa.MediaPlayer.isLow().toString())}function T(){Ca=!1,Ha=!1,Y(),a("#trackInfo").html(""),a("#asyncData").html(""),a("#hasHQ").html("N/A"),a("#isHQ").html("N/A"),a("#hasLow").html("N/A"),a("#isLow").html("N/A"),h()}function U(b){oa("New Track cuepoint received"),oa("Title: "+b.data.cuePoint.cueTitle+" - Artist: "+b.data.cuePoint.artistName),a("#js-track-info").text(b.data.cuePoint.cueTitle),a("#js-artist-info").text(b.data.cuePoint.artistName),Ba&&Ba!=b.data.cuePoint&&Y(),b.data.cuePoint.nowplayingURL&&wa.Npe.loadNpeMetadata(b.data.cuePoint.nowplayingURL,b.data.cuePoint.artistName,b.data.cuePoint.cueTitle),Ba=b.data.cuePoint,a("#trackInfo").html('<div class="now-playing__title">'+Ba.cueTitle+'</div><div class="now-playing__artist">'+Ba.artistName+"</div>"),setTimeout(s,1e4),a(Ia).trigger("liveAudioTrack.gmr")}function V(a){oa("Stream Track has changed"),oa("Codec:"+a.data.cuePoint.audioTrack.codec()+" - Bitrate:"+a.data.cuePoint.audioTrack.bitRate())}function W(a){oa("New HLS cuepoint received"),oa("Track Id:"+a.data.cuePoint.hlsTrackId+" SegmentId:"+a.data.cuePoint.hlsSegmentId)}function X(a){ha("Commercial break...")}function Y(){a("#npeInfo").html(""),a("#asyncData").html("")}function Z(b){oa("Song History loaded"),a("#asyncData").html('<br><p><span class="label label-warning">Song History:</span>');var c,d='<table class="table table-striped"><thead><tr><th>Song title</th><th>Artist name</th><th>Time</th></tr></thead>';a.each(b.data.list,function(a,b){c=new Date(Number(b.cueTimeStart)),d+="<tr><td>"+b.cueTitle+"</td><td>"+b.artistName+"</td><td>"+c.toLocaleTimeString()+"</td></tr>"}),d+="</table></p>",a("#asyncData").html("<div>"+d+"</div>")}function $(b){a("#asyncData").html('<br><p><span class="label label-important">Song History is empty</span>')}function aa(b){oa("Song History loading error",!0),a("#asyncData").html('<br><p><span class="label label-important">Song History error</span>')}function ba(a){oa("Time Out Alert")}function ca(a){oa("Time Out Reached")}function da(a){oa("Configuration error",!0)}function ea(b){var c="";a.each(b.data.errors,function(a,b){c+="ERROR : "+b.data.error.message+"<br/>"}),a("#status").html('<p><span class="label label-important">'+c+"</span><p></p>")}function fa(a){oa("tdplayer::onStatus"),ha(a.data.status)}function ga(a){oa("tdplayer::onGeoBlocked"),ha(a.data.text)}function ha(b){oa(b),a("#status").html('<p><span class="label label-success">Status: '+b+"</span></p>")}function ia(b){var c=wa.version.major+"."+wa.version.minor+"."+wa.version.patch+"."+wa.version.flag,d='<p><span class="label label-info">Api version: '+c+" - Technology: "+b;wa.flash.available&&(d+=" - Your current version of flash plugin is: "+wa.flash.version.major+"."+wa.flash.version.minor+"."+wa.flash.version.rev),d+="</span></p>",a("#techInfo").html(d)}function ja(){return""===a("#pwaCallsign").val()||""===a("#pwaStreamId").val()?void alert("Please enter a Callsign and a streamid"):void wa.PlayerWebAdmin.load(a("#pwaCallsign").val(),a("#pwaStreamId").val())}function ka(b){oa("PlayerWebAdmin data loaded successfully"),a("#asyncData").html('<br><p><span class="label label-warning">PlayerWebAdmin:</span>');var c='<table class="table table-striped"><thead><tr><th>Key</th><th>Value</th></tr></thead>';for(var d in b.data.config)c+="<tr><td>"+d+"</td><td>"+b.data.config[d]+"</td></tr>";c+="</table></p>",a("#asyncData").html("<div>"+c+"</div>")}function la(){wa.addEventListener?(wa.addEventListener("ad-playback-start",J),wa.addEventListener("ad-playback-error",L),wa.addEventListener("ad-playback-complete",K),wa.addEventListener("ad-countdown",M),wa.addEventListener("vast-process-complete",N),wa.addEventListener("vpaid-ad-companions",O)):wa.attachEvent&&(wa.attachEvent("ad-playback-start",J),wa.attachEvent("ad-playback-error",L),wa.attachEvent("ad-playback-complete",K),wa.attachEvent("ad-countdown",M),wa.attachEvent("vast-process-complete",N),wa.attachEvent("vpaid-ad-companions",O))}function ma(){wa.removeEventListener?(wa.removeEventListener("ad-playback-start",J),wa.removeEventListener("ad-playback-error",L),wa.removeEventListener("ad-playback-complete",K),wa.removeEventListener("ad-countdown",M),wa.removeEventListener("vast-process-complete",N),wa.removeEventListener("vpaid-ad-companions",O)):wa.detachEvent&&(wa.detachEvent("ad-playback-start",J),wa.detachEvent("ad-playback-error",L),wa.detachEvent("ad-playback-complete",K),wa.detachEvent("ad-countdown",M),wa.detachEvent("vast-process-complete",N),wa.detachEvent("vpaid-ad-companions",O))}function na(){for(var a,c=[],d=b.location.href.slice(b.location.href.indexOf("?")+1).split("&"),e=0;e<d.length;e++)a=d[e].split("="),c.push(a[0]),c[a[0]]=a[1];return c}function oa(c,d){gmr.debug&&(b.console&&(d?console.error(c):console.log(c)),a("#debugInformation").append(c),a("#debugInformation").append("\n"))}function pa(){a("#debugInformation").html("")}function qa(){if("undefined"!=typeof Modernizr&&Modernizr.audio){var b=document.querySelectorAll(".content"),c=a(b);c.on("click",".podcast__btn--play",function(b){var c=a(b.currentTarget);q(b),ob(c.attr("data-mp3-src")),kb(),sb(c.attr("data-mp3-title"),c.attr("data-mp3-artist"),c.attr("data-mp3-hash"))}),c.on("click",".podcast__btn--pause",pb)}else{var d=a(".gmr-mediaelement-fallback audio"),e=a(".podcast__play");d.mediaelementplayer(),e.hide()}}function ra(){a.support.pjax&&a(document).pjax("a:not(.ab-item)",".main",{fragment:".main",maxCacheLength:500,timeout:1e4})}function sa(a){Ha===!0||!0===Fa||a.preventDefault()}function ta(){var a,b=document.querySelectorAll(".audio__progress"),c=0;for(a=0;a<b.length;++a)Ga.currentTime>0&&(c=Math.floor(100/Ga.duration*Ga.currentTime)),b[a].style.width=c+"%"}function ua(){var a,b,c,d,e=document.querySelectorAll(".audio__time--remaining"),f=parseInt(Ga.duration),g=parseInt(Ga.currentTime),h=new Date(2e3,1,1,0,0,0);for(isNaN(f)?f=g=0:isNaN(g)&&(g=0),h.setSeconds(f-g),b=h.getHours(),c=("0"+h.getMinutes()).slice(-2),d=("0"+h.getSeconds()).slice(-2),h=b>0?b+":"+c+":"+d:c+":"+d,a=0;a<e.length;++a)e[a].innerHTML=h}function va(){var a,b,c,d,e=document.querySelectorAll(".audio__time--elapsed"),f=parseInt(Ga.currentTime),g=new Date(2e3,1,1,0,0,0);for(g.setSeconds(isNaN(f)?0:f),a=g.getHours(),b=("0"+g.getMinutes()).slice(-2),c=("0"+g.getSeconds()).slice(-2),g=a>0?a+":"+b+":"+c:b+":"+c,d=0;d<e.length;++d)e[d].innerHTML=g}var wa,xa,ya,za,Aa,Ba,Ca,Da,Ea=a(document),Fa=(na().tech||"html5_flash","false"!=na().aSyncCuePointFallback,!1),Ga=!1,Ha=!1,Ia=document.querySelector("body"),Ja=document.getElementById("td_container"),Ka=document.getElementById("live-player"),La=document.querySelector(".live-stream__player"),Ma=document.getElementById("playButton"),Na=document.getElementById("pauseButton"),Oa=document.getElementById("resumeButton"),Pa=document.getElementById("loadButton"),Qa=document.querySelector(".podcast__btn--play"),Ra=document.querySelector(".podcast__btn--pause"),Sa=document.querySelector(".podcast-player"),Ta=document.getElementById("live-stream__listen-now"),Ua=document.getElementById("live-stream__now-playing"),Va=(document.getElementById("live-stream__login"),a(document.getElementById("trackInfo"))),Wa=document.getElementById("clearDebug"),Xa=document.getElementById("on-air"),Ya=document.getElementById("live-stream__status"),Za=document.getElementById("nowPlaying"),$a=document.getElementById("trackInfo"),_a=document.querySelector(".live-player__stream"),ab=null,bb=null,cb=(document.querySelector(".footer"),!1),db=(a(document.getElementById("live-player--volume")),1),eb=a(document.getElementById("js-audio-controls")),fb=a(document.getElementById("js-audio-volume")),gb=a(document.getElementById("js-audio-volume-button"));b.tdPlayerApiReady=function(){oa("--- TD Player API Loaded ---"),k()};var hb=function(){var a=Ta.textContent,c=document.getElementById("trackInfo"),d=document.getElementById("npeInfo");!0===Fa&&(Ga.pause(),c.innerHTML="",d.innerHTML="",kb(),r(),Fa=!1,i()),"Switch to Live Stream"===a&&(Ta.innerHTML="Listen Live"),b.innerWidth>=768&&D()};a(document).ready(function(){y()});var ib=a(".live-player__stream--current-name");ib.bind("DOMSubtreeModified",function(){oa("--- new stream select ---");var a=ib.text();Ca&&wa.stop(),!0===Fa&&hb(),d(a),Ka.classList.add("live-player--active"),m()});var jb=function(){"undefined"!=typeof wa&&"undefined"!=typeof wa.stop&&wa.stop()},kb=function(){a(".podcast__btn--play.playing").removeClass("playing"),a(".podcast__btn--pause.playing").removeClass("playing")},lb=function(){var b=".mp3-"+za;a(b+" .podcast__btn--play").addClass("playing"),a(b+" .podcast__btn--pause").addClass("playing")},mb=function(a){Ga.src=a},nb=function(){Fa=!0,jb(),Ga.play(),Ga.volume=Q(),qb(),rb(),kb(),m(),lb(),p(),g()},ob=function(a){ra(),a!==Ga.src&&mb(a),nb()},pb=function(){Ga.pause(),kb(),Fa=!1,o(),i()},qb=function(){var b=_.template('<div class="now-playing__title"><%- title %></div>'),c=a(".now-playing__title"),d='<div class="audio__title">',e='</div><div class="audio__time"><span class="audio__time--inline">(</span><div class="audio__time--elapsed"></div><span class="audio__time--inline"> / </span><div class="audio__time--remaining"></div><span class="audio__time--inline">)</span></div>';c.length>0?c.html(d+ya+e):Va.prepend(b({title:ya}))},rb=function(){var b=_.template('<div class="now-playing__artist"><%- artist %></div>'),c=a(".now-playing__artist");c.length>0?c.text(xa):Va.append(b({artist:xa}))},sb=function(a,b,c){ya=a,xa=b,za=c,qb(),rb(),lb()},tb=function(){"undefined"!=typeof Modernizr&&Modernizr.audio&&(Ga=new Audio,Ga.addEventListener?Ga.addEventListener("ended",function(){kb(),o(),i()}):Ga.attachEvent&&Ga.attachEvent("ended",function(){kb(),o(),i()}))};a(document).bind("pjax:click",sa),a(".audio__progress-bar").click(function(b){var c=a(this),d=c.width(),e=c.offset(),f=b.pageX-e.left,g=Math.floor(f/d*Ga.duration);Ga.currentTime=g}),tb(),qa(),Ga.addEventListener("timeupdate",function(){ta(),va(),ua()},!1),e(Qa,"click",p),e(Ra,"click",pb),a(document).on("pjax:end",function(){qa(),lb(),e(Qa,"click",p),e(Ra,"click",pb)})}(jQuery,window);