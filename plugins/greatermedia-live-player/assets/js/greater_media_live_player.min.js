var $=jQuery;!function(a,b){"use strict";function c(){is_gigya_user_logged_in()?a.support.pjax&&a(d).pjax("a:not(.ab-item)",".main",{fragment:".main",maxCacheLength:500,timeout:1e4}):gmr.wpLoggedIn&&a.support.pjax&&a(d).pjax("a:not(.ab-item)",".page-wrap",{fragment:".page-wrap",maxCacheLength:500,timeout:1e4})}var d=b.document,e=(d.querySelectorAll("body"),a("#playButton")),f=(a("#pauseButton"),a("#resumeButton")),g=a("#live-stream__listen-now"),h=a("#live-stream__login"),i=a(".header__account--btn");e.on("click",function(){c()}),f.on("click",function(){c()}),e.on("click",function(){is_gigya_user_logged_in()||(Cookies.set("gmlp_play_button_pushed",1),Cookies.set("gmr_play_live_audio",0))}),h.on("click",function(){is_gigya_user_logged_in()||(Cookies.set("gmlp_play_button_pushed",1),Cookies.set("gmr_play_live_audio",0))}),g.on("click",function(){is_gigya_user_logged_in()||(Cookies.set("gmlp_play_button_pushed",1),Cookies.set("gmr_play_live_audio",0))}),i.on("click",function(){is_gigya_user_logged_in()||Cookies.set("gmr_play_live_audio",0)})}(jQuery,window),function(a,b,c){"use strict";function d(a,b,c){null!=a&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c))}function e(){var b=gmr.intervals.live_streaming;b>0&&(tb("Live stream interval set"),ic=setInterval(function(){a(Nb).trigger("liveStreamPlaying.gmr"),tb("Live stream interval reached")},60*b*1e3))}function f(){var b=gmr.intervals.inline_audio;b>0&&(tb("Inline audio interval set"),hc=setInterval(function(){a(Nb).trigger("inlineAudioPlaying.gmr"),tb("Inline audio interval reached")},60*b*1e3))}function g(){clearInterval(ic),tb("Live stream interval off")}function h(){clearInterval(hc),tb("Inline audio interval off")}function i(){return bowser.firefox?["Flash","Html5"]:bowser.safari?["Html5","Flash"]:bowser.chrome?["Flash","Html5"]:["Html5","Flash"]}function j(){var a=i();console.log("+++ initPlayer - techPriority = ",a);var b={coreModules:[{id:"MediaPlayer",playerId:"td_container",isDebug:!1,techPriority:a,timeShift:{active:0,max_listening_time:35},geoTargeting:{desktop:{isActive:!1},iOS:{isActive:!1},android:{isActive:!1}},plugins:[{id:"vastAd"}]},{id:"NowPlayingApi"},{id:"Npe"},{id:"PlayerWebAdmin"},{id:"SyncBanners",elements:[{id:"td_synced_bigbox",width:300,height:250}]},{id:"TargetSpot"}]};require(["tdapi/base/util/Companions"],function(a){Jb=new a}),Bb=new TdPlayerApi(b),Bb.addEventListener?(Bb.addEventListener("player-ready",I),Bb.addEventListener("configuration-error",cb),Bb.addEventListener("module-error",db)):Bb.attachEvent&&(Bb.attachEvent("player-ready",I),Bb.attachEvent("configuration-error",cb),Bb.attachEvent("module-error",db)),Bb.loadModules()}function k(){null!=Sb&&d(Sb,kc,G),null!=Tb&&d(Tb,kc,F),null!=bc&&d(bc,kc,ub)}function l(){null!==Ob&&(Ob.classList.add("stream__active"),Rb.classList.add(!0===Kb&&b.innerWidth<=767?"live-player__login":"live-player__muted"),Tb.classList.contains("live-player__muted")||Tb.classList.add("live-player__muted"),Tb.classList.contains("resume__live")&&Tb.classList.remove("resume__live"),!0===Kb?(Zb.style.display="none",Yb.style.display="inline-block"):(Zb.style.display="inline-block",Yb.style.display="none"),!1===Kb&&null!=Ub&&Ub.classList.add("loading"),!0===Kb&&null!=Sb?Sb.classList.contains("live-player__muted")&&Sb.classList.remove("live-player__muted"):Sb.classList.add("live-player__muted"))}function m(){null!==Ob&&(Tb.classList.contains("live-player__muted")&&(Tb.classList.remove("live-player__muted"),Tb.classList.add("resume__live")),Yb.style.display="inline-block",Zb.style.display="none",Sb.classList.add("live-player__muted"))}function n(){null!==Ob&&(Rb.classList.add(!0===Kb&&b.innerWidth<=767?"live-player__login":"live-player__muted"),Nb.classList.contains("live-player--active")&&Nb.classList.remove("live-player--active"),Yb.style.display="inline-block",Zb.style.display="none",Sb.classList.add("live-player__muted"),Tb.classList.contains("live-player__muted")&&(Tb.classList.remove("live-player__muted"),Tb.classList.add("resume__live")),Tb.classList.add("resume__audio"))}function o(){var a,b=document.querySelectorAll(".audio__time");for(a=0;a<b.length;++a)b[a].classList.add("playing");null!=Qb&&Qb.classList.add("audio__playing"),null!=dc&&dc.classList.add("audio__playing"),null!=Pb&&Pb.classList.add("playing"),null!=ec&&ec.classList.add("playing"),null!=Yb&&setTimeout(function(){Yb.innerHTML="Switch to Live Stream"},1e3)}function p(b){var c,d=b.target,e=d.parentNode,f=e.nextElementSibling,g=f.nextElementSibling,h=document.querySelectorAll(".audio__time"),i=document.querySelector(".podcast__runtime");if(a(".playing__current").removeClass("playing__current"),null!=Xb&&(Nb.classList.contains("single-show")||Nb.classList.contains("post-type-archive-podcast")||Nb.classList.contains("single-podcast")))f.classList.add("playing__current"),g.classList.add("playing");else{for(c=0;c<h.length;++c)null!=h[c]&&(h[c].classList.add("playing"),h[c].classList.add("playing__current"));i.classList.add("playing")}}function q(){var a,b=document.querySelectorAll(".audio__time"),c=document.querySelectorAll(".podcast__runtime");for(a=0;a<b.length;++a)null!=b[a]&&b[a].classList.contains("playing")&&b[a].classList.remove("playing"),null!=b[a]&&b[a].classList.contains("playing__current")&&b[a].classList.remove("playing__current");for(null!=Qb&&Qb.classList.remove("audio__playing"),null!=dc&&dc.classList.remove("audio__playing"),null!=Pb&&Pb.classList.remove("playing"),a=0;a<c.length;++a)null!=c[a]&&c[a].classList.contains("playing")&&c[a].classList.remove("playing");null!=ec&&ec.classList.remove("playing")}function r(){b.innerWidth<=767&&(""===fc.innerHTML?(cc.classList.add("on-air__npe"),gc.classList.add("full__width")):cc.classList.contains("on-air__npe")&&(cc.classList.remove("on-air__npe"),gc.classList.remove("full__width")))}function s(){null!=Rb&&Rb.classList.add("play-btn--heartbeat"),null!=Pb&&Pb.classList.add("live-player--heartbeat")}function t(){null!=Rb&&Rb.classList.contains("play-btn--heartbeat")&&Rb.classList.remove("play-btn--heartbeat"),null!=Pb&&Pb.classList.contains("live-player--heartbeat")&&Pb.classList.remove("live-player--heartbeat")}function u(){jc=1,console.log("-- Player Initialized By Click ---")}function v(){jc=!0,console.log("-- Player Ready to Go ---")}function w(){is_gigya_user_logged_in()&&jc===!0&&(m(),b.innerWidth>=768?E():C())}function x(){is_gigya_user_logged_in()?(null!=Rb&&d(Rb,kc,function(){jc===!0?(m(),b.innerWidth>=768?D():B()):u()}),null!=Yb&&d(Yb,kc,lc)):(null!=Rb&&d(Rb,"click",function(){b.location.href=ac,v()}),null!=Yb&&d(Yb,"click",function(){b.location.href=ac}),null!=$b&&b.innerWidth<=767&&d($b,"click",function(){b.location.href=ac}))}function y(){var a=document.getElementById("live-stream__container");Nb.classList.add("vast-ad--playing"),null!=a&&a.classList.add("vast__pre-roll")}function z(){var a=document.getElementById("live-stream__container");Nb.classList.contains("vast-ad--playing")&&Nb.classList.remove("vast-ad--playing"),null!=a&&a.classList.remove("vast__pre-roll"),Cookies.set("gmr_play_live_audio",c),Cookies.set("gmr_play_live_audio",1,{expires:86400})}function A(){var a=gmr.streamUrl;lb(),kb(),Bb.stop(),Bb.skipAd(),Bb.playAd("vastAd",{url:a})}function B(){var a=gmr.callsign;return wb(),""===a?void alert("Please enter a Station"):(!0===Kb&&lc(),tb("playLiveStream - station="+a),y(),A(),void(Bb.addEventListener?Bb.addEventListener("ad-playback-complete",function(){z(),console.log("--- ad complete ---"),Hb&&Bb.stop(),Nb.classList.add("live-player--active"),Pb.classList.add("live-player--active"),Bb.play({station:a,timeShift:!0}),l()}):Bb.attachEvent&&Bb.attachEvent("ad-playback-complete",function(){z(),console.log("--- ad complete ---"),Hb&&Bb.stop(),Nb.classList.add("live-player--active"),Pb.classList.add("live-player--active"),Bb.play({station:a,timeShift:!0}),l()})))}function C(){var a=gmr.callsign;return""===a?void alert("Please enter a Station"):(!0===Kb&&lc(),tb("playLiveStream - station="+a),Hb&&Bb.stop(),Nb.classList.add("live-player--active"),Pb.classList.add("live-player--active"),Bb.play({station:a,timeShift:!0}),void l())}function D(){var a=gmr.callsign;if(wb(),!0===Kb)sc(),l();else{if(""===a)return void alert("Please enter a Station");tb("playLiveStream - station="+a),y(),A(),Bb.addEventListener?Bb.addEventListener("ad-playback-complete",function(){z(),console.log("--- ad complete ---"),Hb&&Bb.stop(),Nb.classList.add("live-player--active"),Pb.classList.add("live-player--active"),Bb.play({station:a,timeShift:!0}),l()}):Bb.attachEvent&&Bb.attachEvent("ad-playback-complete",function(){z(),console.log("--- ad complete ---"),Hb&&Bb.stop(),Nb.classList.add("live-player--active"),Pb.classList.add("live-player--active"),Bb.play({station:a,timeShift:!0}),l()})}}function E(){var a=gmr.callsign;if(wb(),!0===Kb)sc(),l();else{if(""===a)return void alert("Please enter a Station");tb("playLiveStream - station="+a),Hb&&Bb.stop(),Nb.classList.add("live-player--active"),Pb.classList.add("live-player--active"),Bb.play({station:a,timeShift:!0}),l()}}function F(){if(wb(),!0===Kb)sc(),l();else{var a=gmr.callsign;if(""===a)return void alert("Please enter a Station");tb("playLiveStream - station="+a),Hb&&Bb.stop(),Pb.classList.add("live-player--active"),Bb.play({station:a,timeShift:!0}),l()}}function G(){!0===Kb?(uc(),h()):(Mb=!1,Bb.pause(),g()),Pb.classList.contains("live-player--active")&&Pb.classList.remove("live-player--active"),n()}function H(){if(""===a("#songHistoryCallsignUser").val())return void alert("Please enter a Callsign");var b="hdConnection"==a("#songHistoryConnectionTypeSelect").val();Bb.NowPlayingApi.load({mount:a("#songHistoryCallsignUser").val(),hd:b,numberToFetch:15})}function I(){Bb.MediaPlayer!==c&&(k(),Bb.addEventListener?(Bb.addEventListener("track-cue-point",T),Bb.addEventListener("ad-break-cue-point",W),Bb.addEventListener("stream-track-change",U),Bb.addEventListener("hls-cue-point",V),Bb.addEventListener("stream-status",eb),Bb.addEventListener("stream-geo-blocked",fb),Bb.addEventListener("timeout-alert",ab),Bb.addEventListener("timeout-reach",bb),Bb.addEventListener("npe-song",mb),Bb.addEventListener("stream-select",R),Bb.addEventListener("stream-start",Q),Bb.addEventListener("stream-stop",S)):Bb.attachEvent&&(Bb.attachEvent("track-cue-point",T),Bb.attachEvent("ad-break-cue-point",W),Bb.attachEvent("stream-track-change",U),Bb.attachEvent("hls-cue-point",V),Bb.attachEvent("stream-status",eb),Bb.attachEvent("stream-geo-blocked",fb),Bb.attachEvent("timeout-alert",ab),Bb.attachEvent("timeout-reach",bb),Bb.attachEvent("npe-song",mb),Bb.attachEvent("stream-select",R),Bb.attachEvent("stream-start",Q),Bb.attachEvent("stream-stop",S)),Bb.setVolume(1),gb("Api Ready"),1===jc?(v(),w()):1===Cookies.get("gmlp_play_button_pushed")?(v(),w()):v(),b.innerWidth>=768&&(s(),setTimeout(t,2e3)),hb(Bb.MediaPlayer.tech.type),Bb.addEventListener?(Bb.addEventListener("list-loaded",Y),Bb.addEventListener("list-empty",Z),Bb.addEventListener("nowplaying-api-error",$)):Bb.attachEvent&&(Bb.attachEvent("list-loaded",Y),Bb.attachEvent("list-empty",Z),Bb.attachEvent("nowplaying-api-error",$)),a("#fetchSongHistoryByUserCallsignButton").click(function(){H()}),Bb.addEventListener?Bb.addEventListener("pwa-data-loaded",jb):Bb.attachEvent&&Bb.attachEvent("pwa-data-loaded",jb),a("#pwaButton").click(function(){ib()}))}function J(a){Fb=!0,gb("Advertising... Type="+a.data.type)}function K(){Fb=!1,a("#td_adserver_bigbox").empty(),a("#td_adserver_leaderboard").empty(),gb("Ready")}function L(){gb("Ready"),z();var a=gmr.callsign;Hb&&Bb.stop(),Pb.classList.add("live-player--active"),Bb.play({station:a,timeShift:!0}),l()}function M(a){tb("Ad countdown : "+a.data.countDown+" second(s)")}function N(a){tb("Vast Process complete");var b=a.data.companions;P(b)}function O(a){tb("Vpaid Ad Companions"),P(a.companions)}function P(b){if(b&&b.length>0){var c=-1,d=-1;a.each(b,function(a,b){300==parseInt(b.width)&&250==parseInt(b.height)?c=a:728==parseInt(b.width)&&90==parseInt(b.height)&&(d=a)}),c>-1&&Jb.loadVASTCompanionAd("td_adserver_bigbox",b[c]),d>-1&&Jb.loadVASTCompanionAd("td_adserver_leaderboard",b[d])}}function Q(){Hb=!0,Mb=!0,Ub.classList.contains("loading")&&Ub.classList.remove("loading"),Sb.classList.contains("live-player__muted")&&Sb.classList.remove("live-player__muted"),e()}function R(){a("#hasHQ").html(Bb.MediaPlayer.hasHQ().toString()),a("#isHQ").html(Bb.MediaPlayer.isHQ().toString()),a("#hasLow").html(Bb.MediaPlayer.hasLow().toString()),a("#isLow").html(Bb.MediaPlayer.isLow().toString())}function S(){Hb=!1,Mb=!1,X(),a("#trackInfo").html(""),a("#asyncData").html(""),a("#hasHQ").html("N/A"),a("#isHQ").html("N/A"),a("#hasLow").html("N/A"),a("#isLow").html("N/A"),g()}function T(b){tb("New Track cuepoint received"),tb("Title:"+b.data.cuePoint.cueTitle+" - Artist:"+b.data.cuePoint.artistName),console.log(b),Gb&&Gb!=b.data.cuePoint&&X(),b.data.cuePoint.nowplayingURL&&Bb.Npe.loadNpeMetadata(b.data.cuePoint.nowplayingURL,b.data.cuePoint.artistName,b.data.cuePoint.cueTitle),Gb=b.data.cuePoint,a("#trackInfo").html('<div class="now-playing__title">'+Gb.cueTitle+'</div><div class="now-playing__artist">'+Gb.artistName+"</div>"),setTimeout(r,1e4),a(Nb).trigger("liveAudioTrack.gmr")}function U(a){tb("Stream Track has changed"),tb("Codec:"+a.data.cuePoint.audioTrack.codec()+" - Bitrate:"+a.data.cuePoint.audioTrack.bitRate())}function V(a){tb("New HLS cuepoint received"),tb("Track Id:"+a.data.cuePoint.hlsTrackId+" SegmentId:"+a.data.cuePoint.hlsSegmentId),console.log(a)}function W(a){gb("Commercial break..."),console.log(a)}function X(){a("#npeInfo").html(""),a("#asyncData").html("")}function Y(b){tb("Song History loaded"),console.log(b.data),a("#asyncData").html('<br><p><span class="label label-warning">Song History:</span>');var c,d='<table class="table table-striped"><thead><tr><th>Song title</th><th>Artist name</th><th>Time</th></tr></thead>';a.each(b.data.list,function(a,b){c=new Date(Number(b.cueTimeStart)),d+="<tr><td>"+b.cueTitle+"</td><td>"+b.artistName+"</td><td>"+c.toLocaleTimeString()+"</td></tr>"}),d+="</table></p>",a("#asyncData").html("<div>"+d+"</div>")}function Z(){a("#asyncData").html('<br><p><span class="label label-important">Song History is empty</span>')}function $(b){tb("Song History loading error",!0),console.error(b),a("#asyncData").html('<br><p><span class="label label-important">Song History error</span>')}function ab(){tb("Time Out Alert")}function bb(){tb("Time Out Reached")}function cb(a){tb("Configuration error",!0),console.log(a)}function db(b){var c="";a.each(b.data.errors,function(a,b){c+="ERROR : "+b.data.error.message+"<br/>"}),a("#status").html('<p><span class="label label-important">'+c+"</span><p></p>")}function eb(a){console.log("tdplayer::onStatus"),gb(a.data.status)}function fb(a){console.log("tdplayer::onGeoBlocked"),gb(a.data.text)}function gb(b){tb(b),a("#status").html('<p><span class="label label-success">Status: '+b+"</span></p>")}function hb(b){var c=Bb.version.major+"."+Bb.version.minor+"."+Bb.version.patch+"."+Bb.version.flag,d='<p><span class="label label-info">Api version: '+c+" - Technology: "+b;Bb.flash.available&&(d+=" - Your current version of flash plugin is: "+Bb.flash.version.major+"."+Bb.flash.version.minor+"."+Bb.flash.version.rev),d+="</span></p>",a("#techInfo").html(d)}function ib(){return""===a("#pwaCallsign").val()||""===a("#pwaStreamId").val()?void alert("Please enter a Callsign and a streamid"):void Bb.PlayerWebAdmin.load(a("#pwaCallsign").val(),a("#pwaStreamId").val())}function jb(b){tb("PlayerWebAdmin data loaded successfully"),console.log(b),a("#asyncData").html('<br><p><span class="label label-warning">PlayerWebAdmin:</span>');var c='<table class="table table-striped"><thead><tr><th>Key</th><th>Value</th></tr></thead>';for(var d in b.data.config)console.log(d),c+="<tr><td>"+d+"</td><td>"+b.data.config[d]+"</td></tr>";c+="</table></p>",a("#asyncData").html("<div>"+c+"</div>")}function kb(){Bb.addEventListener?(Bb.addEventListener("ad-playback-start",J),Bb.addEventListener("ad-playback-error",L),Bb.addEventListener("ad-playback-complete",K),Bb.addEventListener("ad-countdown",M),Bb.addEventListener("vast-process-complete",N),Bb.addEventListener("vpaid-ad-companions",O)):Bb.attachEvent&&(Bb.attachEvent("ad-playback-start",J),Bb.attachEvent("ad-playback-error",L),Bb.attachEvent("ad-playback-complete",K),Bb.attachEvent("ad-countdown",M),Bb.attachEvent("vast-process-complete",N),Bb.attachEvent("vpaid-ad-companions",O))}function lb(){Bb.removeEventListener?(Bb.removeEventListener("ad-playback-start",J),Bb.removeEventListener("ad-playback-error",L),Bb.removeEventListener("ad-playback-complete",K),Bb.removeEventListener("ad-countdown",M),Bb.removeEventListener("vast-process-complete",N),Bb.removeEventListener("vpaid-ad-companions",O)):Bb.detachEvent&&(Bb.detachEvent("ad-playback-start",J),Bb.detachEvent("ad-playback-error",L),Bb.detachEvent("ad-playback-complete",K),Bb.detachEvent("ad-countdown",M),Bb.detachEvent("vast-process-complete",N),Bb.detachEvent("vpaid-ad-companions",O))}function mb(a){console.log("tdplayer::onNPESong"),console.log(a),Ib=a.data.song,nc=Ib.artist(),nc.addEventListener?nc.addEventListener("artist-complete",ob):nc.attachEvent&&nc.attachEvent("artist-complete",ob);var b=rb();nb(b,!1)}function nb(b,c){a("#asyncData").empty();var d=c?"asyncData":"npeInfo",e=a("#"+d);c===!1&&e.html('<span class="label label-inverse">Npe Info:</span>'),e.append(b)}function ob(){nc.addEventListener?nc.addEventListener("picture-complete",pb):nc.attachEvent&&nc.attachEvent("picture-complete",pb);for(var a=nc.getPictures(),b=[],c=0;c<a.length;c++)b.push(a[c].id);b.length>0&&nc.fetchPictureByIds(b);var d=qb();nb(d,!0)}function pb(b){console.log("tdplayer::onArtistPictureComplete"),console.log(b);for(var c='<span class="label label-inverse">Photos:</span><br>',d=0;d<b.length;d++)b[d].getFiles()&&(c+='<a href="'+b[d].getFiles()[0].url+'" rel="lightbox[npe]" title="Click on the right side of the image to move forward."><img src="'+b[d].getFiles()[0].url+'" width="125" /></a>&nbsp;');a("#asyncData").append(c)}function qb(){if(Ib!==c){var a='<span class="label label-inverse">Artist:</span>';a+="<ul><li>Artist id: "+Ib.artist().id+"</li>",a+="<li>Artist birth date: "+Ib.artist().getBirthDate()+"</li>",a+="<li>Artist end date: "+Ib.artist().getEndDate()+"</li>",a+="<li>Artist begin place: "+Ib.artist().getBeginPlace()+"</li>",a+="<li>Artist end place: "+Ib.artist().getEndPlace()+"</li>",a+="<li>Artist is group ?: "+Ib.artist().getIsGroup()+"</li>",a+="<li>Artist country: "+Ib.artist().getCountry()+"</li>";for(var b=Ib.artist().getAlbums(),d=0;d<b.length;d++)a+="<li>Album "+(d+1)+": "+b[d].getTitle()+"</li>";var e=Ib.artist().getSimilar();for(d<e.length;d++;)a+="<li>Similar artist "+(d+1)+": "+e[d].name+"</li>";var f=Ib.artist().getMembers();for(d<f.length;d++;)a+="<li>Member "+(d+1)+": "+f[d].name+"</li>";a+="<li>Artist website: "+Ib.artist().getWebsite()+"</li>",a+="<li>Artist twitter: "+Ib.artist().getTwitterUsername()+"</li>",a+="<li>Artist facebook: "+Ib.artist().getFacebookUrl()+"</li>",a+="<li>Artist biography: "+Ib.artist().getBiography().substring(0,2e3)+"...</small>";var g=Ib.artist().getGenres();for(d<g.length;d++;)a+="<li>Genre "+(d+1)+": "+g[d]+"</li>";return a+="</ul>"}return'<span class="label label-important">The artist information is undefined</span>'}function rb(){var a="NPE Data undefined";if(Ib!==c&&Ib.album()){var b="";null!=Ib.album().getBuyUrl()&&(b='<a target="_blank" title="'+Ib.album().getBuyUrl()+'" href="'+Ib.album().getBuyUrl()+'">Buy on iTunes</a><br/>'),a="<p><b>Album:</b> "+Ib.album().getTitle()+"<br/>"+b+'<img src="'+Ib.album().getCoverArtOriginal().url+'" style="height:100px" /></p>'}return a}function sb(){for(var a,c=[],d=b.location.href.slice(b.location.href.indexOf("?")+1).split("&"),e=0;e<d.length;e++)a=d[e].split("="),c.push(a[0]),c[a[0]]=a[1];return c}function tb(b,c){c?console.error(b):console.log(b),a("#debugInformation").append(b),a("#debugInformation").append("\n")}function ub(){a("#debugInformation").html("")}function vb(){if("undefined"!=typeof Modernizr&&Modernizr.audio){var b=document.querySelectorAll(".content"),c=a(b);c.on("click",".podcast__btn--play",function(b){var c=a(b.currentTarget);p(b),tc(c.attr("data-mp3-src")),pc(),xc(c.attr("data-mp3-title"),c.attr("data-mp3-artist"),c.attr("data-mp3-hash"))}),c.on("click",".podcast__btn--pause",uc)}else{var d=a(".gmr-mediaelement-fallback audio"),e=a(".podcast__play");d.mediaelementplayer(),e.hide()}}function wb(){is_gigya_user_logged_in()?a.support.pjax&&a(document).pjax("a:not(.ab-item)",".main",{fragment:".main",maxCacheLength:500,timeout:1e4}):gmr.wpLoggedIn&&a.support.pjax&&a(document).pjax("a:not(.ab-item)",".page-wrap",{fragment:".page-wrap",maxCacheLength:500,timeout:1e4})}function xb(a){Mb===!0||!0===Kb||a.preventDefault()}function yb(){var a,b=document.querySelectorAll(".audio__progress"),c=0;for(a=0;a<b.length;++a)Lb.currentTime>0&&(c=Math.floor(100/Lb.duration*Lb.currentTime)),b[a].style.width=c+"%"}function zb(){var a,b,c,d=document.querySelectorAll(".audio__time--remaining"),e=parseInt(Lb.duration),f=parseInt(Lb.currentTime),g=e-f;for(a=0;a<d.length;++a)b=g%60,b=isNaN(b)?"00":10>b?"0"+b:b,c=Math.floor(g/60)%60,isNaN(c)&&(c="0"),d[a].innerHTML=c+":"+b}function Ab(){var a,b=document.querySelectorAll(".audio__time--elapsed"),c=parseInt(Lb.currentTime%60),d=parseInt(Lb.currentTime/60%60);for(a=0;a<b.length;++a)b[a].innerHTML=10>c?d+":0"+c:d+":"+c}var Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb=(sb().tech||"html5_flash","false"==sb().aSyncCuePointFallback?!1:!0,!1),Lb=!1,Mb=!1,Nb=document.querySelector("body"),Ob=document.getElementById("td_container"),Pb=document.getElementById("live-player"),Qb=document.querySelector(".live-stream__player"),Rb=document.getElementById("playButton"),Sb=document.getElementById("pauseButton"),Tb=document.getElementById("resumeButton"),Ub=document.getElementById("loadButton"),Vb=document.querySelector(".podcast__btn--play"),Wb=document.querySelector(".podcast__btn--pause"),Xb=document.querySelector(".podcast-player"),Yb=document.getElementById("live-stream__listen-now"),Zb=document.getElementById("live-stream__now-playing"),$b=document.getElementById("live-stream__login"),_b=a(document.getElementById("trackInfo")),ac=gigya_profile_path("login"),bc=document.getElementById("clearDebug"),cc=document.getElementById("on-air"),dc=document.getElementById("live-stream__status"),ec=document.getElementById("nowPlaying"),fc=document.getElementById("trackInfo"),gc=document.querySelector(".live-player__stream"),hc=null,ic=null,jc=(document.querySelector(".footer"),!1),kc="click";b.tdPlayerApiReady=function(){console.log("--- TD Player API Loaded ---"),j()};var lc=function(){var a=Yb.textContent,c=document.getElementById("trackInfo"),d=document.getElementById("npeInfo");!0===Kb&&(Lb.pause(),c.innerHTML="",d.innerHTML="",pc(),q(),Kb=!1,h()),"Switch to Live Stream"===a&&(Yb.innerHTML="Listen Live"),b.innerWidth>=768&&E()};a(document).ready(function(){x()});var mc=a(".live-player__stream--current-name");mc.bind("DOMSubtreeModified",function(){console.log("--- new stream select ---");var a=mc.text();Hb&&Bb.stop(),!0===Kb&&lc(),Bb.play({station:a,timeShift:!0}),Pb.classList.add("live-player--active"),l()});var nc,oc=function(){"undefined"!=typeof Bb&&"undefined"!=typeof Bb.stop&&Bb.stop()},pc=function(){a(".podcast__btn--play.playing").removeClass("playing"),a(".podcast__btn--pause.playing").removeClass("playing")},qc=function(){var b=".mp3-"+Eb;a(b+" .podcast__btn--play").addClass("playing"),a(b+" .podcast__btn--pause").addClass("playing")},rc=function(a){Lb.src=a},sc=function(){Kb=!0,oc(),Lb.play(),vc(),wc(),pc(),l(),qc(),o(),f()},tc=function(a){wb(),a!==Lb.src&&rc(a),sc()},uc=function(){Lb.pause(),pc(),Kb=!1,n(),h()},vc=function(){var b=_.template('<div class="now-playing__title"><%- title %></div>'),c=a(".now-playing__title"),d='<div class="audio__title">',e='</div><div class="audio__time"><span class="audio__time--inline">(</span><div class="audio__time--elapsed"></div><span class="audio__time--inline"> / </span><div class="audio__time--remaining"></div><span class="audio__time--inline">)</span></div>';c.length>0?c.html(d+Db+e):_b.prepend(b({title:Db}))},wc=function(){var b=_.template('<div class="now-playing__artist"><%- artist %></div>'),c=a(".now-playing__artist");c.length>0?c.text(Cb):_b.append(b({artist:Cb}))},xc=function(a,b,c){Db=a,Cb=b,Eb=c,vc(),wc(),qc()},yc=function(){"undefined"!=typeof Modernizr&&Modernizr.audio&&(Lb=new Audio,Lb.addEventListener?Lb.addEventListener("ended",function(){pc(),n(),h()}):Lb.attachEvent&&Lb.attachEvent("ended",function(){pc(),n(),h()}))};a(document).bind("pjax:click",xb),yc(),vb(),Lb.addEventListener("timeupdate",function(){yb(),Ab(),zb()},!1),d(Vb,kc,o),d(Wb,kc,uc),a(document).on("pjax:end",function(){vb(),qc(),d(Vb,kc,o),d(Wb,kc,uc)})}(jQuery,window);