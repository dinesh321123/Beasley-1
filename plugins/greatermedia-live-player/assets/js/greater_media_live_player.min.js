!function(a,b){"undefined"!=typeof module&&module.exports?module.exports.browser=b():"function"==typeof define&&define.amd?define(b):this[a]=b()}("bowser",function(){function a(a){function c(b){var c=a.match(b);return c&&c.length>1&&c[1]||""}var d,e=c(/(ipod|iphone|ipad)/i).toLowerCase(),f=/like android/i.test(a),g=!f&&/android/i.test(a),h=c(/version\/(\d+(\.\d+)?)/i),i=/tablet/i.test(a),j=!i&&/[^-]mobi/i.test(a);/opera|opr/i.test(a)?d={name:"Opera",opera:b,version:h||c(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(a)?d={name:"Windows Phone",windowsphone:b,msie:b,version:c(/iemobile\/(\d+(\.\d+)?)/i)}:/msie|trident/i.test(a)?d={name:"Internet Explorer",msie:b,version:c(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome|crios|crmo/i.test(a)?d={name:"Chrome",chrome:b,version:c(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:e?(d={name:"iphone"==e?"iPhone":"ipad"==e?"iPad":"iPod"},h&&(d.version=h)):/sailfish/i.test(a)?d={name:"Sailfish",sailfish:b,version:c(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(a)?d={name:"SeaMonkey",seamonkey:b,version:c(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(a)?(d={name:"Firefox",firefox:b,version:c(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(a)&&(d.firefoxos=b)):/silk/i.test(a)?d={name:"Amazon Silk",silk:b,version:c(/silk\/(\d+(\.\d+)?)/i)}:g?d={name:"Android",version:h}:/phantom/i.test(a)?d={name:"PhantomJS",phantom:b,version:c(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(a)||/rim\stablet/i.test(a)?d={name:"BlackBerry",blackberry:b,version:h||c(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(a)?(d={name:"WebOS",webos:b,version:h||c(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(a)&&(d.touchpad=b)):d=/bada/i.test(a)?{name:"Bada",bada:b,version:c(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(a)?{name:"Tizen",tizen:b,version:c(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||h}:/safari/i.test(a)?{name:"Safari",safari:b,version:h}:{},/(apple)?webkit/i.test(a)?(d.name=d.name||"Webkit",d.webkit=b,!d.version&&h&&(d.version=h)):!d.opera&&/gecko\//i.test(a)&&(d.name=d.name||"Gecko",d.gecko=b,d.version=d.version||c(/gecko\/(\d+(\.\d+)?)/i)),g||d.silk?d.android=b:e&&(d[e]=b,d.ios=b);var k="";e?(k=c(/os (\d+([_\s]\d+)*) like mac os x/i),k=k.replace(/[_\s]/g,".")):g?k=c(/android[ \/-](\d+(\.\d+)*)/i):d.windowsphone?k=c(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):d.webos?k=c(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):d.blackberry?k=c(/rim\stablet\sos\s(\d+(\.\d+)*)/i):d.bada?k=c(/bada\/(\d+(\.\d+)*)/i):d.tizen&&(k=c(/tizen[\/\s](\d+(\.\d+)*)/i)),k&&(d.osversion=k);var l=k.split(".")[0];return i||"ipad"==e||g&&(3==l||4==l&&!j)||d.silk?d.tablet=b:(j||"iphone"==e||"ipod"==e||g||d.blackberry||d.webos||d.bada)&&(d.mobile=b),d.msie&&d.version>=10||d.chrome&&d.version>=20||d.firefox&&d.version>=20||d.safari&&d.version>=6||d.opera&&d.version>=10||d.ios&&d.osversion&&d.osversion.split(".")[0]>=6||d.blackberry&&d.version>=10.1?d.a=b:d.msie&&d.version<10||d.chrome&&d.version<20||d.firefox&&d.version<20||d.safari&&d.version<6||d.opera&&d.version<10||d.ios&&d.osversion&&d.osversion.split(".")[0]<6?d.c=b:d.x=b,d}var b=!0,c=a("undefined"!=typeof navigator?navigator.userAgent:"");return c._detect=a,c}),function(a,b,c){"use strict";function d(){a.support.pjax&&a(e).pjax("a:not(.ab-item)",".main",{fragment:".main",maxCacheLength:500,timeout:1e4})}var e=b.document,f=(e.querySelectorAll("body"),a("#playButton")),g=(a("#pauseButton"),a("#resumeButton"));a("#live-stream__listen-now"),a("#live-stream__login"),a(".header__account--btn");f.on("click",function(){d()}),g.on("click",function(){d()})}(jQuery,window),function(a,b,c,d){"use strict";function e(a){pa("tdplayer::play: "+a),xa.play({station:a,timeShift:!0}),Ga.trigger("player:starts")}function f(a,b,c){null!=a&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c))}function g(){var b=gmr.intervals.live_streaming;b>0&&(pa("Live stream interval set"),db=setInterval(function(){a(Ka).trigger("liveStreamPlaying.gmr"),pa("Live stream interval reached")},60*b*1e3))}function h(){var b=gmr.intervals.inline_audio;b>0&&(pa("Inline audio interval set"),cb=setInterval(function(){a(Ka).trigger("inlineAudioPlaying.gmr"),pa("Inline audio interval reached")},60*b*1e3))}function i(){clearInterval(db),pa("Live stream interval off")}function j(){clearInterval(cb),pa("Inline audio interval off")}function k(){return bowser.firefox?["Flash","Html5"]:bowser.safari?["Html5","Flash"]:bowser.chrome?["Html5","Flash"]:["Html5","Flash"]}function l(){var a=k();pa("+++ initPlayer - techPriority = "+a.join(", "));var c={coreModules:[{id:"MediaPlayer",playerId:"td_container",isDebug:!1,techPriority:a,timeShift:{active:0,max_listening_time:35},geoTargeting:{desktop:{isActive:!1},iOS:{isActive:!1},android:{isActive:!1}},plugins:[{id:"vastAd"}]},{id:"NowPlayingApi"},{id:"Npe"},{id:"PlayerWebAdmin"},{id:"SyncBanners",elements:[{id:"td_synced_bigbox",width:300,height:250}]},{id:"TargetSpot"}]};require(["tdapi/base/util/Companions"],function(a){Ea=new a}),b.player=xa=new TdPlayerApi(c),xa.addEventListener?(xa.addEventListener("player-ready",I),xa.addEventListener("configuration-error",ea),xa.addEventListener("module-error",fa)):xa.attachEvent&&(xa.attachEvent("player-ready",I),xa.attachEvent("configuration-error",ea),xa.attachEvent("module-error",fa)),xa.loadModules()}function m(){null!=Pa&&f(Pa,"click",G),null!=Qa&&f(Qa,"click",F),null!=Ya&&f(Ya,"click",qa)}function n(){null!==La&&(La.classList.add("stream__active"),!0===Ha&&b.innerWidth<=767?Oa.classList.add("live-player__login"):Oa.classList.add("live-player__muted"),gb.removeClass("-playing -paused"),gb.addClass("-loading"),jb.removeClass("-show"),Qa.classList.contains("live-player__muted")||Qa.classList.add("live-player__muted"),Qa.classList.contains("resume__live")&&Qa.classList.remove("resume__live"),!0===Ha?(a(Wa).removeClass("-show"),a(Va).addClass("-show"),nb.addClass("-show")):(a(Wa).addClass("-show"),a(Va).removeClass("-show"),nb.removeClass("-show")),!1===Ha&&null!=Ra&&Ra.classList.add("loading"),!0===Ha&&null!=Pa?Pa.classList.contains("live-player__muted")&&Pa.classList.remove("live-player__muted"):Pa.classList.add("live-player__muted"))}function o(){null!==La&&(gb.removeClass("-playing -loading -paused"),jb.removeClass("-show"),kb.text(""),lb.text(""),Qa.classList.contains("live-player__muted")&&(Qa.classList.remove("live-player__muted"),Qa.classList.add("resume__live")),a(Va).addClass("-show"),a(Wa).removeClass("-show"),Pa.classList.add("live-player__muted"))}function p(){null!==La&&(gb.removeClass("-playing -loading"),gb.addClass("-paused"),jb.addClass("-show"),!0===Ha&&b.innerWidth<=767?Oa.classList.add("live-player__login"):Oa.classList.add("live-player__muted"),Ka.classList.contains("live-player--active")&&Ka.classList.remove("live-player--active"),Pa.classList.add("live-player__muted"),Qa.classList.contains("live-player__muted")&&(Qa.classList.remove("live-player__muted"),Qa.classList.add("resume__live")),Qa.classList.add("resume__audio"))}function q(){var b,d=c.querySelectorAll(".audio__time");for(b=0;b<d.length;++b)d[b].classList.add("playing");null!=Na&&Na.classList.add("audio__playing"),null!=$a&&$a.classList.add("audio__playing"),null!=Ma&&Ma.classList.add("playing"),null!=_a&&_a.classList.add("playing"),a(Va).removeClass("-show"),a(Wa).addClass("-show"),nb.addClass("-show"),gb.removeClass("-loading -paused"),gb.addClass("-playing")}function r(b){var d,e=b.target,f=a(e).parents(".podcast-player"),g=e.parentNode,h=g.nextElementSibling,i=h.nextElementSibling,j=f.find(".podcast__play .audio__time"),k=c.querySelector(".podcast__runtime"),l=g.parentNode,m=l.nextElementSibling,n=m.querySelector(".audio__time");if(a(".playing__current").removeClass("playing__current"),null!=Ua&&(Ka.classList.contains("single-show")||Ka.classList.contains("post-type-archive-podcast")||Ka.classList.contains("single-podcast")||Ka.classList.contains("home")))h.classList.add("playing__current"),i.classList.add("playing");else if(null==Ua||(Ka.classList.contains("single-show")||Ka.classList.contains("post-type-archive-podcast")||Ka.classList.contains("single-podcast"))){for(d=0;d<j.length;++d)null!=j[d]&&(j[d].classList.add("playing"),j[d].classList.add("playing__current"));k.classList.add("playing")}else h.classList.add("playing__current"),n.classList.add("playing__current")}function s(){var a,b=c.querySelectorAll(".audio__time"),d=c.querySelectorAll(".podcast__runtime");for(a=0;a<b.length;++a)null!=b[a]&&b[a].classList.contains("playing")&&b[a].classList.remove("playing"),null!=b[a]&&b[a].classList.contains("playing__current")&&b[a].classList.remove("playing__current");for(null!=Na&&Na.classList.remove("audio__playing"),null!=$a&&$a.classList.remove("audio__playing"),null!=Ma&&Ma.classList.remove("playing"),a=0;a<d.length;++a)null!=d[a]&&d[a].classList.contains("playing")&&d[a].classList.remove("playing");null!=_a&&_a.classList.remove("playing")}function t(){b.innerWidth<=767&&(""===ab.innerHTML?(Za.classList.add("on-air__npe"),bb.classList.add("full__width")):Za.classList.contains("on-air__npe")&&(Za.classList.remove("on-air__npe"),bb.classList.remove("full__width")))}function u(){null!=Oa&&Oa.classList.add("play-btn--heartbeat"),null!=Ma&&Ma.classList.add("live-player--heartbeat")}function v(){null!=Oa&&Oa.classList.contains("play-btn--heartbeat")&&Oa.classList.remove("play-btn--heartbeat"),null!=Ma&&Ma.classList.contains("live-player--heartbeat")&&Ma.classList.remove("live-player--heartbeat")}function w(){eb=1,pa("-- Player Initialized By Click ---")}function x(){eb=!0,pa("-- Player Ready to Go ---")}function y(){eb===!0&&(o(),b.innerWidth>=768?E():D())}function z(){null!=Oa&&f(Oa,"click",function(){eb===!0?(o(),b.innerWidth>=768?E():D()):w()}),null!=Va&&f(Va,"click",ob)}function A(){var a=c.getElementById("live-stream__container");Ka.classList.add("vast-ad--playing"),null!=a&&a.classList.add("vast__pre-roll")}function B(){var a=c.getElementById("live-stream__container");Ka.classList.contains("vast-ad--playing")&&Ka.classList.remove("vast-ad--playing"),null!=a&&a.classList.remove("vast__pre-roll"),Cookies.set("gmr_play_live_audio",d),Cookies.set("gmr_play_live_audio",1,{expires:86400})}function C(){var a=gmr.streamUrl;na(),ma(),xa.stop(),xa.skipAd(),xa.playAd("vastAd",{url:a}),setTimeout(function(){this.stop()},25e3)}function D(){var a=gmr.callsign;return sa(),""===a?void alert("Please enter a Station"):(!0===Ha&&ob(),pa("playLiveStream - station="+a),A(),C(),void(xa.addEventListener?xa.addEventListener("ad-playback-complete",function(){B(),pa("--- ad complete ---"),Da&&xa.stop(),Ka.classList.add("live-player--active"),Ma.classList.add("live-player--active"),e(a),n()}):xa.attachEvent&&xa.attachEvent("ad-playback-complete",function(){B(),pa("--- ad complete ---"),Da&&xa.stop(),Ka.classList.add("live-player--active"),Ma.classList.add("live-player--active"),e(a),n()})))}function E(){var a=gmr.callsign;if(sa(),!0===Ha)ub(),n();else{if(""===a)return void alert("Please enter a Station");pa("playLiveStream - station="+a),A(),C(),xa.addEventListener?xa.addEventListener("ad-playback-complete",function(){B(),pa("--- ad complete ---"),Da&&xa.stop(),Ka.classList.add("live-player--active"),Ma.classList.add("live-player--active"),e(a),n()}):xa.attachEvent&&xa.attachEvent("ad-playback-complete",function(){B(),pa("--- ad complete ---"),Da&&xa.stop(),Ka.classList.add("live-player--active"),Ma.classList.add("live-player--active"),e(a),n()})}}function F(){if(sa(),!0===Ha)ub(),n();else{var a=gmr.callsign;if(""===a)return void alert("Please enter a Station");pa("playLiveStream - station="+a),Da&&xa.stop(),Ma.classList.add("live-player--active"),e(a),n()}}function G(){!0===Ha?(wb(),j()):(Ja=!1,xa.pause(),i()),Ma.classList.contains("live-player--active")&&Ma.classList.remove("live-player--active"),p()}function H(){if(""===a("#songHistoryCallsignUser").val())return void alert("Please enter a Callsign");var b="hdConnection"==a("#songHistoryConnectionTypeSelect").val();xa.NowPlayingApi.load({mount:a("#songHistoryCallsignUser").val(),hd:b,numberToFetch:15})}function I(){xa.MediaPlayer!==d&&(m(),xa.addEventListener?(xa.addEventListener("track-cue-point",V),xa.addEventListener("ad-break-cue-point",Y),xa.addEventListener("stream-track-change",W),xa.addEventListener("hls-cue-point",X),xa.addEventListener("stream-status",ga),xa.addEventListener("stream-geo-blocked",ha),xa.addEventListener("timeout-alert",ca),xa.addEventListener("timeout-reach",da),xa.addEventListener("stream-select",T),xa.addEventListener("stream-start",S),xa.addEventListener("stream-stop",U),xa.addEventListener("stream-config-error",J),xa.addEventListener("stream-config-load-error",J),xa.addEventListener("stream-fail",J),xa.addEventListener("stream-error",J)):xa.attachEvent&&(xa.attachEvent("track-cue-point",V),xa.attachEvent("ad-break-cue-point",Y),xa.attachEvent("stream-track-change",W),xa.attachEvent("hls-cue-point",X),xa.attachEvent("stream-status",ga),xa.attachEvent("stream-geo-blocked",ha),xa.attachEvent("timeout-alert",ca),xa.attachEvent("timeout-reach",da),xa.attachEvent("stream-select",T),xa.attachEvent("stream-start",S),xa.attachEvent("stream-stop",U),xa.attachEvent("stream-config-error",J),xa.attachEvent("stream-config-load-error",J),xa.attachEvent("stream-fail",J),xa.attachEvent("stream-error",J)),xa.setVolume(1),ia("Api Ready"),1===eb?(x(),y()):1===Cookies.get("gmlp_play_button_pushed")?(x(),y()):x(),b.innerWidth>=768&&(u(),setTimeout(v,2e3)),ja(xa.MediaPlayer.tech.type),xa.addEventListener?(xa.addEventListener("list-loaded",$),xa.addEventListener("list-empty",aa),xa.addEventListener("nowplaying-api-error",ba)):xa.attachEvent&&(xa.attachEvent("list-loaded",$),xa.attachEvent("list-empty",aa),xa.attachEvent("nowplaying-api-error",ba)),a("#fetchSongHistoryByUserCallsignButton").click(function(){H()}),xa.addEventListener?xa.addEventListener("pwa-data-loaded",la):xa.attachEvent&&xa.attachEvent("pwa-data-loaded",la),a("#pwaButton").click(function(){ka()}),bowser.ios?(Ma.classList.add("no-volume-control"),hb.hide()):(hb.find('input[type="range"]').val(R()).change(function(){fb=parseFloat(a(this).val()),isNaN(fb)&&(fb=1),Da&&xa.setVolume(fb),Ia&&(Ia.volume=fb),"undefined"!=typeof localStorage&&localStorage.setItem("gmr-live-player-volume",fb)}),ib.click(function(){hb.toggleClass("-open")})))}function J(a){pa("Stream error",1),pa(a)}function K(a){Ba=!0,ia("Advertising... Type="+a.data.type)}function L(b){Ba=!1,a("#td_adserver_bigbox").empty(),a("#td_adserver_leaderboard").empty(),ia("Ready")}function M(a){ia("Ready"),B();var b=gmr.callsign;Da&&xa.stop(),Ma.classList.add("live-player--active"),e(b),n()}function N(a){pa("Ad countdown : "+a.data.countDown+" second(s)")}function O(a){pa("Vast Process complete");var b=a.data.companions;Q(b)}function P(a){pa("Vpaid Ad Companions"),Q(a.companions)}function Q(b){if(b&&b.length>0){var c=-1,d=-1;a.each(b,function(a,b){300==parseInt(b.width)&&250==parseInt(b.height)?c=a:728==parseInt(b.width)&&90==parseInt(b.height)&&(d=a)}),c>-1&&Ea.loadVASTCompanionAd("td_adserver_bigbox",b[c]),d>-1&&Ea.loadVASTCompanionAd("td_adserver_leaderboard",b[d])}}function R(){var a=fb;return"undefined"!=typeof localStorage&&(a=localStorage.getItem("gmr-live-player-volume"),null===a?a=1:(a=parseFloat(a),isNaN(a)&&(a=1))),a}function S(){Da=!0,Ja=!0,gb.removeClass("-loading -paused"),gb.addClass("-playing"),Ra.classList.contains("loading")&&Ra.classList.remove("loading"),Pa.classList.contains("live-player__muted")&&Pa.classList.remove("live-player__muted"),g(),xa.setVolume(R())}function T(){a("#hasHQ").html(xa.MediaPlayer.hasHQ().toString()),a("#isHQ").html(xa.MediaPlayer.isHQ().toString()),a("#hasLow").html(xa.MediaPlayer.hasLow().toString()),a("#isLow").html(xa.MediaPlayer.isLow().toString())}function U(){Da=!1,Ja=!1,Z(),a("#trackInfo").html(""),a("#asyncData").html(""),a("#hasHQ").html("N/A"),a("#isHQ").html("N/A"),a("#hasLow").html("N/A"),a("#isLow").html("N/A"),i()}function V(b){pa("New Track cuepoint received"),pa("Title: "+b.data.cuePoint.cueTitle+" - Artist: "+b.data.cuePoint.artistName),kb.text(b.data.cuePoint.cueTitle),lb.text(b.data.cuePoint.artistName),Ca&&Ca!=b.data.cuePoint&&Z(),b.data.cuePoint.nowplayingURL&&xa.Npe.loadNpeMetadata(b.data.cuePoint.nowplayingURL,b.data.cuePoint.artistName,b.data.cuePoint.cueTitle),Ca=b.data.cuePoint,a("#trackInfo").html('<div class="now-playing__title">'+Ca.cueTitle+'</div><div class="now-playing__artist">'+Ca.artistName+"</div>"),setTimeout(t,1e4),a(Ka).trigger("liveAudioTrack.gmr")}function W(a){pa("Stream Track has changed"),pa("Codec:"+a.data.cuePoint.audioTrack.codec()+" - Bitrate:"+a.data.cuePoint.audioTrack.bitRate())}function X(a){pa("New HLS cuepoint received"),pa("Track Id:"+a.data.cuePoint.hlsTrackId+" SegmentId:"+a.data.cuePoint.hlsSegmentId)}function Y(a){ia("Commercial break...")}function Z(){a("#npeInfo").html(""),a("#asyncData").html("")}function $(b){pa("Song History loaded"),a("#asyncData").html('<br><p><span class="label label-warning">Song History:</span>');var c,d='<table class="table table-striped"><thead><tr><th>Song title</th><th>Artist name</th><th>Time</th></tr></thead>';a.each(b.data.list,function(a,b){c=new Date(Number(b.cueTimeStart)),d+="<tr><td>"+b.cueTitle+"</td><td>"+b.artistName+"</td><td>"+c.toLocaleTimeString()+"</td></tr>"}),d+="</table></p>",a("#asyncData").html("<div>"+d+"</div>")}function aa(b){a("#asyncData").html('<br><p><span class="label label-important">Song History is empty</span>')}function ba(b){pa("Song History loading error",!0),a("#asyncData").html('<br><p><span class="label label-important">Song History error</span>')}function ca(a){pa("Time Out Alert")}function da(a){pa("Time Out Reached")}function ea(a){pa("Configuration error",!0)}function fa(b){var c="";a.each(b.data.errors,function(a,b){c+="ERROR : "+b.data.error.message+"<br/>"}),a("#status").html('<p><span class="label label-important">'+c+"</span><p></p>")}function ga(a){pa("tdplayer::onStatus"),ia(a.data.status)}function ha(a){pa("tdplayer::onGeoBlocked"),ia(a.data.text)}function ia(b){pa(b),a("#status").html('<p><span class="label label-success">Status: '+b+"</span></p>")}function ja(b){var c=xa.version.major+"."+xa.version.minor+"."+xa.version.patch+"."+xa.version.flag,d='<p><span class="label label-info">Api version: '+c+" - Technology: "+b;xa.flash.available&&(d+=" - Your current version of flash plugin is: "+xa.flash.version.major+"."+xa.flash.version.minor+"."+xa.flash.version.rev),d+="</span></p>",a("#techInfo").html(d)}function ka(){return""===a("#pwaCallsign").val()||""===a("#pwaStreamId").val()?void alert("Please enter a Callsign and a streamid"):void xa.PlayerWebAdmin.load(a("#pwaCallsign").val(),a("#pwaStreamId").val())}function la(b){pa("PlayerWebAdmin data loaded successfully"),a("#asyncData").html('<br><p><span class="label label-warning">PlayerWebAdmin:</span>');var c='<table class="table table-striped"><thead><tr><th>Key</th><th>Value</th></tr></thead>';for(var d in b.data.config)c+="<tr><td>"+d+"</td><td>"+b.data.config[d]+"</td></tr>";c+="</table></p>",a("#asyncData").html("<div>"+c+"</div>")}function ma(){xa.addEventListener?(xa.addEventListener("ad-playback-start",K),xa.addEventListener("ad-playback-error",M),xa.addEventListener("ad-playback-complete",L),xa.addEventListener("ad-countdown",N),xa.addEventListener("vast-process-complete",O),xa.addEventListener("vpaid-ad-companions",P)):xa.attachEvent&&(xa.attachEvent("ad-playback-start",K),xa.attachEvent("ad-playback-error",M),xa.attachEvent("ad-playback-complete",L),xa.attachEvent("ad-countdown",N),xa.attachEvent("vast-process-complete",O),xa.attachEvent("vpaid-ad-companions",P))}function na(){xa.removeEventListener?(xa.removeEventListener("ad-playback-start",K),xa.removeEventListener("ad-playback-error",M),xa.removeEventListener("ad-playback-complete",L),xa.removeEventListener("ad-countdown",N),xa.removeEventListener("vast-process-complete",O),xa.removeEventListener("vpaid-ad-companions",P)):xa.detachEvent&&(xa.detachEvent("ad-playback-start",K),xa.detachEvent("ad-playback-error",M),xa.detachEvent("ad-playback-complete",L),xa.detachEvent("ad-countdown",N),xa.detachEvent("vast-process-complete",O),xa.detachEvent("vpaid-ad-companions",P))}function oa(){for(var a,c=[],d=b.location.href.slice(b.location.href.indexOf("?")+1).split("&"),e=0;e<d.length;e++)a=d[e].split("="),c.push(a[0]),c[a[0]]=a[1];return c}function pa(c,d){gmr.debug&&(b.console&&(d?console.error(c):console.log(c)),a("#debugInformation").append(c),a("#debugInformation").append("\n"))}function qa(){a("#debugInformation").html("")}function ra(){if("undefined"!=typeof Modernizr&&Modernizr.audio){var b=c.querySelectorAll(".content"),d=a(b);d.on("click",".podcast__btn--play",function(b){var c=a(b.currentTarget);r(b),vb(c.attr("data-mp3-src")),rb(),zb(c.attr("data-mp3-title"),c.attr("data-mp3-artist"),c.attr("data-mp3-hash"))}),d.on("click",".podcast__btn--pause",wb),nb.find('input[type="range"]').change(function(){if(Ia){var b=parseInt(Ia.duration);Ia.currentTime=Math.floor(b*parseFloat(a(this).val()))}})}else{var e=a(".gmr-mediaelement-fallback audio"),f=a(".podcast__play");e.mediaelementplayer(),f.hide()}}function sa(){a.support.pjax&&a(c).pjax("a:not(.ab-item)",".main",{fragment:".main",maxCacheLength:500,timeout:1e4})}function ta(a){Ja===!0||!0===Ha||a.preventDefault()}function ua(){var a,b=c.querySelectorAll(".audio__progress"),d=0;for(a=0;a<b.length;++a)Ia.currentTime>0&&(d=Math.floor(100/Ia.duration*Ia.currentTime)),b[a].style.width=d+"%";nb.find('input[type="range"]').val(d/100)}function va(){var a,b,d,e,f=c.querySelectorAll(".audio__time--remaining"),g=parseInt(Ia.duration),h=parseInt(Ia.currentTime),i=new Date(2e3,1,1,0,0,0);for(isNaN(g)?g=h=0:isNaN(h)&&(h=0),i.setSeconds(g-h),b=i.getHours(),d=("0"+i.getMinutes()).slice(-2),e=("0"+i.getSeconds()).slice(-2),i=b>0?b+":"+d+":"+e:d+":"+e,a=0;a<f.length;++a)f[a].innerHTML=i;nb.find("span:last").text(i)}function wa(){var a,b,d,e,f=c.querySelectorAll(".audio__time--elapsed"),g=parseInt(Ia.currentTime),h=new Date(2e3,1,1,0,0,0);for(h.setSeconds(isNaN(g)?0:g),a=h.getHours(),b=("0"+h.getMinutes()).slice(-2),d=("0"+h.getSeconds()).slice(-2),h=a>0?a+":"+b+":"+d:b+":"+d,e=0;e<f.length;++e)f[e].innerHTML=h;nb.find("span:first").text(h)}var xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa=a(b),Ga=a(c),Ha=(oa().tech||"html5_flash","false"!=oa().aSyncCuePointFallback,!1),Ia=!1,Ja=!1,Ka=c.querySelector("body"),La=c.getElementById("td_container"),Ma=c.getElementById("live-player"),Na=c.querySelector(".live-stream__player"),Oa=c.getElementById("playButton"),Pa=c.getElementById("pauseButton"),Qa=c.getElementById("resumeButton"),Ra=c.getElementById("loadButton"),Sa=c.querySelector(".podcast__btn--play"),Ta=c.querySelector(".podcast__btn--pause"),Ua=c.querySelector(".podcast-player"),Va=c.getElementById("live-stream__listen-now"),Wa=c.getElementById("live-stream__now-playing"),Xa=(c.getElementById("live-stream__login"),a(c.getElementById("trackInfo"))),Ya=c.getElementById("clearDebug"),Za=c.getElementById("on-air"),$a=c.getElementById("live-stream__status"),_a=c.getElementById("nowPlaying"),ab=c.getElementById("trackInfo"),bb=c.querySelector(".live-player__stream"),cb=null,db=null,eb=(c.querySelector(".footer"),!1),fb=(a(c.getElementById("live-player--volume")),1),gb=a(c.getElementById("js-audio-controls")),hb=a(c.getElementById("js-audio-volume")),ib=a(c.getElementById("js-audio-volume-button")),jb=a(c.getElementById("js-audio-status")),kb=a(c.getElementById("js-track-info")),lb=a(c.getElementById("js-artist-info")),mb=a(c.getElementById("js-audio-expand")),nb=a(c.getElementById("js-audio-podcast"));b.tdPlayerApiReady=function(){pa("--- TD Player API Loaded ---"),l()};var ob=function(){var a=Va.textContent,d=c.getElementById("trackInfo"),e=c.getElementById("npeInfo");!0===Ha&&(Ia.pause(),d.innerHTML="",e.innerHTML="",rb(),s(),Ha=!1,j()),"Switch to Live Stream"===a&&(Va.innerHTML="Listen Live"),b.innerWidth>=768&&E()};Ga.ready(z),Fa.on("click",function(){a(".audio-stream.-open").removeClass("-open")}),Ga.on("click",".audio-stream.-multiple .audio-stream__title",function(b){b.stopPropagation(),a(this).parents(".audio-stream").toggleClass("-open")}),Ga.on("click",".audio-stream__item",function(b){var c=a(this),d=c.find(".audio-stream__name").text(),f=c.parents(".audio-stream");b.stopPropagation(),f.find(".audio-stream__title").text(d),f.removeClass("-open"),Da&&(xa.stop(),o()),!0===Ha&&ob(),e(d),Ma.classList.add("live-player--active"),n()}),mb.click(function(){a(c.getElementById("js-audio-ad-aboveplayer")).toggleClass("-show"),a(this).toggleClass("-open")});var pb=a(".live-player__stream--current-name");pb.bind("DOMSubtreeModified",function(){pa("--- new stream select ---");var a=pb.text();Da&&xa.stop(),!0===Ha&&ob(),e(a),Ma.classList.add("live-player--active"),n()});var qb=function(){"undefined"!=typeof xa&&"undefined"!=typeof xa.stop&&xa.stop()},rb=function(){a(".podcast__btn--play.playing").removeClass("playing"),a(".podcast__btn--pause.playing").removeClass("playing")},sb=function(){var b=".mp3-"+Aa;a(b+" .podcast__btn--play").addClass("playing"),a(b+" .podcast__btn--pause").addClass("playing")},tb=function(a){Ia.src=a},ub=function(){Ha=!0,qb(),Ia&&Ia.duration==Ia.currentTime&&(Ia.currentTime=0),Ia.play(),Ia.volume=R(),xb(),yb(),rb(),n(),sb(),q(),h()},vb=function(a){sa(),a!==Ia.src&&tb(a),ub()},wb=function(){Ia.pause(),rb(),Ha=!1,p(),j()},xb=function(){var b=_.template('<div class="now-playing__title"><%- title %></div>'),c=a(".now-playing__title"),d='<div class="audio__title">',e='</div><div class="audio__time"><span class="audio__time--inline">(</span><div class="audio__time--elapsed"></div><span class="audio__time--inline"> / </span><div class="audio__time--remaining"></div><span class="audio__time--inline">)</span></div>';c.length>0?c.html(d+za+e):Xa.prepend(b({title:za})),kb.text(za),lb.text("")},yb=function(){var b=_.template('<div class="now-playing__artist"><%- artist %></div>'),c=a(".now-playing__artist");c.length>0?c.text(ya):Xa.append(b({artist:ya}))},zb=function(a,b,c){za=a,ya=b,Aa=c,xb(),yb(),sb()},Ab=function(){"undefined"!=typeof Modernizr&&Modernizr.audio&&(Ia=new Audio,Ia.addEventListener?Ia.addEventListener("ended",function(){rb(),o(),j()}):Ia.attachEvent&&Ia.attachEvent("ended",function(){rb(),o(),j()}))};Ga.bind("pjax:click",ta),a(".audio__progress-bar").click(function(b){var c=a(this),d=c.width(),e=c.offset(),f=b.pageX-e.left,g=Math.floor(f/d*Ia.duration);Ia.currentTime=g}),Ab(),ra(),Ia.addEventListener("timeupdate",function(){ua(),wa(),va()},!1),f(Sa,"click",q),f(Ta,"click",wb),Ga.on("pjax:end",function(){ra(),sb(),f(Sa,"click",q),f(Ta,"click",wb)})}(jQuery,window,document);