class TrendingArticleModule{constructor(){this.trendingData="",this.bbgiconfigData=window.bbgiconfig,this.endpointURL=`${this.bbgiconfigData.eeapi}publishers/${this.bbgiconfigData.publisher.id}/recommendations?related=true`,this.elements=document.getElementsByClassName("trending-articles-container")}async fetchPosts(){for(let t=0;t<this.elements.length;t++){let e=this.elements[t].getAttribute("data-url"),i=this.elements[t].getAttribute("data-has_shortcode"),s=this.elements[t].getAttribute("data-location");try{let n=await this.fetchPostsEndpoint(e),a=n.data.map(t=>{let e=t.url?this.slugify(t.url):"",i=t.url?this.normalizeUrl(t.url):"",s=t.title,n=t.pub_date;return this.renderPostData(e,i,s,n)});this.trendingData=`<div class="post-trending-articles content-wrap embed_custom"><h2 class="section-head"><span>${this.bbgiconfigData.trending_article_title}</span></h2><div class="archive-tiles -list">${a.join("")}</div></div>`,i?"embed_custom"===s&&(this.elements[t].innerHTML=this.trendingData):!1===this.bbgiconfigData.isTrendingPostRender[s]&&("embed_inner_listicle"===s?this.bbgiconfigData.isTrendingPostRender[s]=!1:"embed_inner_gallery"===s?this.bbgiconfigData.isTrendingPostRender[s]=!1:"embed_inner_AM"===s?this.bbgiconfigData.isTrendingPostRender[s]=!1:this.bbgiconfigData.isTrendingPostRender[s]=!0,this.elements[t].innerHTML=this.trendingData)}catch(r){console.error(r)}}}async fetchPostsEndpoint(t){let e,i,s=await fetch(this.endpointURL),n=(e=await s.json()).url;n=n.replace("{url}",t);let a=await fetch(n);return await a.json()}normalizeUrl(t){return t.replace("https://","").replace("http://","")}slugify(t){return t.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}renderPostData(t,e,i,s){let n=`https://${e}`;return`<div class="post-tile post"><div class="post-details"><div class="post-title"><p><a href="${n}">${i}</a></p></div></div></div>`}}const trendingModule=new TrendingArticleModule;trendingModule.fetchPosts();