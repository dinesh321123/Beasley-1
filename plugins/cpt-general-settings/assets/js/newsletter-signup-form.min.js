!function(s){var e=s(document);e.ready(function(){function n(){var e=s(".nsf-email").val();""!=s(".nsf-first-name").val()&&""!=e&&s("#nsf-checkbox-content").is(":checked")&&/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(e)?s("#nsf-form .nsf-form-submit").prop("disabled",!1).css("opacity",1).css("cursor","pointer"):(s("#nsf-form .nsf-form-submit").prop("disabled",!0).css("opacity",.5).css("cursor","not-allowed"),s("#nsf-form .nsf-form-submit").off("click"))}n(),e.on("change",".nsf-first-name",function(e){n(),""==s(this).val()?(s(".nsf-fname-error-msg").text("First name required."),s(this).focus()):s(".nsf-fname-error-msg").html("")}),e.on("change",".nsf-email",function(e){n(),""==s(this).val()?(s(".nsf-email-error-msg").text("Email required."),s(this).focus()):/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(s(this).val())?s(".nsf-email-error-msg").html(""):(s(".nsf-email-error-msg").text("invalid email"),s(this).focus())}),e.on("change","#nsf-checkbox-content",function(s){n()}),e.on("click",".nsf-container #nsf-form .nsf-form-submit",function(e){e.preventDefault(),s(".nsf-email-error-msg").html(""),s(".nsf-fname-error-msg").html("");var n=s(".nsf-first-name").val(),r=s(".nsf-email").val(),t=s("#nsf-last-name").val(),o=s("#nsf_subscription_attributes").val(),a=s("#nsf_subscription_ID").val();return""==n?(s(".nsf-first-name").focus(),s(".nsf-fname-error-msg").text("First name required."),!1):""==r?(s(".nsf-email").focus(),s(".nsf-email-error-msg").text("Email required."),!1):/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(r)?s("#nsf-checkbox-content").is(":checked")?void(s(this).prop("disabled",!0).css("opacity",.5).css("cursor","not-allowed"),s.ajax({type:"POST",dataType:"json",url:nsf_ajax_object.url,data:{action:"newsletter_signup_form_data_submit",nonce:nsf_ajax_object.nonce,name:n,email:r,nsf_last_name:t,nsf_page_path:nsf_ajax_object.page_path,nsf_subscription_attributes:o,nsf_subscription_ID:a},beforeSend:function(){s(".nsf-container #nsf-form .nsf-form-submit").prop("disabled",!0).css("opacity",.5).css("cursor","not-allowed"),s(".nsf-spinner").css("display","block"),s(".response-error-container").html("")},success:function(e){var a=jQuery.parseJSON(e.body);if("200"==a.code){s(".response-error-container").html("Success! You're now subscribed.").fadeIn(),setTimeout(function(){s(".response-error-container").fadeOut()},2e4);let i=s(".nsf-email").disabled;window.beasleyanalytics?.setMParticleUserAttributeArray(r,i,[{attributeName:o,attributeValue:!0},{attributeName:"email_subscribe",attributeValue:"opted_in"},{attributeName:"$firstname",attributeValue:n},{attributeName:"$lastname",attributeValue:t},])}else s(".response-error-container").html("Error Code "+a.code+" : "+a.message).css("color","red")},error:function(e){console.log(e),s(".response-error-container").html("Something went wrong with API endpoint.").css("color","red")},complete:function(){s(".nsf-container #nsf-form .nsf-form-submit").prop("disabled",!1).css("opacity",1).css("cursor","pointer"),s(".nsf-first-name").val(""),s(".nsf-email").val(""),s("#nsf-last-name").val(""),s("#nsf-checkbox-content").prop("checked",!1),s("#nsf-form .nsf-form-submit").prop("disabled",!0).css("opacity",.5).css("cursor","not-allowed"),s(".nsf-spinner").css("display","none"),s(".nsf-email-error-msg").html(""),s(".nsf-fname-error-msg").html("")}})):(s("#nsf-checkbox-content").focus(),!1):(s(".nsf-email-error-msg").text("invalid email"),s(".nsf-email").focus(),s(this).val(""),s(this).focus(),!1)})})}(jQuery);
