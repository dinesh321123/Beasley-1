!function(t){t(document).ready(function(){var e=0,n=null,i=t("#filter_metaboxes");function o(i){console.log("Syndication about to start with post id: ",i," and request number: ",e),t.ajax({type:"post",url:syndication_ajax.ajaxurl,data:{action:"syndicate-now",syndication_id:i,syndication_nonce:syndication_ajax.syndication_nonce},beforeSend:function(){e++,t("#syndication_status").html("Checking...")},success:function(i){if(!(!i||!i.running))t("#syndication_status").html("Still running...");else{console.log("Interval cleared. ID: ",n),e=0,clearInterval(n);var o=i.total;0!==Math.floor(o)?t("#syndication_status").html("Imported "+o+" item(s). </br>Debugging ID "+i.unique_id):t("#syndication_status").html("No matches found! </br>Debugging ID "+i.unique_id)}}})}function s(){t(".subscription_terms").select2({placeholder:"Select term"}),t("#filter_metaboxes input[type=radio]").off("click").on("click",function(){t("#filter_metaboxes input[type=radio]").each(function(){var e="#"+t(this).data("enabled");t(this).prop("checked")?(t(e).select2("enable",!0),t("#enabled_filter_taxonomy").val(t(this).data("enabled"))):t(e).select2("enable",!1)})})}t(".subscription_defaults").select2({placeholder:"Select term"}),t("#syndicate_now").on("click",function(e){e.preventDefault();var i=t(this).data("postid");o(i),n=setInterval(function(){o(i)},6e4)}),s(),t("select.subscription_source_select2").select2({placeholder:"Select term"}).on("change",function(e){i.html(t("<img>",{src:"./images/spinner.gif",class:"subscription_loader"})),wp.ajax.post("syndication_taxonomy_filters",{security:syndication_ajax.syndication_filter_nonce,site_id:t("#subscription_source").val(),post_id:t("#post_ID").val()}).done(function(t){i.html(t.content),s()}).fail(function(t){})});var a=t("ul.syndicated_posts li");a.hide().slice(0,2).show(),t("#show_all_syndicated_posts").click(function(t){t.preventDefault(),a.show("600")})})}(jQuery),function(t){var e=jQuery(document.getElementById("js-syndication-reset"));0!==e.length&&e.on("click",function(t){if(!window.confirm("Are you sure you want to reset this post to the source site? You will lose any changes you may have made."))return!1})}();