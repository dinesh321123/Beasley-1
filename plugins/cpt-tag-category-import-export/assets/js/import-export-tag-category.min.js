!function(e){e(document).ready(function(){e(".ietc-delete-confirm").on("click",function(){return!!confirm("Are you sure you want to delete?")}),e(".general-settings-select2").select2({width:"300px"}),e("#import_file").on("click",function(){e("#tp_spinner").addClass("is-active"),e(".import-result").html(""),e(".show_import_log").html("");var t=e(".file").val(),a=e(".site_id").val(),s=e(".list_id").val(),r=e(".taxonomy_type").val();e.ajax({type:"POST",dataType:"json",url:my_ajax_object.ajax_url,data:{action:"ietc_import_data",file:t,site_id:a,list_id:s,taxonomy_type:r},success:function(t){if(console.log(t),1==t.success){console.log(t.success);var a=t.data,s=a.log_data;e(".import-result").append('<div class="notice notice-success is-dismissible"><p>'+a.message+"</p></div></br>"),e.each(s,function(t){var a;current_row=s[t],a=t+". Type: "+current_row.type+" Name: "+current_row.name+" Status: "+current_row.message+"</br>",e(".show_import_log").append(a)}),e("#tp_spinner").removeClass("is-active")}else e(".import-result").append('<div class="error notice-error is-dismissible"><p>'+t.data+"<p></div></br>")}})}),e("#export_file").on("click",function(){e(".export-result").html("");var t=e(".site_id").val(),a=e(".list_id").val();e.ajax({type:"POST",dataType:"json",url:my_ajax_object.ajax_url,data:{action:"ietc_export_data",site_id:t,list_id:a},success:function(t){if(console.log(t),1==t.success){console.log(t.success);var a=t.data;a.log_data;e(".export-result").append('<div class="notice notice-success is-dismissible"><p>'+a.message+"<p></div></br>"),window.location.href=a.file_path}}})}),e("#import_tag_category").on("click",function(){e("#import_msg").html("");var t,a=e("#network_source").val(),s=e("#network_type").val(),r=e("#network_source  option:selected").text();const i=new FormData;let o=document.getElementById("csv_file");if(t=o.files.length?o.files[0].name:"",a)if(s)if(""!=t){var l=o.files[0].name.split(".").pop().toLowerCase();-1!=e.inArray(l,["csv",""])?(e("#import_tag_category_spinner").addClass("is-active"),i.append("action","ietc_import_tag_category"),i.append("network_source",a),i.append("network_type",s),i.append("network_name",r),i.append("csv_file",o.files[0],o.files[0].name),e.ajax({type:"POST",dataType:"json",url:my_ajax_object.ajax_url,data:i,contentType:!1,processData:!1,success:function(t){if(1==t.success){console.log(t.success);var a=t.data;e("#import_msg").append('<div class="notice notice-success is-dismissible"><p>'+a.message+'</p></div> </br> <span id="timestamp" class="timestamp"><a href ="'+a.log_file_path+'" download> Download log </a> </span>'),e("#import_tag_category_spinner").removeClass("is-active")}else e("#import_msg").prev().append('<div id="errormsg"><p class="error">Error in result. Please reload the page.</p></div>'),e("#import_tag_category_spinner").removeClass("is-active")},error:function(t){e("#import_msg").prev().append('<div id="errormsg"><p class="error">There was an error. Please reload the page.</p></div>'),e("#import_tag_category_spinner").removeClass("is-active")}})):alert("Invalid csv file")}else alert("Please select CSV file");else alert("Select type");else alert("Select network source")}),e("#export_tag_category").on("click",function(){e("#export_msg").html(""),e("#export_tag_category_spinner").addClass("is-active");var t=e("#network_source").val(),a=e("#network_type").val(),s=e("#network_source  option:selected").text();return t?a?void e.ajax({type:"POST",dataType:"json",url:my_ajax_object.ajax_url,data:{action:"ietc_export_tag_category",network_source:t,network_type:a,network_name:s},success:function(t){if(console.log(t),1==t.success){console.log(t.success);var a=t.data;e("#export_msg").append('<div class="notice notice-success is-dismissible"><p>'+a.message+'</p></div> </br> <span id="timestamp" class="timestamp"><a href ="'+a.file_path+'" download> Download file manually </a> </span>'),e("#export_tag_category_spinner").removeClass("is-active"),window.location.href=a.file_path}else e("#export_msg").prev().append('<div id="errormsg"><p class="error">Error in result. Please reload the page.</p></div>'),e("#export_tag_category_spinner").removeClass("is-active")},error:function(t){e("#export_msg").prev().append('<div id="errormsg"><p class="error">There was an error. Please reload the page.</p></div>'),e("#export_tag_category_spinner").removeClass("is-active")}}):(alert("Select type"),void e("#export_tag_category_spinner").removeClass("is-active")):(alert("Select network source"),void e("#export_tag_category_spinner").removeClass("is-active"))}),e(".userfiltercls").change(function(){var t=e(this).val(),a=e(".typefiltercls").val(),s=e(".networksourcecls").val();window.location.replace(e(".wpBaseurl").val()+"/wp-admin/network/admin.php?page=ietc_logs&filtuserid="+t+"&filttypeid="+a+"&filtnetworkid="+s)}),e(".typefiltercls").change(function(){var t=e(".userfiltercls").val(),a=e(this).val(),s=e(".networksourcecls").val();window.location.replace(e(".wpBaseurl").val()+"/wp-admin/network/admin.php?page=ietc_logs&filtuserid="+t+"&filttypeid="+a+"&filtnetworkid="+s)}),e(".networksourcecls").change(function(){var t=e(".userfiltercls").val(),a=e(".typefiltercls").val(),s=e(this).val();window.location.replace(e(".wpBaseurl").val()+"/wp-admin/network/admin.php?page=ietc_logs&filtuserid="+t+"&filttypeid="+a+"&filtnetworkid="+s)})})}(jQuery);
