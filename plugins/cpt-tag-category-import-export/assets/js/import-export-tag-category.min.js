!function(e){e(document).ready((function(){e(".ietc-delete-confirm").on("click",(function(){return!!confirm("Are you sure you want to delete?")})),e(".general-settings-select2").select2({width:"300px"}),e("#import_file").on("click",(function(){e("#tp_spinner").addClass("is-active"),e(".import-result").html(""),e(".show_import_log").html("");var s=e(".file").val(),t=e(".site_id").val(),a=e(".list_id").val(),r=e(".taxonomy_type").val();e.ajax({type:"POST",dataType:"json",url:my_ajax_object.ajax_url,data:{action:"ietc_import_data",file:s,site_id:t,list_id:a,taxonomy_type:r},success:function(s){if(console.log(s),1==s.success){console.log(s.success);var t=s.data,a=t.log_data;e(".import-result").append('<div class="notice notice-success is-dismissible"><p>'+t.message+"</p></div></br>"),e.each(a,(function(s){var t;current_row=a[s],t=s+". Type: "+current_row.type+" Name: "+current_row.name+" Status: "+current_row.message+"</br>",e(".show_import_log").append(t)})),e("#tp_spinner").removeClass("is-active")}else e(".import-result").append('<div class="error notice-error is-dismissible"><p>'+s.data+"<p></div></br>")}})})),e("#export_file").on("click",(function(){e(".export-result").html("");var s=e(".site_id").val(),t=e(".list_id").val();e.ajax({type:"POST",dataType:"json",url:my_ajax_object.ajax_url,data:{action:"ietc_export_data",site_id:s,list_id:t},success:function(s){if(console.log(s),1==s.success){console.log(s.success);var t=s.data;t.log_data;e(".export-result").append('<div class="notice notice-success is-dismissible"><p>'+t.message+"<p></div></br>"),window.location.href=t.file_path}}})})),e("#import_tag_category").on("click",(function(){e("#import_msg").html("");var s,t=e("#network_source").val(),a=e("#network_type").val(),r=e("#network_source  option:selected").text();const i=new FormData;let o=document.getElementById("csv_file");if(s=o.files.length?o.files[0].name:"",t)if(a)if(""!=s){var l=o.files[0].name.split(".").pop().toLowerCase();-1!=e.inArray(l,["csv",""])?(e("#import_tag_category_spinner").addClass("is-active"),i.append("action","ietc_import_tag_category"),i.append("network_source",t),i.append("network_type",a),i.append("network_name",r),i.append("csv_file",o.files[0],o.files[0].name),e.ajax({type:"POST",dataType:"json",url:my_ajax_object.ajax_url,data:i,contentType:!1,processData:!1,success:function(s){if(1==s.success){console.log(s.success);var t=s.data;e("#import_msg").append('<div class="notice notice-success is-dismissible"><p>'+t.message+'</p></div> </br> <span id="timestamp" class="timestamp"><a href ="'+t.log_file_path+'" download> Download log </a> </span>'),e("#import_tag_category_spinner").removeClass("is-active")}else e("#import_msg").prev().append('<div id="errormsg"><p class="error">Error in result. Please reload the page.</p></div>'),e("#import_tag_category_spinner").removeClass("is-active")},error:function(s){e("#import_msg").prev().append('<div id="errormsg"><p class="error">There was an error. Please reload the page.</p></div>'),e("#import_tag_category_spinner").removeClass("is-active")}})):alert("Invalid csv file")}else alert("Please select CSV file");else alert("Select type");else alert("Select network source")})),e("#export_tag_category").on("click",(function(){e("#export_msg").html(""),e("#export_tag_category_spinner").addClass("is-active");var s=e("#network_source").val(),t=e("#network_type").val(),a=e("#network_source  option:selected").text();return s?t?void e.ajax({type:"POST",dataType:"json",url:my_ajax_object.ajax_url,data:{action:"ietc_export_tag_category",network_source:s,network_type:t,network_name:a},success:function(s){if(console.log(s),1==s.success){console.log(s.success);var t=s.data;e("#export_msg").append('<div class="notice notice-success is-dismissible"><p>'+t.message+'</p></div> </br> <span id="timestamp" class="timestamp"><a href ="'+t.file_path+'" download> Download file manually </a> </span>'),e("#export_tag_category_spinner").removeClass("is-active"),window.location.href=t.file_path}else e("#export_msg").prev().append('<div id="errormsg"><p class="error">Error in result. Please reload the page.</p></div>'),e("#export_tag_category_spinner").removeClass("is-active")},error:function(s){e("#export_msg").prev().append('<div id="errormsg"><p class="error">There was an error. Please reload the page.</p></div>'),e("#export_tag_category_spinner").removeClass("is-active")}}):(alert("Select type"),void e("#export_tag_category_spinner").removeClass("is-active")):(alert("Select network source"),void e("#export_tag_category_spinner").removeClass("is-active"))})),e("#export_users_station").on("click",(function(){e("#export_msg").html(""),e("#export_users_spinner").addClass("is-active");var s=e("#type").val();if(!s)return alert("Select type"),void e("#export_users_spinner").removeClass("is-active");e.ajax({type:"POST",dataType:"json",url:my_ajax_object.ajax_url,data:{action:"ietc_export_users_station",input_type:s},success:function(s){if(console.log(s),1==s.success){console.log(s.success);var t=s.data;e("#export_msg").append('<div class="notice notice-success is-dismissible"><p>'+t.message+'</p></div> </br> <span id="timestamp" class="timestamp"><a href ="'+t.file_path+'" download> Download file manually </a> </span>'),e("#export_users_spinner").removeClass("is-active"),window.location.href=t.file_path}else e("#export_msg").prev().append('<div id="errormsg"><p class="error">Error in result. Please reload the page.</p></div>'),e("#export_users_spinner").removeClass("is-active")},error:function(s){e("#export_msg").prev().append('<div id="errormsg"><p class="error">There was an error. Please reload the page.</p></div>'),e("#export_users_spinner").removeClass("is-active")}})})),e("#export_users_post").on("click",(function(){e("#export_msg").html(""),e("#export_users_spinner").addClass("is-active");var s=e("#type").val(),t=e("#export_from").val(),a=e("#export_to").val();return s?t?a?void e.ajax({type:"POST",dataType:"json",url:my_ajax_object.ajax_url,data:{action:"ietc_export_users_posts",input_type:s,export_from:t,export_to:a},success:function(s){if(console.log(s),1==s.success){console.log(s.success);var t=s.data;e("#export_msg").append('<div class="notice notice-success is-dismissible"><p>'+t.message+'</p></div> </br> <span id="timestamp" class="timestamp"><a href ="'+t.file_path+'" download> Download file manually </a> </span>'),e("#export_users_spinner").removeClass("is-active"),window.location.href=t.file_path}else e("#export_msg").prev().append('<div id="errormsg"><p class="error">Error in result. Please reload the page.</p></div>'),e("#export_users_spinner").removeClass("is-active")},error:function(s){e("#export_msg").prev().append('<div id="errormsg"><p class="error">There was an error. Please reload the page.</p></div>'),e("#export_users_spinner").removeClass("is-active")}}):(alert("Select to field"),void e("#export_users_spinner").removeClass("is-active")):(alert("Select from field"),void e("#export_users_spinner").removeClass("is-active")):(alert("Select type"),void e("#export_users_spinner").removeClass("is-active"))})),e("#type").change((function(){"post_list"==e(this).val()?(e("#post_list_div").show(),e("#post_list_date").show(),e("#station_list_div").hide()):(e("#post_list_div").hide(),e("#post_list_date").hide(),e("#station_list_div").show())})),e(".userfiltercls").change((function(){var s=e(this).val(),t=e(".typefiltercls").val(),a=e(".networksourcecls").val();window.location.replace(e(".wpBaseurl").val()+"/wp-admin/network/admin.php?page=ietc_logs&filtuserid="+s+"&filttypeid="+t+"&filtnetworkid="+a)})),e(".typefiltercls").change((function(){var s=e(".userfiltercls").val(),t=e(this).val(),a=e(".networksourcecls").val();window.location.replace(e(".wpBaseurl").val()+"/wp-admin/network/admin.php?page=ietc_logs&filtuserid="+s+"&filttypeid="+t+"&filtnetworkid="+a)})),e(".networksourcecls").change((function(){var s=e(".userfiltercls").val(),t=e(".typefiltercls").val(),a=e(this).val();window.location.replace(e(".wpBaseurl").val()+"/wp-admin/network/admin.php?page=ietc_logs&filtuserid="+s+"&filttypeid="+t+"&filtnetworkid="+a)}))}))}(jQuery);
