!function($){$(document).ready(function(){$(".ietc-delete-confirm").on("click",function(){return!!confirm("Are you sure you want to delete?")}),$(".general-settings-select2").select2({width:"300px"}),$("#import_file").on("click",function(){$("#tp_spinner").addClass("is-active"),$(".import-result").html(""),$(".show_import_log").html("");var a=$(".file").val(),b=$(".site_id").val(),c=$(".list_id").val(),d=$(".taxonomy_type").val();$.ajax({type:"POST",dataType:"json",url:my_ajax_object.ajax_url,data:{action:"ietc_import_data",file:a,site_id:b,list_id:c,taxonomy_type:d},success:function(a){if(console.log(a),!0==a.success){console.log(a.success);var b=a.data,c=b.log_data;$(".import-result").append('<div class="notice notice-success is-dismissible"><p>'+b.message+"</p></div></br>"),$.each(c,function(a){var b="";current_row=c[a],b=a+". Type: "+current_row.type+" Name: "+current_row.name+" Status: "+current_row.message+"</br>",$(".show_import_log").append(b)}),$("#tp_spinner").removeClass("is-active")}else $(".import-result").append('<div class="error notice-error is-dismissible"><p>'+a.data+"<p></div></br>")}})}),$("#export_file").on("click",function(){$(".export-result").html("");var a=$(".site_id").val(),b=$(".list_id").val();$.ajax({type:"POST",dataType:"json",url:my_ajax_object.ajax_url,data:{action:"ietc_export_data",site_id:a,list_id:b},success:function(a){if(console.log(a),!0==a.success){console.log(a.success);var b=a.data;b.log_data,$(".export-result").append('<div class="notice notice-success is-dismissible"><p>'+b.message+"<p></div></br>"),window.location.href=b.file_path}}})}),$("#import_tag_category").on("click",function(){$("#import_msg").html("");var c=$("#network_source").val(),d=$("#network_type").val(),f=$("#network_source  option:selected").text(),e="";let a=new FormData,b=document.getElementById("csv_file");if(e=b.files.length?b.files[0].name:"",!c){alert("Select network source");return}if(!d){alert("Select type");return}if(""==e){alert("Please select CSV file");return}var g=b.files[0].name.split(".").pop().toLowerCase();if(-1==$.inArray(g,["csv",""])){alert("Invalid csv file");return}$("#import_tag_category_spinner").addClass("is-active"),a.append("action","ietc_import_tag_category"),a.append("network_source",c),a.append("network_type",d),a.append("network_name",f),a.append("csv_file",b.files[0],b.files[0].name),$.ajax({type:"POST",dataType:"json",url:my_ajax_object.ajax_url,data:a,contentType:!1,processData:!1,success:function(a){if(!0==a.success){console.log(a.success);var b=a.data;$("#import_msg").append('<div class="notice notice-success is-dismissible"><p>'+b.message+'</p></div> </br> <span id="timestamp" class="timestamp"><a href ="'+b.log_file_path+'" download> Download log </a> </span>'),$("#import_tag_category_spinner").removeClass("is-active")}else $("#import_msg").prev().append('<div id="errormsg"><p class="error">Error in result. Please reload the page.</p></div>'),$("#import_tag_category_spinner").removeClass("is-active")},error:function(a){$("#import_msg").prev().append('<div id="errormsg"><p class="error">There was an error. Please reload the page.</p></div>'),$("#import_tag_category_spinner").removeClass("is-active")}})}),$("#export_tag_category").on("click",function(){$("#export_msg").html(""),$("#export_tag_category_spinner").addClass("is-active");var a=$("#network_source").val(),b=$("#network_type").val(),c=$("#network_source  option:selected").text();if(!a){alert("Select network source"),$("#export_tag_category_spinner").removeClass("is-active");return}if(!b){alert("Select type"),$("#export_tag_category_spinner").removeClass("is-active");return}$.ajax({type:"POST",dataType:"json",url:my_ajax_object.ajax_url,data:{action:"ietc_export_tag_category",network_source:a,network_type:b,network_name:c},success:function(a){if(console.log(a),!0==a.success){console.log(a.success);var b=a.data;$("#export_msg").append('<div class="notice notice-success is-dismissible"><p>'+b.message+'</p></div> </br> <span id="timestamp" class="timestamp"><a href ="'+b.file_path+'" download> Download file manually </a> </span>'),$("#export_tag_category_spinner").removeClass("is-active"),window.location.href=b.file_path}else $("#export_msg").prev().append('<div id="errormsg"><p class="error">Error in result. Please reload the page.</p></div>'),$("#export_tag_category_spinner").removeClass("is-active")},error:function(a){$("#export_msg").prev().append('<div id="errormsg"><p class="error">There was an error. Please reload the page.</p></div>'),$("#export_tag_category_spinner").removeClass("is-active")}})}),$("#export_users_station").on("click",function(){$("#export_msg").html(""),$("#export_users_spinner").addClass("is-active");var a=$("#type").val();if(!a){alert("Select type"),$("#export_users_spinner").removeClass("is-active");return}$.ajax({type:"POST",dataType:"json",url:my_ajax_object.ajax_url,data:{action:"ietc_export_users_station",input_type:a},success:function(a){if(console.log(a),!0==a.success){console.log(a.success);var b=a.data;$("#export_msg").append('<div class="notice notice-success is-dismissible"><p>'+b.message+'</p></div> </br> <span id="timestamp" class="timestamp"><a href ="'+b.file_path+'" download> Download file manually </a> </span>'),$("#export_users_spinner").removeClass("is-active"),window.location.href=b.file_path}else $("#export_msg").append('<div id="errormsg" class="notice notice-error is-dismissible"><p class="error">User Station list: error in result. Please reload the page.</p></div>'),$("#export_users_spinner").removeClass("is-active")},error:function(a){$("#export_msg").append('<div id="errormsg" class="notice notice-error is-dismissible"><p class="error">User Station list: error in result. Please reload the page.</p></div>'),$("#export_users_spinner").removeClass("is-active")}})}),$("#export_users_post").on("click",function(){$("#export_msg").html(""),$("#export_users_spinner").addClass("is-active");var c=$("#type").val(),a=$("#export_from").val(),b=$("#export_to").val();if(!c){alert("Select type"),$("#export_users_spinner").removeClass("is-active");return}if(!a){alert("Select from date"),$("#export_users_spinner").removeClass("is-active");return}if(!b){alert("Select to date"),$("#export_users_spinner").removeClass("is-active");return}if(a>=b){alert("Date is not in Range"),$("#export_users_spinner").removeClass("is-active");return}$.ajax({type:"POST",dataType:"json",url:my_ajax_object.ajax_url,data:{action:"ietc_export_users_posts",input_type:c,export_from:a,export_to:b},success:function(a){if(console.log(a),!0==a.success){console.log(a.success);var b=a.data;$("#export_msg").append('<div class="notice notice-success is-dismissible"><p>'+b.message+'</p></div> </br> <span id="timestamp" class="timestamp"><a href ="'+b.file_path+'" download> Download file manually </a> </span>'),$("#export_users_spinner").removeClass("is-active"),window.location.href=b.file_path}else $("#export_msg").append('<div id="errormsg" class="notice notice-error is-dismissible"><p class="error">User Post list: error in result. Please reload the page.</p></div>'),$("#export_users_spinner").removeClass("is-active")},error:function(a){$("#export_msg").append('<div id="errormsg" class="notice notice-error is-dismissible"><p class="error">User Post list: error in result. Please reload the page.</p></div>'),$("#export_users_spinner").removeClass("is-active")}})}),$("#type").change(function(){"post_list"==$(this).val()?($("#post_list_div").show(),$("#post_list_date").show(),$("#station_list_div").hide()):($("#post_list_div").hide(),$("#post_list_date").hide(),$("#station_list_div").show())}),$(".userfiltercls").change(function(){var a=$(this).val(),b=$(".typefiltercls").val(),c=$(".networksourcecls").val();window.location.replace($(".wpBaseurl").val()+"/wp-admin/network/admin.php?page=ietc_logs&filtuserid="+a+"&filttypeid="+b+"&filtnetworkid="+c)}),$(".typefiltercls").change(function(){var a=$(".userfiltercls").val(),b=$(this).val(),c=$(".networksourcecls").val();window.location.replace($(".wpBaseurl").val()+"/wp-admin/network/admin.php?page=ietc_logs&filtuserid="+a+"&filttypeid="+b+"&filtnetworkid="+c)}),$(".networksourcecls").change(function(){var a=$(".userfiltercls").val(),b=$(".typefiltercls").val(),c=$(this).val();window.location.replace($(".wpBaseurl").val()+"/wp-admin/network/admin.php?page=ietc_logs&filtuserid="+a+"&filttypeid="+b+"&filtnetworkid="+c)})})}(jQuery)
