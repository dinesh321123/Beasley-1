/*! Greater Media Contests - v1.0.5
 * http://10up.com/
 * Copyright (c) 2015;
 * Licensed GPLv2+
 */
!function(a){var b,c,d=a.event;b=d.special.debouncedresize={setup:function(){a(this).on("resize",b.handler)},teardown:function(){a(this).off("resize",b.handler)},handler:function(a,e){var f=this,g=arguments,h=function(){a.type="debouncedresize",d.dispatch.apply(f,g)};c&&clearTimeout(c),e?h():c=setTimeout(h,b.threshold)},threshold:250}}(jQuery);var BLANK="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";!function(a){a.fn.imagesLoaded=function(b){function c(){var c=a(j),d=a(k);f&&(k.length?f.reject(h,c,d):f.resolve(h)),a.isFunction(b)&&b.call(e,h,c,d)}function d(b,d){b.src!==BLANK&&-1===a.inArray(b,i)&&(i.push(b),d?k.push(b):j.push(b),a.data(b,"imagesLoaded",{isBroken:d,src:b.src}),g&&f.notifyWith(a(b),[d,h,a(j),a(k)]),h.length===i.length&&(setTimeout(c),h.unbind(".imagesLoaded")))}var e=this,f=a.isFunction(a.Deferred)?a.Deferred():0,g=a.isFunction(f.notify),h=e.find("img").add(e.filter("img")),i=[],j=[],k=[];return a.isPlainObject(b)&&a.each(b,function(a,c){"callback"===a?b=c:f&&f[a](c)}),h.length?h.bind("load.imagesLoaded error.imagesLoaded",function(a){d(a.target,"error"===a.type)}).each(function(b,c){var e=c.src,f=a.data(c,"imagesLoaded");return f&&f.src===e?void d(c,f.isBroken):c.complete&&void 0!==c.naturalWidth?void d(c,0===c.naturalWidth||0===c.naturalHeight):void((c.readyState||c.complete)&&(c.src=BLANK,c.src=e))}):c(),f?f.promise(e):e}}(jQuery),function(a,b,c){var d,e=a(window),f=a("html, body"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},h=g[b.prefixed("transition")],i=b.csstransitions;a.fn.grid=function(b){var g=a(this),j=a("#wpadminbar").height()||0,k={minHeight:816,speed:200,easing:"ease",loadMore:null,loadMoreWaypointOffset:"150%",loadMoreUrl:null,loadedMore:null,previewLoaded:null};return k=a.extend(!0,{},k,b),g.each(function(){function b(){t.imagesLoaded(function(){m(!0),p(),n()})}function g(b){u=u.add(b),b.each(function(){var b=a(this);b.data({offsetTop:b.offset().top,height:b.height()})}),o(b)}function l(){var b;if(a.isFunction(k.loadMoreUrl)){if(C)return;if(b=k.loadMoreUrl(B),!b)return;C=!0,B++,v.addClass("loading"),a.get(b,function(b){var d=a(a.trim(b));d.length>0?(t.append(d),g(d),d.length>=A?(C=!1,v.removeClass("loading"),c.refreshAll(),a.isFunction(k.loadedMore)&&k.loadedMore(d)):v.hide()):v.hide()})}}function m(b){u.each(function(){var c=a(this);c.data("offsetTop",c.offset().top),b&&c.data("height",c.outerHeight())})}function n(){o(u),e.on("debouncedresize",function(){y=0,x=-1,m(),p();var b=a.data(this,"preview");"undefined"!=typeof b&&r()}),v.length>0&&(v.on("click",function(){return l(),!1}),v.waypoint({offset:k.loadMoreWaypointOffset,triggerOnce:!1,handler:function(a){"down"===a&&l()}}),c.refreshAll())}function o(b){b.on("click","span.preview-close",function(){return r(),!1}),b.on("click","> a",function(){var b=a(this).parent();return w===b.index()?r():q(b),!1})}function p(){d={width:e.width(),height:e.height()}}function q(b){var c=a.data(this,"preview"),d=b.data("offsetTop");if(y=0,"undefined"!=typeof c){if(x===d)return c.update(b),!1;d>x&&(y=c.height),r()}x=d,c=a.data(this,"preview",new s(b)),c.open()}function r(){var b=a.data(this,"preview");w=-1,b&&b.close(),a.removeData(this,"preview")}function s(a){this.$item=a,this.expandedIdx=this.$item.index(),this.create(),this.update()}var t=a(this),u=t.children("li"),v=a(k.loadMore),w=-1,x=-1,y=0,z=70,A=u.length,B=1,C=!1;s.prototype={create:function(){this.$closePreview=a('<span class="preview-close"></span>'),this.$previewInner=a('<div class="preview-inner"></div>').append(this.$closePreview),this.$previewEl=a('<div class="preview"></div>').append(this.$previewInner),this.$item.append(this.getEl()),i&&this.setTransition()},update:function(b){var c,d,e,f;if(f=this,b&&(f.$item=b,f.getEl().appendTo(b)),-1!==w){var g=u.eq(w);g.removeClass("expanded"),f.$item.addClass("expanded"),f.positionPreview()}w=f.$item.index(),c=f.$previewInner,c.html(f.$closePreview),d=f.$item.children("a"),e=d.data("content"),e?(c.append(e),a.isFunction(k.previewLoaded)&&k.previewLoaded(f)):a.get(d.attr("href"),{ajax:"true"},function(b){d.data("content",b),c.append(b),a.isFunction(k.previewLoaded)&&k.previewLoaded(f)})},open:function(){setTimeout(a.proxy(function(){this.setHeights(),this.positionPreview()},this),25)},close:function(){var b=this,c=function(){i&&a(this).off(h),b.$item.removeClass("expanded"),b.$previewEl.remove()};return setTimeout(a.proxy(function(){"undefined"!=typeof this.$largeImg&&this.$largeImg.fadeOut("fast"),this.$previewEl.css("height",0);var a=u.eq(this.expandedIdx);a.css("height",a.data("height")).on(h,c),i||c.call()},this),25),!1},calcHeight:function(){var a=d.height-this.$item.data("height")-z,b=d.height;a<k.minHeight&&(a=k.minHeight,b=k.minHeight+this.$item.data("height")+z),this.height=a,this.itemHeight=b},setHeights:function(){var a=this,b=function(){i&&a.$item.off(h),a.$item.addClass("expanded")};this.calcHeight(),this.$previewEl.css("height",this.height),this.$item.css("height",this.itemHeight).on(h,b),i||b.call()},positionPreview:function(){var a,b=this.$item.data("offsetTop"),c=this.$previewEl.offset().top-y;a=this.height+this.$item.data("height")+z<=d.height?b:this.height<d.height?c-(d.height-this.height):c,f.animate({scrollTop:a-j},k.speed)},setTransition:function(){this.$previewEl.css("transition","height "+k.speed+"ms "+k.easing),this.$item.css("transition","height "+k.speed+"ms "+k.easing)},getEl:function(){return this.$previewEl}},b()}),g}}(jQuery,Modernizr,Waypoint),function(a){var b,c,d=a(document),e=function(a,b){var c=parseInt(a.text().replace(/\D+/g,""));isNaN(c)&&(c=0),c+=b,c=c.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,").replace(/\..*/g,""),a.text(c)},f=function(c){var f=c.$previewInner,g=c.$item,h=g.find(".contest__submission--rating b"),i=!1;a.fn.cycle&&f.find(".cycle-slideshow").cycle(),f.find(".contest__submission--vote").click(function(){var c=a(this),d=c.find("i.fa"),f=d.attr("class");return i||(i=!0,d.attr("class","fa fa-spinner fa-spin"),a.post(b.data("vote"),{ugc:c.data("id")},function(a){i=!1,d.attr("class",f),a.success&&(g.addClass("voted"),e(h,1))})),!1}),f.find(".contest__submission--unvote").click(function(){var c=a(this),d=c.find("i.fa"),f=d.attr("class");return i||(i=!0,d.attr("class","fa fa-spinner fa-spin"),a.post(b.data("unvote"),{ugc:c.data("id")},function(a){i=!1,d.attr("class",f),a.success&&(g.removeClass("voted"),e(h,-1))})),!1}),d.trigger("contest:preview-loaded")},g=function(a){return b.data("infinite")+(a+1)+"/"},h=function(){b=a("#contest-form"),c=a(".contest__submissions--list"),d.on("submit","#contest-form form",function(){var c=a(this);if(!c.parsley||c.parsley().isValid()){var d=new FormData;c.find("input").each(function(){var b=this;"file"===b.type?a(this.files).each(function(a,c){d.append(b.name,c)}):"radio"===b.type||"checkbox"===b.type?b.checked&&d.append(b.name,b.value):d.append(b.name,b.value)}),c.find("textarea, select").each(function(){d.append(this.name,this.value)}),c.find("input, textarea, select, button").attr("disabled","disabled"),c.find("i.fa").show(),a.ajax({url:b.data("submit"),type:"post",data:d,processData:!1,contentType:!1,success:function(c){var d=b.offset().top-10;b.html(c),d-=a("#wpadminbar").height(),a("html, body").animate({scrollTop:d},200)}})}return!1});var e=function(b){var c=a(".contest__restrictions");c.attr("class","contest__restrictions"),b&&c.addClass(b)},h=function(c){a.get(c,function(c){var d=null;c.success?(b.html(c.data.html),a("#contest-form form").parsley(),a(".type-contest.collapsed").removeClass("collapsed")):d=c.data.restriction,e(d)})};a(".contest__restriction--min-age-yes").click(function(){return h(b.data("confirm-age")),!1}),a(".contest__restriction--min-age-no").click(function(){return e("age-fails"),!1}),b.length>0&&h(b.data("load")),c.length>0&&c.grid({loadMore:".contest__submissions--load-more",previewLoaded:f,loadMoreUrl:g})};d.bind("pjax:end",h).ready(h)}(jQuery),document.addEventListener("DOMContentLoaded",function(){function a(){var a=document.createElement("input"),b=document.documentElement,c={},d=":)";return function(e){for(var f,g,h,i=0,j=e.length;j>i;i++)a.setAttribute("type",g=e[i]),f="text"!==a.type,f&&(a.value=d,a.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(g)&&void 0!==a.style.WebkitAppearance?(b.appendChild(a),h=document.defaultView,f=h.getComputedStyle&&"textfield"!==h.getComputedStyle(a,null).WebkitAppearance&&0!==a.offsetHeight,b.removeChild(a)):/^(search|tel)$/.test(g)||(f=/^(url|email)$/.test(g)?a.checkValidity&&a.checkValidity()===!1:a.value!==d)),c[e[i]]=!!f;return c}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var b=a();b.hasOwnProperty("date")&&!1!==b.date||(jQuery("input[type=date]").datetimepicker({timepicker:!1,format:"m/d/Y"}),jQuery("input[type=time]").datetimepicker({datepicker:!1,format:"g:i A",formatTime:"g:i A",allowTimes:["12:00 AM","12:30 AM","1:00 AM","1:30 AM","2:00 AM","2:30 AM","3:00 AM","3:30 AM","4:00 AM","4:30 AM","5:00 AM","5:30 AM","6:00 AM","6:30 AM","7:00 AM","7:30 AM","8:00 AM","8:30 AM","9:00 AM","9:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","1:00 PM","1:30 PM","2:00 PM","2:30 PM","3:00 PM","3:30 PM","4:00 PM","4:30 PM","5:00 PM","5:30 PM","6:00 PM","6:30 PM","7:00 PM","7:30 PM","8:00 PM","8:30 PM","9:00 PM","9:30 PM","10:00 PM","10:30 PM","11:00 PM","11:30 PM"]}))},!1);
