/*! GreaterMedia Keywords - v0.0.1
 * http://wordpress.org/plugins
 * Copyright (c) 2015; * Licensed GPLv2+ */
jQuery(function(e){"use strict";function t(e){this.keywords=e}function r(){var t=a.search(o.val());return t&&t.length?(t=t.slice(0,n),c.html(t.length>1?t.length+" keyword matches found":"1 keyword match found"),h.empty(),_.each(t,function(t){h.append(e(i(t)))}),s.show(),void 0):(s.hide(),void 0)}t.prototype.search=function(e){if(e=this.normalize_search_term(e),!e.length)return[];var t=this,r=_.filter(this.keywords,function(r){return 0===t.normalize_search_term(r.keyword).indexOf(t.normalize_search_term(e))});return r},t.prototype.normalize_search_term=function(e){return e.trim().toLowerCase().replace(/[^a-z0-9]+/g,"")};var n=6,a=new t(GMRKeywords),o=e("#header-search"),i=_.template(e("#keyword-search-item-template").html()),d=_.template(e("#keyword-search-body-template").html()),s=e("#keyword-search-container");s.hide(),s.append(e(d()));var c=s.find(".keyword-search__header"),h=s.find(".keyword-search__items");s.find(".keyword-search__btn").click(function(){e("#header-search").parent("form").submit()}),o.on("keyup",r),o.one("focus",function(){r()})});