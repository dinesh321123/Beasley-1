!function(a){a(document).ready(function(){var b=a("#manage-gallery-button"),c=a("#manage-gallery-text"),d=a("#gmr-gallery-ids"),e=wp.media.gallery,f=a("#gmr-gallery-preview"),g=a("#gmr-gallery-images"),h=a("#gmr-gallery-item-template").text(),i=a("#gmr-featured-image"),j="details selected";b.on("click",function(){var a,b=d.val(),f=b.length>0?!1:!0;b.length<1?(a=wp.media({frame:"post",state:"gallery",library:{type:"image"},multiple:!0}),a.open()):a=e.edit('[gallery ids="'+b+'"]'),a.state("gallery-edit").on("update",function(a){k(a),l(a),f&&c.text("Edit Gallery")})}),f.on("click",".gallery-item",function(b){var c=a(b.currentTarget).closest(".gallery-item");g.find(".gallery-item").removeClass(j),c.addClass(j),i.val(c.attr("data-attachment-id"))});var k=function(a){for(var b="",c=0;c<a.models.length;c++)b+=a.models[c].id+",";b=b.slice(0,-1),d.val(b)},l=function(a){for(var b="",c=i.val(),d=!1,e=0;e<a.models.length;e++){var f=a.models[e].id,k=f===c?j:"",l=a.models[e].get("sizes").full.url;b+=h.replace("{{selected_class}}",k).replace("{{attachment_id}}",f).replace("{{thumbnail_url}}",l),f===c&&(d=!0)}!1===d&&i.val(""),g.html(b)}})}(jQuery);