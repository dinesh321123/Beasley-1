!function(a){var b=function(){this.toHTMLFragmentProxy=a.proxy(this.toHTMLFragment,this),this.replaceShortcodeProxy=a.proxy(this.replaceShortcode,this)};b.prototype=a.extend(new VisualShortcodeRedux.Convertor,{toDataAttrs:function(a){if(a.show){var b=a.show,c=new Date(b);c=c.toISOString(),a.show=c}if(a.hide){var d=a.hide,e=new Date(d);e=e.toISOString(),a.hide=e}var f=VisualShortcodeRedux.Convertor;return f.prototype.toDataAttrs.call(this,a)}});var c=function(){};c.prototype=a.extend(new VisualShortcodeRedux.Menu,{});var d=function(){};d.prototype=a.extend(new VisualShortcodeRedux.Dialog,{getTitle:function(){return"Time Restricted Content"},getBody:function(){return[{type:"textbox",name:"show",id:"time-restriction-show-input",label:"Show Content On",value:this.getShow()},{type:"textbox",name:"hide",id:"time-restriction-hide-input",label:"Hide Content On",value:this.getHide()}]},getShow:function(){var a=this.getData();return a.show?a.show:""},getHide:function(){var a=this.getData();return a.hide?a.hide:""},getData:function(){var a=this.data;if(a.show){var b=a.show;b=this.formatDateForInput(b),a.show=b}if(a.hide){var c=a.hide;c=this.formatDateForInput(c),a.hide=c}return a},formatDateForInput:function(a){return this.plugin.formatDate(a)},didOpen:function(){var b=a("#time-restriction-show-input"),c=a("#time-restriction-hide-input"),d="M d, Y h:i a",e={format:d};b.datetimepicker(e),c.datetimepicker(e)},didSubmit:function(a){var b=a.data;if(""!==b.show){var c=b.show,d=new Date(c);d=d.toISOString(),b.show=d}else delete b.show;if(""!==b.hide){var e=b.hide,f=new Date(e);f=f.toISOString(),b.hide=f}else delete b.hide;var g=VisualShortcodeRedux.Dialog;return a.data=b,""!==b.show||""!==b.hide?g.prototype.didSubmit.call(this,a):void 0}});var e=function(){};e.prototype=a.extend(new VisualShortcodeRedux.Plugin,{getName:function(){return"timeRestricted"},getShortcodeTag:function(){return"time-restricted"},getDisplayName:function(){return"Time Restriction"},getMetaLabel:function(a){var b="";return a.show&&(b+="Show: "+this.formatDate(a.show)),a.hide&&(a.show&&(b+=" ; "),b+="Hide: "+this.formatDate(a.hide)),b},formatDate:function(a){var b=new Date(a);return b.format("M d, Y h:i a")},getMenu:function(){var a=new c;return a.plugin=this,a},getDialog:function(a){var b=new d;return b.isNew=a,b.data={},b.plugin=this,b},getConvertor:function(){return this.convertor||(this.convertor=new b,this.convertor.plugin=this),this.convertor}}),a(document).ready(function(){VisualShortcodeRedux.registerPlugin("timeRestricted",e)})}(jQuery);