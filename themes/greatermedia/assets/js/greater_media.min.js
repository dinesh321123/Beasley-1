/*! Greater Media - v0.1.0 - 2014-11-19
 * http://greatermedia.com
 * Copyright (c) 2014; * Licensed GPLv2+ */
!function(){function a(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:j(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var k=j();h||c.leading!==!1||(h=k);var l=b-(k-h);return d=this,e=arguments,0>=l||l>b?(clearTimeout(g),g=null,h=k,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,l)),f}}function b(a,b,c){var d,e,f,g,h,i=function(){var k=j()-g;b>k&&k>0?d=setTimeout(i,b-k):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=j();var k=c&&!d;return d||(d=setTimeout(i,b)),k&&(h=a.apply(f,e),f=e=null),h}}function c(){w={x:window.pageXOffset,y:window.pageYOffset},0===w.y?(m.classList.contains("logged-in")?(q.style.top=p+s+"px",q.style.height=v-s-p+"px"):(q.style.top=p+"px",q.style.height=v-p+"px"),q.classList.remove("live-player--fixed"),q.classList.add("live-player--init")):w.y>=1&&w.y<=p?(q.style.top=m.classList.contains("logged-in")?p+s+"px":p+"px",q.style.height="100%",q.classList.remove("live-player--fixed"),q.classList.add("live-player--init")):w.y>=p?(m.classList.contains("logged-in")?(q.style.top=s+"px",q.style.height=v-s+"px"):(q.style.top="0px",q.style.height=v+"px"),q.classList.remove("live-player--init"),q.classList.add("live-player--fixed")):q.style.height="100%"}function d(){m.classList.contains("logged-in")?(q.style.top=p+s+"px",q.style.height=v-s-p+"px"):(q.style.top=p+"px",q.style.height=v-p+"px"),q.classList.remove("live-player--fixed"),q.classList.add("live-player--init")}function e(){m.classList.toggle("mobile-nav--open")}function f(){r.classList.toggle("open")}function g(){m.classList.toggle("live-player--open")}function h(){m.classList.toggle("live-player--open")}function i(){window.innerWidth<=767&&(t.addEventListener("click",g,!1),u.addEventListener("click",h,!1)),window.innerWidth>=768&&window.addEventListener("load",d,!1)}var j,k,l,d,m=document.querySelector("body"),n=document.querySelector(".mobile-nav__toggle"),o=document.getElementById("header"),p=o.offsetHeight,q=document.getElementById("live-player__sidebar"),r=document.querySelector(".live-player__stream--current"),s=32,t=document.getElementById("on-air"),u=document.getElementById("now-playing"),v=Math.max(document.documentElement.clientHeight,window.innerHeight||0),w={};j=Date.now||function(){return(new Date).getTime()},k=new Headroom(o,{offset:p,tolerance:0,classes:{pinned:"header--pinned",unpinned:"header--unpinned"},onTop:function(){d()},onNotTop:function(){l()}}),n.addEventListener("click",e,!1),r.addEventListener("click",f,!1),window.innerWidth<=767&&(t.addEventListener("click",g,!1),u.addEventListener("click",h,!1)),window.innerWidth>=768&&window.addEventListener("load",d,!1);var x=b(c,50),y=a(c,50),z=b(i,50),A=a(i,50);window.addEventListener("scroll",function(){x(),y()},!1),window.addEventListener("resize",function(){z(),A()},!1)}();