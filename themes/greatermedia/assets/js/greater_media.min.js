/*! Greater Media - v0.1.0 - 2014-12-01
 * http://greatermedia.com
 * Copyright (c) 2014; * Licensed GPLv2+ */
!function(){function a(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:l(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=l();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}}function b(a,b,c){var d,e,f,g,h,i=function(){var j=l()-g;b>j&&j>0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=l();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}}function c(){F={x:window.pageXOffset,y:window.pageYOffset},0===F.y?(o.classList.contains("logged-in")?(s.style.top=r+v+"px",s.style.height=E-v-r+"px",z.style.height=E-r-v-u-D-36+"px"):(s.style.top=r+"px",s.style.height=E-r+"px",z.style.height=E-r-u-D-36+"px"),s.classList.remove("live-player--fixed"),s.classList.add("live-player--init")):F.y>=1&&F.y<=r?(o.classList.contains("logged-in")?(s.style.top=r+v+"px",z.style.height=E-v-u-D-36+"px"):(s.style.top=r+"px",z.style.height=E-u-D-36+"px"),s.style.height="100%",s.classList.remove("live-player--fixed"),s.classList.add("live-player--init")):F.y>=r?(o.classList.contains("logged-in")?(s.style.top=v+"px",s.style.height=E-v+"px",z.style.height=E-v-u-D-36+"px"):(s.style.top="0px",s.style.height=E+"px",z.style.height=E-u-D-36+"px"),s.classList.remove("live-player--init"),s.classList.add("live-player--fixed")):s.style.height="100%"}function d(){o.classList.contains("logged-in")?(s.style.top=r+v+"px",s.style.height=E-v-r+"px"):(s.style.top=r+"px",s.style.height=E-r+"px"),s.classList.remove("live-player--fixed"),s.classList.add("live-player--init")}function e(){z.style.height=o.classList.contains("logged-in")?E-r-v-u-D-36+"px":E-r-u-D-36+"px",A.style.height=B+"px"}function f(){o.classList.toggle("mobile-nav--open")}function g(){t.classList.toggle("open")}function h(){o.classList.toggle("live-player--open")}function i(){o.classList.toggle("live-player--open")}function j(){o.classList.toggle("live-player--open")}function k(){window.innerWidth<=767&&(w.addEventListener("click",h,!1),y.addEventListener("click",j,!1)),window.innerWidth>=768&&window.addEventListener("load",d,!1)}var l,m,n,d,o=document.querySelector("body"),p=document.querySelector(".mobile-nav__toggle"),q=document.getElementById("header"),r=q.offsetHeight,s=document.getElementById("live-player__sidebar"),t=document.querySelector(".live-player__stream--current"),u=t.offsetHeight,v=32,w=document.getElementById("on-air"),x=document.getElementById("up-next"),y=document.getElementById("now-playing"),z=document.getElementById("live-links"),A=document.querySelector(".widget--live-player"),B=A.offsetHeight,C=document.getElementById("live-player"),D=C.offsetHeight,E=Math.max(document.documentElement.clientHeight,window.innerHeight||0),F={};l=Date.now||function(){return(new Date).getTime()};var G=function(a,b,c){this.btn=a,this.elemHide=b,this.elemDisplay=c};G.prototype.playAction=function(){var a=this;a.btn.addEventListener("click",function(){a.elemHide.style.display="none",a.elemDisplay.style.display="inline-block"},!1)};var H,I,J,K,L,M,N,O;K=document.getElementById("playButton"),L=document.getElementById("pauseButton"),M=document.getElementById("resumeButton"),N=document.getElementById("live-stream__listen-now"),O=document.getElementById("live-stream__now-playing"),H=new G(K,N,O),I=new G(L,O,N),J=new G(M,N,O),H.playAction(),I.playAction(),J.playAction(),m=new Headroom(q,{offset:r,tolerance:0,classes:{pinned:"header--pinned",unpinned:"header--unpinned"},onTop:function(){d()},onNotTop:function(){n()}}),p.addEventListener("click",f,!1),t.addEventListener("click",g,!1);var P=b(c,50),Q=a(c,50),R=b(k,50),S=a(k,50);window.innerWidth<=767&&(w.addEventListener("click",h,!1),x.addEventListener("click",i,!1),y.addEventListener("click",j,!1)),window.innerWidth>=768&&(window.addEventListener("load",function(){d(),e()},!1),window.addEventListener("scroll",function(){P(),Q()},!1),window.addEventListener("resize",function(){R(),S()},!1))}();