!function(jQuery){function a(){d.on("click.greaterMedia.Menus","a.show-subnavigation",c),d.on("click.greaterMedia.Menus","a.mobile-menu-submenu-back-link",b)}function b(a){a.preventDefault(),jQuery(this).parents(".sub-menu").removeClass("is-visible")}function c(a){a.preventDefault(),d.find(".is-visible").removeClass("is-visible"),jQuery(this).siblings(".sub-menu").addClass("is-visible")}var d=jQuery(document.querySelectorAll("ul.js-mobile-sub-menus"));a()}(jQuery,window),function(a){var b=function(){};b.prototype={run:function(){var b=a(".header__account--container");b.append(this.getMenu());var c=a(".header__account--btn");c.attr("href",this.getAvatarLink());var d=this.getThumbnailURL();if(d){var e=a("<img />",{src:d});c.html(e)}},getAvatarLink:function(){var a=is_gigya_user_logged_in()?"account":"login";return gigya_profile_path(a)},getThumbnailURL:function(){return get_gigya_user_field("thumbnailURL")},getMenu:function(){for(var b,c,d,e=this.getMenuLabels(),f=e.length,g=a('<ul class="header__account--links sub-menu"></ul>'),h=0;f>h;h++)d=e[h],b=a("<li></li>"),c=a("<a></a>",{href:gigya_profile_path(d.endpoint)}),c.text(d.label),b.append(c),g.append(b);return g},getMenuLabels:function(){var a;return a=is_gigya_user_logged_in()?[{label:"Edit Account",endpoint:"account"},{label:"Logout",endpoint:"logout"}]:[{label:"Login/Register",endpoint:"login"}]}},a(document).ready(function(){var a=new b;a.run()})}(jQuery),function(a,b){var c,d=a(document),e={},f=null,g=b.href;c=function(a){return a.replace(/[\?\#].*$/g,"")},d.bind("pjax:popstate",function(){f=c(g)}),d.bind("pjax:beforeSend",function(){f=c(b.href)}),d.bind("pjax:end",function(d,h,i){var j=a("body"),k=!1,l=new RegExp('<body.*?class="(.*?)"',"im");e[f]=j.attr("class"),h?(k=l.exec(h.responseText),k&&k.length>=2&&j.attr("class",k[1])):j.attr("class",e[c(i.url)]),g=b.href})}(jQuery,location),function(){function a(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function b(){L={x:window.pageXOffset,y:window.pageYOffset},0===L.y?(r.classList.contains("logged-in")?(w.style.top=v+C+"px",w.style.height=K-C-v+"px",G.style.height=K-v-C-z-J-36+"px"):(w.style.top=v+"px",w.style.height=K-v+"px",G.style.height=K-v-z-J-36+"px"),w.classList.remove("live-player--fixed"),w.classList.add("live-player--init")):L.y>=1&&L.y<=v?(r.classList.contains("logged-in")?(w.style.top=v+C+"px",G.style.height=K-C-z-J-36+"px"):(w.style.top=v+"px",G.style.height=K-z-J-36+"px"),w.style.height="100%",w.classList.remove("live-player--fixed"),w.classList.add("live-player--init")):L.y>=v?(r.classList.contains("logged-in")?(w.style.top=C+"px",w.style.height=K-C+"px",G.style.height=K-C-z-J-36+"px"):(w.style.top="0px",w.style.height=K+"px",G.style.height=K-z-J-36+"px"),w.classList.remove("live-player--init"),w.classList.add("live-player--fixed")):w.style.height="100%"}function c(){r.classList.contains("logged-in")?(w.style.top=v+C+"px",w.style.height=K-C-v+"px"):(w.style.top=v+"px",w.style.height=K-v+"px"),w.classList.remove("live-player--fixed"),w.classList.add("live-player--init")}function d(){var a=H.offsetHeight;G.style.height=r.classList.contains("logged-in")?K-v-C-z-J-36+"px":K-v-z-J-36+"px",H.style.height=a+"px"}function e(){w.style.position="fixed",w.style.top="auto",w.style.bottom="0",w.style.right="0",w.style.left="0",w.style.height="auto"}function f(){w.classList.contains("live-player--init"),w.style.left="auto",w.style.bottom="auto",w.style.right=window.innerWidth>=1385||this.document.documentElement.clientWidth>=1385||this.document.body.clientWidth>=1385?"calc(50% - 700px)":"0",r.classList.contains("logged-in")?(w.style.top=v+C+"px",w.style.height=K-C-v+"px"):(w.style.top=v+"px",w.style.height=K-v+"px")}function g(){r.classList.toggle("mobile-nav--open")}function h(a){var b=document.querySelector(this.getAttribute("data-target")),c=this.innerText,d=this.getAttribute("data-alt-text");a.preventDefault(),b.style.display="none"!=b.style.display?"none":"block",this.innerText=d,this.setAttribute("data-alt-text",c)}function i(){y.classList.toggle("open"),x.classList.toggle("open")}function j(){var a=this.querySelector(".live-player__stream--name").textContent;A.textContent=a,document.dispatchEvent(new CustomEvent("live-player-stream-changed",{detail:a}))}function k(){r.classList.toggle("live-player--open"),r.classList.contains("live-player--open")?(document.body.style.overflow="hidden",s.style.overflow="hidden"):(document.body.style.overflow="auto",s.style.overflow="auto")}function l(){r.classList.toggle("live-player--open"),r.classList.contains("live-player--open")?(r.style.overflow="hidden",s.style.overflow="hidden"):(r.style.overflow="auto",s.style.overflow="auto")}function m(){r.classList.toggle("live-player--open"),r.classList.contains("live-player--open")?(r.style.overflow="auto",s.style.overflow="auto"):(r.style.overflow="hidden",s.style.overflow="hidden")}function n(){r.classList.contains("live-player--open")&&r.classList.remove("live-player--open")}function o(){if(window.innerWidth<=767){if(null!=D&&a(D,Q,k),null!=E&&a(E,Q,l),null!=F&&a(F,Q,m),null!=Y||null!=$){var b;b=function(){r.classList.add("live-player--active"),F.style.display="block",E.style.display="none",D.style.display="none"},a(Y,Q,b),a($,Q,b)}null!=Z&&a(Z,Q,function(){r.classList.remove("live-player--active"),F.style.display="none",E.style.display="block",D.style.display="block"}),null!=H&&a(H,Q,n),null!=w&&e()}window.innerWidth>=768&&null!=w&&(f(),a(window,S,function(){db(),eb()}))}function p(a){null!==M&&(a.preventDefault(),M.classList.toggle("header__search--open"),O.focus())}function q(a){null!==M&&M.classList.contains("header__search--open")&&(a.preventDefault(),M.classList.remove("header__search--open"))}var r=document.querySelector("body"),s=document.querySelector("html"),t=document.querySelector(".mobile-nav__toggle"),u=(document.getElementById("page-wrap"),document.getElementById("header")),v=u.offsetHeight,w=document.getElementById("live-player__sidebar"),x=document.querySelector(".live-player__stream"),y=document.querySelector(".live-player__stream--current"),z=y.offsetHeight,A=y.querySelector(".live-player__stream--current-name"),B=y.querySelectorAll(".live-player__stream--item"),C=32,D=document.getElementById("on-air"),E=document.getElementById("up-next"),F=document.getElementById("nowPlaying"),G=document.getElementById("live-links"),H=(document.querySelector(".live-link__title"),document.querySelector(".widget--live-player")),I=document.getElementById("live-player"),J=I.offsetHeight,K=Math.max(document.documentElement.clientHeight,window.innerHeight||0),L=(this.innerWidth||this.document.documentElement.clientWidth||this.document.body.clientWidth||0,{}),M=document.getElementById("header__search--form"),N=document.getElementById("header__search"),O=document.getElementById("header-search"),P=document.querySelector('*[data-toggle="collapse"]'),Q="click",R="load",S="scroll",T="resize",U=function(a,b,c){this.btn=a,this.elemHide=b,this.elemDisplay=c};U.prototype.playAction=function(){var b=this;a(b.btn,Q,function(){b.elemHide.style.display="none",b.elemDisplay.style.display="inline-block"})};var V,W,X,Y,Z,$,ab,bb;Y=document.getElementById("playButton"),Z=document.getElementById("pauseButton"),$=document.getElementById("resumeButton"),ab=document.getElementById("live-stream__listen-now"),bb=document.getElementById("live-stream__now-playing"),V=new U(Y,ab,bb),W=new U(Z,bb,ab),X=new U($,ab,bb),a(t,Q,g),null!=P&&a(P,Q,h),a(y,Q,i);for(var cb=0;cb<B.length;cb++)a(B[cb],Q,j);null!==N&&(N.addEventListener("click",p,!1),M.addEventListener("click",function(a){a.stopPropagation()})),window.onkeydown=function(a){27===a.keyCode&&q()};var db=_.debounce(b,50),eb=_.throttle(b,50),fb=_.debounce(o,50),gb=_.throttle(o,50);a(window,T,function(){fb(),gb()}),window.innerWidth<=767?(null!=D&&a(D,Q,k),null!=E&&a(E,Q,l),null!=F&&a(F,Q,m),null!=H&&a(H,Q,n)):(a(window,R,function(){c(),null!=H&&d()}),a(window,S,function(){db(),eb()}))}();