/*! Greater Media - v0.1.0 - 2014-11-19
 * http://greatermedia.com
 * Copyright (c) 2014; * Licensed GPLv2+ */
!function(){function a(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:k(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=k();h||c.leading!==!1||(h=j);var l=b-(j-h);return d=this,e=arguments,0>=l||l>b?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,l)),f}}function b(a,b,c){var d,e,f,g,h,i=function(){var j=k()-g;b>j&&j>0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=k();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}}function c(){y={x:window.pageXOffset,y:window.pageYOffset},0===y.y?(n.classList.contains("logged-in")?(r.style.top=q+t+"px",r.style.height=x-t-q+"px"):(r.style.top=q+"px",r.style.height=x-q+"px"),r.classList.remove("live-player--fixed"),r.classList.add("live-player--init")):y.y>=1&&y.y<=q?(r.style.top=n.classList.contains("logged-in")?q+t+"px":q+"px",r.style.height="100%",r.classList.remove("live-player--fixed"),r.classList.add("live-player--init")):y.y>=q?(n.classList.contains("logged-in")?(r.style.top=t+"px",r.style.height=x-t+"px"):(r.style.top="0px",r.style.height=x+"px"),r.classList.remove("live-player--init"),r.classList.add("live-player--fixed")):r.style.height="100%"}function d(){n.classList.contains("logged-in")?(r.style.top=q+t+"px",r.style.height=x-t-q+"px"):(r.style.top=q+"px",r.style.height=x-q+"px"),r.classList.remove("live-player--fixed"),r.classList.add("live-player--init")}function e(){n.classList.toggle("mobile-nav--open")}function f(){s.classList.toggle("open")}function g(){n.classList.toggle("live-player--open")}function h(){n.classList.toggle("live-player--open")}function i(){n.classList.toggle("live-player--open")}function j(){window.innerWidth<=767&&(u.addEventListener("click",g,!1),w.addEventListener("click",i,!1)),window.innerWidth>=768&&window.addEventListener("load",d,!1)}var k,l,m,d,n=document.querySelector("body"),o=document.querySelector(".mobile-nav__toggle"),p=document.getElementById("header"),q=p.offsetHeight,r=document.getElementById("live-player__sidebar"),s=document.querySelector(".live-player__stream--current"),t=32,u=document.getElementById("on-air"),v=document.getElementById("up-next"),w=document.getElementById("now-playing"),x=Math.max(document.documentElement.clientHeight,window.innerHeight||0),y={};k=Date.now||function(){return(new Date).getTime()},l=new Headroom(p,{offset:q,tolerance:0,classes:{pinned:"header--pinned",unpinned:"header--unpinned"},onTop:function(){d()},onNotTop:function(){m()}}),o.addEventListener("click",e,!1),s.addEventListener("click",f,!1);var z=b(c,50),A=a(c,50),B=b(j,50),C=a(j,50);window.innerWidth<=767&&(u.addEventListener("click",g,!1),v.addEventListener("click",h,!1),w.addEventListener("click",i,!1)),window.innerWidth>=768&&(window.addEventListener("load",d,!1),window.addEventListener("scroll",function(){z(),A()},!1),window.addEventListener("resize",function(){B(),C()},!1))}();