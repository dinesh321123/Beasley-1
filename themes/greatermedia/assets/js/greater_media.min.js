!function(jQuery){function a(){d.on("click.greaterMedia.Menus","a.show-subnavigation",c),d.on("click.greaterMedia.Menus","a.mobile-menu-submenu-back-link",b)}function b(a){a.preventDefault(),jQuery(this).parents(".sub-menu").removeClass("is-visible")}function c(a){a.preventDefault(),d.find(".is-visible").removeClass("is-visible"),jQuery(this).siblings(".sub-menu").addClass("is-visible")}var d=jQuery(document.querySelectorAll("ul.js-mobile-sub-menus"));a()}(jQuery,window),function(a){var b=function(){};b.prototype={run:function(){var b=a(".header__account--container");b.append(this.getMenu());var c=a(".header__account--btn");c.attr("href",this.getAvatarLink());var d=this.getThumbnailURL();if(d){var e=a("<img />",{src:d});c.html(e)}},getAvatarLink:function(){var a=is_gigya_user_logged_in()?"account":"login";return gigya_profile_path(a)},getThumbnailURL:function(){return get_gigya_user_field("thumbnailURL")},getMenu:function(){for(var b,c,d,e=this.getMenuLabels(),f=e.length,g=a('<ul class="header__account--links sub-menu"></ul>'),h=0;f>h;h++)d=e[h],b=a("<li></li>"),c=a("<a></a>",{href:gigya_profile_path(d.endpoint)}),c.text(d.label),b.append(c),g.append(b);return g},getMenuLabels:function(){var a;return a=is_gigya_user_logged_in()?[{label:"Edit Account",endpoint:"account"},{label:"Logout",endpoint:"logout"}]:[{label:"Login/Register",endpoint:"login"}]}},a(document).ready(function(){var a=new b;a.run()})}(jQuery),function(a,b){var c,d=a(document),e={},f=null,g=b.href;c=function(a){return a.replace(/[\?\#].*$/g,"")},d.bind("pjax:popstate",function(){f=c(g)}),d.bind("pjax:beforeSend",function(){f=c(b.href)}),d.bind("pjax:end",function(d,h,i){var j=a("body"),k=!1,l=new RegExp('<body.*?class="(.*?)"',"im");e[f]=j.attr("class"),h?(k=l.exec(h.responseText),k&&k.length>=2&&j.attr("class",k[1])):j.attr("class",e[c(i.url)]),g=b.href})}(jQuery,location),function(){function a(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function b(){window.innerWidth>=768&&(O={x:window.pageXOffset,y:window.pageYOffset},0===O.y?(u.classList.contains("logged-in")?(z.style.top=y+F+"px",z.style.height=N-F-y+"px",J.style.height=N-y-F-C-M-36+"px"):(z.style.top=y+"px",z.style.height=N-y+"px",J.style.height=N-y-C-M-36+"px"),z.classList.remove("live-player--fixed"),z.classList.add("live-player--init")):O.y>=1&&O.y<=y?(u.classList.contains("logged-in")?(z.style.top=y+F+"px",J.style.height=N-F-C-M-36+"px"):(z.style.top=y+"px",J.style.height=N-C-M-36+"px"),z.style.height="100%",z.classList.remove("live-player--fixed"),z.classList.add("live-player--init")):O.y>=y?(u.classList.contains("logged-in")?(z.style.top=F+"px",z.style.height=N-F+"px",J.style.height=N-F-C-M-36+"px"):(z.style.top="0px",z.style.height=N+"px",J.style.height=N-C-M-36+"px"),z.classList.remove("live-player--init"),z.classList.add("live-player--fixed")):z.style.height="100%")}function c(){u.classList.contains("logged-in")?(z.style.top=y+F+"px",z.style.height=N-F-y+"px"):(z.style.top=y+"px",z.style.height=N-y+"px"),z.classList.remove("live-player--fixed"),z.classList.add("live-player--init")}function d(){if(window.innerWidth>=768){var a=K.offsetHeight;J.style.height=u.classList.contains("logged-in")?N-y-F-C-M-36+"px":N-y-C-M-36+"px",K.style.height=a+"px"}}function e(){null!=z&&(z.classList.contains("live-player--init")&&z.classList.remove("live-player--init"),z.classList.contains("live-player--fixed")&&z.classList.remove("live-player--fixed"),z.classList.add("live-player--mobile"))}function f(){z.classList.contains("live-player--mobile")&&z.classList.remove("live-player--mobile"),z.classList.add("live-player--init"),z.style.right=window.innerWidth>=1385||this.document.documentElement.clientWidth>=1385||this.document.body.clientWidth>=1385?"calc(50% - 700px)":"0",b()}function g(){u.classList.toggle("mobile-nav--open")}function h(a){var b=document.querySelector(this.getAttribute("data-target")),c=this.innerText,d=this.getAttribute("data-alt-text");a.preventDefault(),b.style.display="none"!=b.style.display?"none":"block",this.innerText=d,this.setAttribute("data-alt-text",c)}function i(){B.classList.toggle("open"),A.classList.toggle("open")}function j(){var a=this.querySelector(".live-player__stream--name").textContent;D.textContent=a,document.dispatchEvent(new CustomEvent("live-player-stream-changed",{detail:a}))}function k(){window.innerWidth<=767&&(u.classList.toggle("live-player--open"),u.classList.contains("live-player--open")?(document.body.style.overflow="hidden",v.style.overflow="hidden"):(document.body.style.overflow="initial",v.style.overflow="initial"))}function l(){window.innerWidth<=767&&(u.classList.toggle("live-player--open"),u.classList.contains("live-player--open")?(u.style.overflow="hidden",v.style.overflow="hidden"):(u.style.overflow="auto",v.style.overflow="auto"))}function m(){window.innerWidth<=767&&(u.classList.toggle("live-player--open"),u.classList.contains("live-player--open")?(u.style.overflow="auto",v.style.overflow="auto"):(u.style.overflow="hidden",v.style.overflow="hidden"))}function n(){window.innerWidth<=767&&u.classList.contains("live-player--open")&&u.classList.remove("live-player--open")}function o(){window.innerWidth<=767&&(u.classList.add("live-player--active"),I.style.display="block",H.style.display="none",G.style.display="none")}function p(){window.innerWidth<=767&&(u.classList.remove("live-player--active"),I.style.display="none",H.style.display="block",G.style.display="block")}function q(){window.innerWidth<=767&&null!=z&&e(),window.innerWidth>=768&&null!=z&&(f(),c(),a(window,V,function(){gb(),hb()}))}function r(a){null!==P&&(a.preventDefault(),P.classList.toggle("header__search--open"),R.focus())}function s(a){null!==P&&P.classList.contains("header__search--open")&&(a.preventDefault(),P.classList.remove("header__search--open"))}function t(){var a=jQuery(document.querySelector(".header__nav--list")),b=jQuery(document.querySelector(".overlay-mask"));a.on("mouseover",".menu-item-has-children",function(){b.addClass("is-visible")}),a.on("mouseout",".menu-item-has-children",function(){b.removeClass("is-visible")})}var u=document.querySelector("body"),v=document.querySelector("html"),w=document.querySelector(".mobile-nav__toggle"),x=(document.getElementById("page-wrap"),document.getElementById("header")),y=x.offsetHeight,z=document.getElementById("live-player__sidebar"),A=document.querySelector(".live-player__stream"),B=document.querySelector(".live-player__stream--current"),C=B.offsetHeight,D=B.querySelector(".live-player__stream--current-name"),E=B.querySelectorAll(".live-player__stream--item"),F=32,G=document.getElementById("on-air"),H=document.getElementById("up-next"),I=document.getElementById("nowPlaying"),J=document.getElementById("live-links"),K=(document.querySelector(".live-link__title"),document.querySelector(".widget--live-player")),L=document.getElementById("live-player"),M=L.offsetHeight,N=Math.max(document.documentElement.clientHeight,window.innerHeight||0),O=(this.innerWidth||this.document.documentElement.clientWidth||this.document.body.clientWidth||0,{}),P=document.getElementById("header__search--form"),Q=document.getElementById("header__search"),R=document.getElementById("header-search"),S=document.querySelector('*[data-toggle="collapse"]'),T="click",U="load",V="scroll",W="resize",X=function(a,b,c){this.btn=a,this.elemHide=b,this.elemDisplay=c};X.prototype.playAction=function(){var b=this;a(b.btn,T,function(){b.elemHide.style.display="none",b.elemDisplay.style.display="inline-block"})};var Y,Z,$,ab,bb,cb,db,eb;ab=document.getElementById("playButton"),bb=document.getElementById("pauseButton"),cb=document.getElementById("resumeButton"),db=document.getElementById("live-stream__listen-now"),eb=document.getElementById("live-stream__now-playing"),Y=new X(ab,db,eb),Z=new X(bb,eb,db),$=new X(cb,db,eb),a(w,T,g),null!=S&&a(S,T,h),a(B,T,i);for(var fb=0;fb<E.length;fb++)a(E[fb],T,j);null!==Q&&(Q.addEventListener("click",r,!1),P.addEventListener("click",function(a){a.stopPropagation()})),window.onkeydown=function(a){27===a.keyCode&&s()};var gb=_.debounce(b,50),hb=_.throttle(b,50),ib=_.debounce(q,50),jb=_.throttle(q,50);window.innerWidth<=767?(null!=G&&a(G,T,k),null!=H&&a(H,T,l),null!=I&&a(I,T,m),null!=K&&a(K,T,n)):(a(window,U,function(){c(),null!=K&&d()}),a(window,V,function(){gb(),hb()})),null!=G&&a(G,T,k),null!=H&&a(H,T,l),null!=I&&a(I,T,m),null!=K&&a(K,T,n),(null!=ab||null!=cb)&&(a(ab,T,o),a(cb,T,o)),null!=bb&&a(bb,T,p),a(window,W,function(){ib(),jb()}),t()}();